var heTreeVue=function(R,_){"use strict";/*!
 * @he-tree/vue v2.9.3
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://hetree.phphe.com/
 * Released under the MIT License.
 */function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}/*!
 * helper-js v3.1.2
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */function le(e){return Object.prototype.toString.call(e)==="[object Array]"}function De(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ye(e){return typeof e=="function"}function qe(e,t){return e<t?e:t}function Ee(e,t){let n,r=0;for(;(n=e.indexOf(t))>-1;)e.splice(n,1),r++;return r}function ke(e){return e[e.length-1]}function Je(e){return le(e)?e:[e]}function Ze(e,t){let n=new Set(t);const r={};return n.forEach(a=>{r[a]=e[a]}),r}function*Ge(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.reverse)if(e.length!=null)for(let n=e.length-1;n>=0;n--){const r={value:e[n],index:n};(!t.exclude||!t.exclude(r))&&(yield r)}else if(De(e)){const n=Object.keys(e);n.reverse();for(const r of n){const a={value:e[r],key:r};(!t.exclude||!t.exclude(a))&&(yield a)}}else throw"Unsupported type";else if(e.length!=null)for(let n=0;n<e.length;n++){const r={value:e[n],index:n};(!t.exclude||!t.exclude(r))&&(yield r)}else if(De(e))for(const n of Object.keys(e)){const r={value:e[n],key:n};(!t.exclude||!t.exclude(r))&&(yield r)}else throw"Unsupported type"}function Qe(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}function Oe(e,t){return Object.keys(t).forEach(n=>{Qe(e,n,t[n])}),e}function et(e){const t={};return Object.keys(e).forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t}function K(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=Oe({...n},{childrenKey:"children"});const{childrenKey:r}=n,a=le(e)?e:[e];class l{}const i=(s,f,o)=>{n.reverse&&(s=s.slice(),s.reverse());const d=s.length;for(let u=0;u<d;u++){const c=s[u],h=n.reverse?d-u-1:u,p=o?[...o,h]:[];n.childFirst&&c[r]!=null&&i(c[r],c,p);const y=t(c,h,f,p);if(y===!1)throw new l;if(y==="skip children")continue;if(y==="skip siblings")break;n.childFirst||c[r]!=null&&i(c[r],c,p)}};try{i(a,null,le(e)?[]:null)}catch(s){if(!(s instanceof l))throw s}}function tt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r;return K(e,function(){if(t(...arguments))return r={node:arguments.length<=0?void 0:arguments[0],index:arguments.length<=1?void 0:arguments[1],parent:arguments.length<=2?void 0:arguments[2],path:arguments.length<=3?void 0:arguments[3]},!1},n),r}function nt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=tt(e,t,n);return r==null?void 0:r.node}function Ne(e,t){const n={childrenKey:"children"};t&&Object.assign(n,t);const{childrenKey:r,nodeHandler:a}=n,l=new ge;return l.childrenKey=r,K(e,(i,s,f,o)=>{let d=Object.assign({},i);d[r]&&(d[r]=[]),a&&(d=a(d,{oldNode:i,index:s,parent:f,path:o})),l.set(o,d)},{childrenKey:r}),l.data}class ge{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];ee(this,"data",void 0),ee(this,"childrenKey","children"),this.data=t}get rootChildren(){const{childrenKey:t}=this,{data:n}=this;return le(n)?n:n[t]}*iteratePath(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{childrenKey:r,rootChildren:a}=this;if(n.reverse){const l=[...this.iteratePath(t,{...n,reverse:!1})];l.reverse();for(const{path:i,node:s}of l)yield{path:i,node:s}}else{let l=[],i=a;for(const s of t){const f=[...l,s],o=i[s];yield{path:f,node:o},l=f,i=o[r]}}}getFamily(t){const n=[];for(const{node:r}of this.iteratePath(t))n.push(r);return n}get(t){return ke(this.getFamily(t))}getParentAndIndex(t){const n=t.slice(),r=n.pop();return{parent:this.get(n),index:r,parentPath:n}}getParent(t){return this.getParentAndIndex(t).parent}set(t,n){if(t==null||t.length===0)this.data=n;else{const{childrenKey:r}=this;let{rootChildren:a}=this;const{parent:l,index:i}=this.getParentAndIndex(t);let s;t.length===1?(a||(this.data?this.data[r]=[]:this.data=[]),s=a):(l[r]||(l[r]=[]),s=l[r]),s[i]=n}}delete(t){const{childrenKey:n,rootChildren:r}=this,{parent:a,index:l}=this.getParentAndIndex(t),i=t.length===1?r:a[n],s=i[l];return i.splice(l,1),s}walk(t,n){const{childrenKey:r,data:a}=this;return K(a,t,r,n)}clone(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ne(this.data),et({childrenKey:this.childrenKey,nodeHandler:t.nodeHandler||void 0})}}function Le(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ye(e)?e(...t):e}function rt(e,t){return function(){let r,a;try{r=e(...arguments)}catch(l){a=l}finally{}if(a)throw a;return r}}function te(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[];let r;const a={};let l=a;return{action:function(){for(var f=arguments.length,o=new Array(f),d=0;d<f;d++)o[d]=arguments[d];if(o.length===0)return l===a&&(l=e()),l;if(r||(r=new st),!r.has(o)&&(r.set(o,e(...o)),t.capacity!=null)){n.push(o);const u=n.splice(0,n.length-t.capacity);for(const c of u)r.delete(c)}return r.get(o)},clearCache:()=>{r=null,n.splice(0,n.length)}}}function lt(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function it(e,t){for(;;){if(e.parentNode==null)return!1;if(e.parentNode===t)return!0;e=e.parentNode}}function pe(e){let t=e.getBoundingClientRect();if(document.documentElement.clientTop>0){const n=t.top-document.documentElement.clientTop,r=t.bottom,a=t.left-document.documentElement.clientLeft,l=t.right,i=t.width||l-a,s=t.height||r-n,d={top:n,right:l,bottom:r,left:a,width:i,height:s,x:a,y:n};t={...d,toJSON:()=>d}}return t}function Te(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n&&n.withSelf?e:e.parentElement;for(;r;){const a=n.until&&r===n.until;if(a&&!n.withUntil)return;const l=t(r);if(l==="break")return;if(l)return r;if(a)return;r=r.parentElement}}function ie(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function Fe(e,t){for(const n of t)if(ie(e,n))return!0;return!1}function H(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),n,r)}function V(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on".concat(t),n,r)}function at(e){let t=[];const a={listening:!1,stop:()=>{if(a.listening){for(const l of t)l();t=[],a.listening=!1}},resume:()=>{if(!a.listening){for(const l of e){H.apply(this,l);const i=()=>V.apply(this,l);t.push(i)}a.listening=!0}}};return a}function ae(e,t){return getComputedStyle(e)[t]}function ve(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n={start:0,end:e.length-1,maxTimes:1e3,...n};let{start:r,end:a}=n;const{returnNearestIfNoHit:l,maxTimes:i}=n;let s,f;r==null&&(r=0,a=e.length-1);let o=0,d;for(;r>=0&&r<=a;){if(o>=i)throw Error("binarySearch: loop times is over ".concat(i,", you can increase the limit."));s=Math.floor((a-r)/2+r),f=e[s];const u=o+1;if(d=t(f,s,u),d>0)a=s-1;else if(d<0)r=s+1;else return{index:s,value:f,count:u,hit:!0};o++}return l?{index:s,value:f,count:o+1,hit:!1,greater:d>0}:null}class st{constructor(){ee(this,"_map",new Map),ee(this,"_values",{}),ee(this,"_objCount",0)}_keysToString(t){const{_map:n}=this;let r=[];for(const a of t){if(!n.has(a))return null;r.push(n.get(a)[0])}return r.toString()}has(t){return this._keysToString(t)!=null}get(t){const{_values:n}=this,r=this._keysToString(t);if(r==null)throw"Value not found by specified keys";return n[r][1]}set(t,n){const{_map:r,_values:a}=this;let l=[];for(const i of t){let s,f=1;r.has(i)?([s,f]=r.get(i),f++):(this._objCount++,s=this._objCount.toString()),r.set(i,[s,f]),l.push(s)}a[l.toString()]=[t.slice(),n]}delete(t){const{_values:n,_map:r}=this,a=this._keysToString(t);if(a==null)throw"Value not found by specified keys";delete n[a];for(const l of t){let[i,s]=r.get(l);s--,s===0?r.delete(l):r.set(l,[i,s])}}clear(){this._map.clear(),this._values={}}*entries(){const{_values:t}=this;for(const n in t){const[r,a]=t[n];yield[r,a]}}count(){return[...this.entries()].length}}/*!
 * @virtual-list/vue
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://virtual-list.phphe.com
 * Released under the MIT License.
 */const ot=_.defineComponent({props:{table:Boolean}});var ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.table?n("table",[e._t("prepend"),n("tbody",[e._t("default")],2),e._t("append")],2):n("div",[e._t("prepend"),e._t("default"),e._t("append")],2)},dt=[];function Pe(e,t,n,r,a,l,i,s){var f=typeof e=="function"?e.options:e;t&&(f.render=t,f.staticRenderFns=n,f._compiled=!0);var o;if(a&&(o=a),o)if(f.functional){f._injectStyles=o;var d=f.render;f.render=function(c,h){return o.call(h),d(c,h)}}else{var u=f.beforeCreate;f.beforeCreate=u?[].concat(u,o):[o]}return{exports:e,options:f}}const Be={};var ut=Pe(ot,ct,dt,!1,ft);function ft(e){for(let t in Be)this[t]=Be[t]}const ht=function(){return ut.exports}(),gt=_.defineComponent({components:{VirtualListTable:ht},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const t=_.ref(0),n=_.ref(e.firstRender-1),r=_.computed(()=>{var b;return qe(n.value,(((b=e.items)==null?void 0:b.length)||1)-1)}),a=_.ref(0),l=_.computed(()=>c.value[t.value]?Q(t.value):0),i=_.computed(()=>c.value.length>0?Q(c.value.length-1)+ke(u.value):0),s=_.computed(()=>c.value[r.value]?i.value-Q(r.value)-u.value[r.value]:0),f=_.computed(()=>e.disabled?{}:{overflow:"auto"}),o=_.computed(()=>{const b={display:"flex"};return e.disabled||(e.horizontal?Object.assign(b,{"margin-left":l.value+"px","margin-right":s.value+"px",width:i.value-s.value-l.value+"px"}):Object.assign(b,{"margin-top":l.value+"px","margin-bottom":s.value+"px"})),b["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete b.display,delete b["flex-direction"]),b}),d=_.computed(()=>_.reactive((e.items||[]).map(()=>null))),u=_.computed(()=>(e.items||[]).map((b,v)=>{var w;if(d[v]!=null)return d[v];let S=(w=e.itemSize)==null?void 0:w.call(e,b,v);return S==null&&(S=a.value),S})),c=_.computed(()=>{const b=[];return u.value.reduce((v,w)=>(b.push(v),v+w),0),b});_.watch(()=>e.items,D);const h=_.computed(()=>{if(!e.items||e.disabled)return;const b=[];for(let v=t.value;v<=r.value;v++){const w=e.items[v];if(!w)break;b.push({item:w,index:v})}return b}),p=_.ref(),y=_.ref();_.onMounted(async()=>{D();try{Ce()}catch{await _.nextTick(),D()}});let x;function O(){const b=p.value;if(!b)return;const v=j(b);x!=null&&e.buffer-Math.abs(v-x)>=10||(x=v,D())}let C=!1,A=!1;async function D(){var b;if(C){A=!0;return}if(!e.items||e.disabled)return;C=!0;const v=p.value,w=(b=y.value)==null?void 0:b.$el;if(!v||!w)return;a.value||(a.value=he()),t.value=q(),n.value=J(),await _.nextTick();let S,F=0;const $={},W=e.table?w.querySelector("tbody").children:w.children;for(let k=0;k<W.length;k++){const N=W[k],E=ae(N,"position");if(E&&["absolute","fixed"].includes(E))continue;const L=ae(N,"display")!=="none"?G(N):0,M=N.getAttribute("vt-index"),Z=M?parseInt(M):t.value+F;$[Z]=($[Z]||0)+L,F++}for(const k of Object.keys($)){const N=parseInt(k);d.value[N]!==$[N]&&(d.value[N]=$[N],S=!0)}S&&await _.nextTick(),C=!1,A&&(A=!1,D());function q(){const k=j(v)-I(v)-e.buffer;return ve(c.value,N=>N-k,{returnNearestIfNoHit:!0}).index}function J(){const k=j(v)-I(v)+U(v)+e.buffer;return ve(c.value,N=>N-k,{returnNearestIfNoHit:!0}).index}function he(){const k=[],N=e.table?w.querySelector("tbody").children:w.children;for(let E=0;E<N.length;E++){const L=N[E],M=getComputedStyle(L);if(["absolute","fixed"].includes(M.position))continue;const Z=G(L);if(k.push(Z),k.length>=10)break}return k.length===0?0:k.reduce((E,L)=>E+L,0)/k.length}}function U(b){const v=getComputedStyle(b);let w=parseFloat(e.horizontal?v.width:v.height);return v.boxSizing==="border-box"&&(e.horizontal?w=w-parseFloat(v.borderLeftWidth)-parseFloat(v.borderRightWidth):w=w-parseFloat(v.borderTopWidth)-parseFloat(v.borderBottomWidth)),w}function G(b){let v=U(b);const w=getComputedStyle(b);return e.horizontal?v+=parseFloat(w.borderLeftWidth)+parseFloat(w.borderRightWidth)+parseFloat(w.marginLeft)+parseFloat(w.marginRight):v+=parseFloat(w.borderTopWidth)+parseFloat(w.borderBottomWidth)+parseFloat(w.marginTop)+parseFloat(w.marginBottom),v=Number.isNaN(v)?0:v,v}function j(b){return e.horizontal?b.scrollLeft:b.scrollTop}function I(b){const v=getComputedStyle(b);return e.horizontal?parseFloat(v.paddingLeft):parseFloat(v.paddingTop)}function Q(b){return c.value[b]}function Ce(){const b=p.value;new ResizeObserver(v=>{for(let w of v)if(ie(w.target,"vtlist")){D();break}}).observe(b)}function fe(b,v){if(e.itemKey){if(typeof e.itemKey=="string"&&e.itemKey==="index")return v;if(typeof e.itemKey=="function")return e.itemKey(b,v)}}return{listElRef:p,listInnerRef:y,onscroll:O,listStyle:f,listInnerStyle:o,visibleItemsInfo:h,getItemKey:fe,update:D,sizes:u,positions:c,runtimeSizes:d}}});var pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"listElRef",staticClass:"vtlist",style:e.listStyle,on:{"&scroll":function(r){return e.onscroll.apply(null,arguments)}}},[n("VirtualListTable",{ref:"listInnerRef",staticClass:"vtlist-inner",style:e.listInnerStyle,attrs:{table:e.table},scopedSlots:e._u([{key:"prepend",fn:function(){return[e._t("prepend")]},proxy:!0},{key:"append",fn:function(){return[e._t("append")]},proxy:!0}],null,!0)},[e.disabled?[e._l(e.items,function(r,a){return[e._t("default",null,{item:r,index:a})]})]:[e._l(e.visibleItemsInfo,function(r){var a=r.item,l=r.index;return[e._t("default",null,{item:a,index:l})]})]],2)],1)},vt=[];const Ie={};var mt=Pe(gt,pt,vt,!1,yt);function yt(e){for(let t in Ie)this[t]=Ie[t]}const bt=function(){return mt.exports}();let se=!1;const _t=()=>{se=!0,setTimeout(()=>{se=!1},100)},xt=_.defineComponent({props:["stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor"],emits:["open","close","check"],setup(e,{emit:t}){const n=_.computed(()=>({[e.rtl?"paddingRight":"paddingLeft"]:e.indent*(e.stat.level-1)+"px"}));_.watch(()=>e.stat.checked,l=>{se||e.processor.afterOneCheckChanged(e.stat)&&t("check",e.stat)}),_.watch(()=>e.stat.open,l=>{se||(t(l?"open":"close",e.stat),_t())});const r=_.computed(()=>{const l=[],i=d=>{var u;if(d.parent){let c=(u=d.parent)==null?void 0:u.children.indexOf(d);do{c++;let h=d.parent.children[c];if(h){if(!h.hidden)return!0}else break}while(!0)}return!1},s=e.rtl?"right":"left",f=e.btt?"top":"bottom";let o=e.stat;for(;o;){let d=(o.level-2)*e.indent+e.treeLineOffset;const u=i(o),c=()=>{l.push({style:{[s]:d+"px",[f]:u?0:"50%"}})};o===e.stat?o.level>1&&c():u&&c(),o=o.parent}return l}),a=_.computed(()=>{let l=(e.stat.level-2)*e.indent+e.treeLineOffset;return{[e.rtl?"right":"left"]:l+"px"}});return{indentStyle:n,vLines:r,hLineStyle:a}}});var St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.table?n("tr",{ref:"el",staticClass:"tree-node"},[e._t("default",null,{indentStyle:e.indentStyle})],2):n("div",{ref:"el",staticClass:"tree-node",class:{"tree-node--with-tree-line":e.treeLine},style:e.indentStyle},[e.treeLine?[e._l(e.vLines,function(r){return n("div",{staticClass:"tree-line tree-vline",style:r.style})}),e.stat.level>1?n("div",{staticClass:"tree-line tree-hline",style:e.hLineStyle}):e._e()]:e._e(),n("div",{staticClass:"tree-node-inner"},[e._t("default",null,{indentStyle:e.indentStyle})],2)],2)},wt=[];function me(e,t,n,r,a,l,i,s){var f=typeof e=="function"?e.options:e;t&&(f.render=t,f.staticRenderFns=n,f._compiled=!0);var o;if(a&&(o=a),o)if(f.functional){f._injectStyles=o;var d=f.render;f.render=function(h,p){return o.call(p),d(h,p)}}else{var u=f.beforeCreate;f.beforeCreate=u?[].concat(u,o):[o]}return{exports:e,options:f}}const $e={};var Ct=me(xt,St,wt,!1,Dt);function Dt(e){for(let t in $e)this[t]=$e[t]}const Ae=function(){return Ct.exports}();/*!
 * @he-tree/tree-utils v0.1.0-alpha.5
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const X="children";function Et(e){const n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={...kt,...n,data:e,stats:null,statsFlat:null,_statsMap:null,initialized:!1,init(){const{data:l,childrenKey:i}=this,s=new ge([]);this._statsMap=new Map,K(l,(o,d,u,c)=>{const h=this.statHandler({...Ke(),data:o,open:!!this.defaultOpen,parent:s.getParent(c),children:[],level:c.length});this._statsMap.set(o,h),s.set(c,h)},{childrenKey:i});const f=[];s.walk(o=>{f.push(o)}),this.stats=this.statsHandler(s.rootChildren),this.statsFlat=this.statsFlatHandler(f),this.initialized=!0},getStat(l){let i=this._statsMap.get(l);if(!i)throw new Me("Stat not found");return i},has(l){if(l.isStat)return this.statsFlat.indexOf(l)>-1;try{return!!this.getStat(l)}catch(i){if(i instanceof Me)return!1;throw i}},_getPathByStat(l){if(l==null)return[];const s=this.getSiblings(l).indexOf(l);return[...l.parent?this._getPathByStat(l.parent):[],s]},afterOneCheckChanged(l){const{checked:i}=l;if(l._ignoreCheckedOnce)return delete l._ignoreCheckedOnce,!1;const s=f=>{const{parent:o}=f;if(o){let d,u,c;for(const p of o.children)p.checked?d=!0:p.checked===0?c=!0:u=!0;const h=c?0:u?d?0:!1:!0;o.checked!==h&&(this._ignoreCheckedOnce(o),o.checked=h),s(o)}};return s(l),K(l.children,f=>{f.checked!==i&&(this._ignoreCheckedOnce(f),f.checked=i)},{childrenKey:X}),!0},_ignoreCheckedOnce(l){l._ignoreCheckedOnce=!0,setTimeout(()=>{l._ignoreCheckedOnce&&(l._ignoreCheckedOnce=!1)},100)},isVisible(l){const i=l.isStat?l:this.getStat(l),s=f=>!f||!f.hidden&&f.open&&s(f.parent);return!!(!i.hidden&&s(i.parent))},updateCheck(){K(this.stats,l=>{if(l.children&&l.children.length>0){const i=l.children.every(s=>s.checked);l.checked!==i&&(this._ignoreCheckedOnce(l),l.checked=i)}},{childFirst:!0,childrenKey:X})},getChecked(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.statsFlat.filter(i=>i.checked||l&&i.checked===0)},getUnchecked(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.statsFlat.filter(i=>l?!i.checked:i.checked===!1)},openAll(){for(const l of this.statsFlat)l.open=!0},closeAll(){for(const l of this.statsFlat)l.open=!1},openNodeAndParents(l){const i=l.isStat?l:this.getStat(l);for(const s of this.iterateParent(i,{withSelf:!0}))s.open=!0},_calcFlatIndex(l,i){let s=l?this.statsFlat.indexOf(l)+1:0;const f=l?l.children:this.stats;for(let o=0;o<i;o++)s+=this._count(f[o]);return s},add(l,i,s){if(this.has(l))throw"Can't add because data exists in tree";const f=i?i.children:this.stats;s==null&&(s=f.length);const o=this.statHandler({...Ke(),open:!!this.defaultOpen,data:l,parent:i||null,children:[],level:i?i.level+1:1});this._setPosition(o,i||null,s);const d=l[this.childrenKey];if(d){const u=d.slice();for(const c of u)this.add(c,o)}},remove(l){const i=this.getSiblings(l);if(i.includes(l)){Ee(i,l);const s=this._flat(l);this.statsFlat.splice(this.statsFlat.indexOf(l),s.length);for(const f of s)this._statsMap.delete(f.data);return this.afterRemoveStat(l),!0}return!1},getSiblings(l){const{parent:i}=l;return i?i.children:this.stats},_setPosition(l,i,s){(i?i.children:this.stats).splice(s,0,l),l.parent=i,l.level=i?i.level+1:1;const o=this._calcFlatIndex(i,s),d=this._flat(l);this.statsFlat.splice(o,0,...d);for(const u of d)this._statsMap.has(u.data)||this._statsMap.set(u.data,u);K(l,(u,c,h)=>{h&&(u.level=h.level+1)},{childrenKey:X}),this.afterSetStat(l,i,s)},*iterateParent(l,i){let s=i!=null&&i.withSelf?l:l.parent;for(;s;)yield s,s=s.parent},move(l,i,s){if(this.has(l)){if(l.parent===i&&this.getSiblings(l).indexOf(l)===s)return!1;if(l===i)throw new Error("Can't move node to it self");if(i&&l.level<i.level){let f;for(const o of this.iterateParent(i))if(o.level===l.level){f=o;break}if(l===f)throw new Error("Can't move node to its descendant")}this.remove(l)}return this._setPosition(l,i,s),!0},_flat(l){const i=[];return K(l,s=>{i.push(s)},{childrenKey:X}),i},_count(l){return this._flat(l).length},getData(l,i){const{childrenKey:s}=this,f=new ge([]);return f.childrenKey=s,K(i||this.stats,(o,d,u,c)=>{let h={...o.data,[s]:[]};l&&(h=l(h)),f.set(c,h)},{childrenKey:X}),f.data}},a=r;return r.noInitialization||a.init(),a}const kt={childrenKey:"children",defaultOpen:!1,statsHandler(e){return e},statsFlatHandler(e){return e},afterSetStat(e,t,n){},afterRemoveStat(e){},statHandler(e){return e}};function Ke(){return{isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null}}class Me extends Error{constructor(t){super(t),this.name="StatNotFoundError"}}function Ot(e,t={}){const n={...t,statHandler(r){return this._statHandler2&&(r=this._statHandler2(r)),ye(t.statHandler,_.reactive(r))},statsHandler(r){return ye(t.statsHandler,_.reactive(r))},statsFlatHandler(r){return ye(t.statsFlatHandler,_.reactive(r))}};return Et(e,n)}function ye(e,t){return e?e(t):t}const Nt=_.defineComponent({components:{VirtualList:bt,TreeNode:Ae},props:{value:{required:_.isVue2,type:Array},modelValue:{required:_.isVue3,type:Array},updateBehavior:{type:String,default:"modify"},processor:{type:Object,default:()=>Ot([],{noInitialization:!0})},childrenKey:{type:String,default:"children"},textKey:{type:String,default:"text"},indent:{type:Number,default:20},virtualization:{type:Boolean,default:!1},virtualizationPrerenderCount:{type:Number,default:20},defaultOpen:{type:Boolean,default:!0},statHandler:{type:Function},rtl:{type:Boolean,default:!1},btt:{type:Boolean,default:!1},table:{type:Boolean,default:!1},watermark:{type:Boolean,default:!1},nodeKey:{type:[String,Function],default:"index"},treeLine:{type:Boolean,default:!1},treeLineOffset:{type:Number,default:8}},emits:["update:modelValue","click:node","open:node","close:node","check:node","beforeDragStart","before-drag-start","after-drop","change","enter","leave"],data(){return{stats:[],statsFlat:[],dragNode:null,dragOvering:!1,placeholderData:{},placeholderColspan:1,batchUpdateWaiting:!1,self:this,_ignoreValueChangeOnce:!1}},computed:{valueComputed(){return(_.isVue2?this.value:this.modelValue)||[]},visibleStats(){const{statsFlat:e,isVisible:t}=this;let n=e;return this.btt&&(n=n.slice(),n.reverse()),n.filter(r=>t(r))},rootChildren(){return this.stats}},methods:{_emitValue(e){this.$emit(_.isVue2?"input":"update:modelValue",e)},_updateValue(e){return this.updateBehavior==="disabled"?!1:(e!==this.valueComputed&&(this._ignoreValueChangeOnce=!0),this._emitValue(e),!0)},getStat:be(P("getStat")),has:be(P("has")),updateCheck:P("updateCheck"),getChecked:P("getChecked"),getUnchecked:P("getUnchecked"),openAll:P("openAll"),closeAll:P("closeAll"),openNodeAndParents:P("openNodeAndParents"),isVisible:P("isVisible"),move:Re("move"),add:be(Re("add")),addMulti(e,t,n){this.batchUpdate(()=>{let r=n;for(const a of e)this.add(a,t,r),r!=null&&r++})},remove:P("remove"),removeMulti(e){let t=[...e];this.batchUpdate(()=>{for(const n of t)this.remove(n)})},iterateParent:P("iterateParent"),getSiblings:P("getSiblings"),getData:P("getData"),getRootEl(){return this.$refs.vtlist.listElRef},batchUpdate(e){const t=this.ignoreUpdate(e);return this.batchUpdateWaiting||this._updateValue(this.updateBehavior==="new"?this.getData():this.valueComputed),t},ignoreUpdate(e){const t=this.batchUpdateWaiting;this.batchUpdateWaiting=!0;const n=e();return this.batchUpdateWaiting=t,n}},watch:{processor:{immediate:!0,handler(e){if(e){const t=n=>{if(n){const{childrenKey:r}=this;return n[r]||(n[r]=[]),n[r]}else return this.valueComputed};e._statHandler2=this.statHandler?n=>n.data===this.placeholderData?n:this.statHandler(n):null,e.afterSetStat=(n,r,a)=>{const{childrenKey:l,updateBehavior:i}=this;let s=this.valueComputed;if(i==="new"){if(this.batchUpdateWaiting)return;s=this.getData()}else if(i==="modify"){const f=t(r==null?void 0:r.data);f.includes(n.data)||f.splice(a,0,n.data)}this.batchUpdateWaiting||this._updateValue(s)},e.afterRemoveStat=n=>{var i;const{childrenKey:r,updateBehavior:a}=this;let l=this.valueComputed;if(a==="new"){if(this.batchUpdateWaiting)return;l=this.getData()}else if(a==="modify"){const s=t((i=n.parent)==null?void 0:i.data);Ee(s,n.data)}this.batchUpdateWaiting||this._updateValue(l)}}e.initialized||(e.data=this.valueComputed,Object.assign(e,Ze(this,["childrenKey","defaultOpen"])),e.init(),e.updateCheck()),this.stats=e.stats,this.statsFlat=e.statsFlat,e.data!==this.valueComputed&&this._updateValue(e.data)}},valueComputed:{handler(e){if(this.dragOvering||this.dragNode||this._ignoreValueChangeOnce)this._ignoreValueChangeOnce=!1;else{const{processor:n}=this;n.data=e,n.init(),this.stats=n.stats,this.statsFlat=n.statsFlat}}}},created(){},mounted(){typeof window<"u"&&(this.watermark===!1&&(window._heTreeWatermarkDisabled=!0),this.watermark&&!window._heTreeWatermarkDisabled&&(window._heTreeWatermark||(window._heTreeWatermark=!0,console.log("%c[he-tree] Vue tree component:  https://hetree.phphe.com","color:#0075ff; font-size:14px;"))))}});function P(e){return function(...t){return this.processor[e](...t)}}function Re(e){return function(...t){return this.batchUpdate(()=>this.processor[e](...t))}}function be(e){return function(t,...n){return t&&(t=_.reactive(t)),e.call(this,t,...n)}}var Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VirtualList",{ref:"vtlist",staticClass:"he-tree",class:{"he-tree--rtl rtl":e.rtl,"he-tree--drag-overing drag-overing":e.dragOvering},attrs:{items:e.visibleStats,disabled:!e.virtualization,table:e.table,itemKey:e.nodeKey},scopedSlots:e._u([{key:"prepend",fn:function(){return[e._t("prepend",null,{tree:e.self})]},proxy:!0},{key:"default",fn:function(r){var a=r.item,l=r.index;return[n("TreeNode",{class:[a.class,{"drag-placeholder-wrapper":a.data===e.placeholderData,"dragging-node":a===e.dragNode}],style:a.style,attrs:{"vt-index":l,stat:a,rtl:e.rtl,btt:e.btt,indent:e.indent,table:e.table,treeLine:e.treeLine,treeLineOffset:e.treeLineOffset,processor:e.processor},on:{click:function(i){return e.$emit("click:node",a)},open:function(i){return e.$emit("open:node",i)},close:function(i){return e.$emit("close:node",i)},check:function(i){return e.$emit("check:node",i)}},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.indentStyle;return[a.data===e.placeholderData?[e.table?n("td",{style:s,attrs:{colspan:e.placeholderColspan}},[n("div",{staticClass:"drag-placeholder he-tree-drag-placeholder"},[e._t("placeholder",null,{tree:e.self})],2)]):n("div",{staticClass:"drag-placeholder he-tree-drag-placeholder"},[e._t("placeholder",null,{tree:e.self})],2)]:e._t("default",function(){return[e._v(e._s(a.data[e.textKey])+" ")]},{node:a.data,stat:a,indentStyle:s,tree:e.self})]}}],null,!0)})]}},{key:"append",fn:function(){return[e._t("append",null,{tree:e.self})]},proxy:!0}],null,!0)})},Tt=[];const He={};var Ft=me(Nt,Lt,Tt,!1,Pt);function Pt(e){for(let t in He)this[t]=He[t]}const Ve=function(){return Ft.exports}();/*!
 * drag-event-service v2.0.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const oe={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},_e={isTouch(e){return e.type&&e.type.startsWith("touch")},_getStore(e){return e._wrapperStore||(e._wrapperStore=[]),e._wrapperStore},on(e,t,n,r){const{args:a,mouseArgs:l,touchArgs:i}=Ue(r),s=this._getStore(e),f=this,o=function(d){let u;if(f.isTouch(d))u={x:d.changedTouches[0].pageX,y:d.changedTouches[0].pageY,pageX:d.changedTouches[0].pageX,pageY:d.changedTouches[0].pageY,clientX:d.changedTouches[0].clientX,clientY:d.changedTouches[0].clientY,screenX:d.changedTouches[0].screenX,screenY:d.changedTouches[0].screenY};else if(u={x:d.pageX,y:d.pageY,pageX:d.pageX,pageY:d.pageY,clientX:d.clientX,clientY:d.clientY,screenX:d.screenX,screenY:d.screenY},t==="start"&&d.which!==1)return;return n.call(this,d,u)};s.push({handler:n,wrapper:o}),H.call(null,e,oe[t][0],o,...a,...l),H.call(null,e,oe[t][1],o,...a,...i)},off(e,t,n,r){const{args:a,mouseArgs:l,touchArgs:i}=Ue(r),s=this._getStore(e);for(let f=s.length-1;f>=0;f--){const{handler:o,wrapper:d}=s[f];n===o&&(V.call(null,e,oe[t][0],d,...a,...l),V.call(null,e,oe[t][1],d,...a,...l),s.splice(f,1))}}};function Ue(e){e||(e={});const t=e.args||[],n=e.mouseArgs||[],r=e.touchArgs||[];return{args:t,mouseArgs:n,touchArgs:r}}/*!
 * @he-tree/dnd-utils v0.1.0-alpha.4
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const xe=new Map,z={triggerElement:null,dragElement:null,internal:!1,dropEffect:"none",preventDefault:!1},B=z;function ne(e){e.dataTransfer&&(e.dataTransfer.dropEffect=B.dropEffect)}function Bt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(xe.has(e))throw"Already registered on specified element";const n={...t},r=n;Oe(n,It),_e.on(e,"start",a,{touchArgs:[{passive:!0}]}),_e.on(e,"end",l);function a(u){var c;const h=u.target;h.nodeType===Node.ELEMENT_NODE&&(B.triggerElement=h);const p=h;if(n.ingoreHTMLTags&&p.tagName&&n.ingoreHTMLTags.find(x=>x.toUpperCase()===p.tagName))return;const y=(c=n.beforeDragStart)===null||c===void 0?void 0:c.call(n,u);y&&(y.setAttribute("draggable","true"),B.dragElement=y)}function l(u){B.dragElement&&B.dragElement.removeAttribute("draggable")}function i(u){var c;B.internal=!0,(c=n.onDragStart)===null||c===void 0||c.call(n,u),ne(u)}function s(u){var c;(c=n.onDrag)===null||c===void 0||c.call(n,u),ne(u)}function f(u){var c;(c=n.onDragEnd)===null||c===void 0||c.call(n,u),B.internal=!1,B.dragElement&&B.dragElement.removeAttribute("draggable"),B.triggerElement=null,B.dragElement=null,B.dropEffect="none"}const o=At(e,{onDragLeave(u){var c;(c=n.onDragLeave)===null||c===void 0||c.call(n,u),ne(u)},onDragEnter(u){var c;r.ifPreventDefault(u)&&u.preventDefault(),(c=n.onDragEnter)===null||c===void 0||c.call(n,u),ne(u)},onDragOver(u){var c;r.ifPreventDefault(u)&&u.preventDefault(),(c=n.onDragOver)===null||c===void 0||c.call(n,u),ne(u)},onDrop(u){var c;r.ifPreventDefault(u)&&u.preventDefault(),(c=n.onDrop)===null||c===void 0||c.call(n,u)},onEnter(u){var c;(c=n.onEnter)===null||c===void 0||c.call(n,u)},onLeave(u){var c;(c=n.onLeave)===null||c===void 0||c.call(n,u)}});return H(e,"dragstart",i),H(e,"drag",s),H(e,"dragend",f),Object.assign(n,{root:e,destroy:()=>{_e.off(e,"start",a,{touchArgs:[{passive:!0}]}),V(e,"dragstart",i),V(e,"drag",s),V(e,"dragend",f),o(),xe.delete(e)}}),xe.set(e,r),r}const It={ingoreHTMLTags:["INPUT","TEXTAREA","SELECT","OPTGROUP","OPTION"],ifPreventDefault(e){return z.dragElement?!0:B.preventDefault},beforeDragStart(e){},onDragStart(e){},onDrag(e){},onDragEnter(e){},onDragLeave(e){},onDragOver(e){},onDragEnd(e){},onDrop(e){}};let ce=null;const $t=e=>{ce=e,setTimeout(()=>{ce=null},20)};function At(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e;let r=!1;const a=h=>{var p;r=!0,(p=t.onEnter)===null||p===void 0||p.call(t,h),d.resume()},l=h=>{var p;$t(h.target),(p=t.onDragEnter)===null||p===void 0||p.call(t,h),r||a(h)},i=h=>{var p;r||a(h),(p=t.onDragOver)===null||p===void 0||p.call(t,h)},s=h=>{var p;(p=t.onDragLeave)===null||p===void 0||p.call(t,h);const y=function(){var O;let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h;r=!1,(O=t.onLeave)===null||O===void 0||O.call(t,C),d.stop()},x=ce;ce=null,x&&it(x,n)||y()},f=h=>{var p;(p=t.onDrop)===null||p===void 0||p.call(t,h)},o=h=>{var p;h instanceof KeyboardEvent&&h.key!=="Escape"||(r=!1,d.stop(),(p=t.onEndBeforeLeave)===null||p===void 0||p.call(t,h))},d=at([[e,"drop",o],[window,"mouseup",o],[window,"touchend",o],[window,"keydown",o]]);d.stop();const u=()=>{H(e,"dragenter",l),H(e,"dragover",i),H(e,"dragleave",s),H(e,"drop",f)},c=()=>{V(e,"dragenter",l),V(e,"dragover",i),V(e,"dragleave",s),V(e,"drop",f),d.stop()};return u(),c}let m=null,g=null,de,re,Y,ue,Se,T,we;const ze={get startInfo(){return de},get targetInfo(){return re},get dragNode(){return T},get startTree(){return m},get targetTree(){return g},get closestNode(){return we}},We=_.defineComponent({extends:Ve,props:{triggerClass:{type:[String,Array]},disableDrag:Boolean,disableDrop:Boolean,eachDraggable:{type:Function},eachDroppable:{type:Function},rootDroppable:{type:[Boolean,Function],default:!0},dragOpen:{type:Boolean,default:!0},dragOpenDelay:{type:Number,default:0},beforeDragOpen:{type:Function},resolveStartMovePoint:{type:[String,Function]},keepPlaceholder:{type:Boolean},maxLevel:{type:Number},dragCopy:{type:Boolean},dragCopyDataHandler:{type:Function},onExternalDragOver:{type:Function},externalDataHandler:{type:Function},ondragstart:{type:Function}},data(){return{treeDraggableInstance:null}},computed:{},methods:{getNodeByElement(e){const t=e.getAttribute("vt-index");return t==null?null:this.visibleStats[t]},isDraggable(e){if(this.disableDrag)return!1;if(e.draggable!=null)return e.draggable;if(this.eachDraggable){const n=this.eachDraggable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDraggable(t):!0},isDroppable(e){if(this.disableDrop)return!1;if(!e)return Le(this.rootDroppable,[this,m]);if(e.droppable!=null)return e.droppable;if(this.eachDroppable){const n=this.eachDroppable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDroppable(t):!0},_eachDroppable(){var e;return Le((e=this._isDragCopy)==null?void 0:e.call(this),[this])}},mounted(){const e=(o,d)=>{let u=!0;return m&&m!==this&&(u=u&&this._isMoved),this.table&&!this._isDragCopy&&(u=u&&this._isDragCopy),u&&(o.x!==d.x||o.y!==d.y)},t=(o,d)=>{g.ignoreUpdate(()=>{if(!g.has(g.placeholderData)){if(g.table){let c=0;const h=g.getRootEl().querySelector("tr");if(h)for(const{value:p}of Ge(h.children))ae(p,"display")!=="none"&&(c+=p.colSpan||1);c<1&&(c=1),g.placeholderColspan=c}g.add(g.placeholderData)}const u=g.getStat(g.placeholderData);g.move(u,o,d)})},n=()=>{const o=this;if(o.has(o.placeholderData))return o.remove(o.getStat(o.placeholderData)),!0},r=o=>{o?z.dropEffect=m!=null&&m.dragCopy?"copy":"move":z.dropEffect="none"},a=o=>{const d=this;o?r(!0):d.keepPlaceholder?d.has(d.placeholderData)||r(!1):(n(),r(!1))};let l={x:0,y:0};const i=this.getRootEl();let s=null;const f=()=>{g!=null&&g.has(g.placeholderData)&&g.ignoreUpdate(()=>{g.remove(g.getStat(g.placeholderData)),m&&(m.dragNode.hidden=!1,m.dragOvering=!1)})};this.treeDraggableInstance=Bt(i,{beforeDragStart:o=>{if(!z.triggerElement)return;let d=this.triggerClass;(!d||d.length===0)&&(d="tree-node");let u=Je(d),c=Te(z.triggerElement,h=>{if(Fe(h,u))return!0;if(ie(h,"tree-node"))return"break"},{withSelf:!0,until:i});if(s=Te(c,h=>{if(ie(h,"tree-node"))return!0},{withSelf:!0,until:i}),!!s){if(T=this.getNodeByElement(s),!T)throw"Can't find drag node";if(this.isDraggable(T))return this.$emit("before-drag-start",T),this.$emit("beforeDragStart",T),i}},onDragStart:o=>{var h,p,y;if(!s||!T)return;{const{x,y:O}=s.getBoundingClientRect(),{clientX:C,clientY:A}=o;(h=o.dataTransfer)==null||h.setDragImage(s,C-x,A-O)}Se={x:o.clientX,y:o.clientY},m=this,m.dragNode=T,ue=(()=>{if(this.resolveStartMovePoint==="mouse")return{x:o.clientX,y:o.clientY};if(typeof this.resolveStartMovePoint=="function")return this.resolveStartMovePoint(s);{let x,O=0;if(this.table){let C=s.getBoundingClientRect();x={x:C.x,y:C.y},this.rtl&&(x.x=C.right),O=C.height}else if(!this.rtl)x=s.children[0].getBoundingClientRect().toJSON(),O=x.height;else{const C=s.children[0].getBoundingClientRect();x={x:C.right,y:C.y},O=C.height}return this.btt&&(x.y+=O),x}})(),this.dragOvering=!0;const u=m.getSiblings(m.dragNode),c=u.indexOf(T);de={tree:m,dragNode:T,parent:T.parent,siblings:u,indexBeforeDrop:c},g=this,(p=o.dataTransfer)==null||p.setData("text",`he-tree drag start at ${new Date().toISOString()}`),m._eachDroppable()||setTimeout(()=>{T.hidden=!0,t(T.parent,c+1)},0),(y=this.ondragstart)==null||y.call(this,o)},onEnter:o=>{this.$emit("enter",o)},onLeave:o=>{Y=null,this.dragOvering=!1,z.preventDefault=!1,n(),this.$emit("leave",o)},onDragOver:rt(o=>{if(!m){if(!this.onExternalDragOver||this.onExternalDragOver(o)===!1)return;z.preventDefault=!0}const d={x:o.clientX,y:o.clientY},u=e(d,l);if(l=d,!u)return;this.dragOvering=!0,g=this;const c=ue?{x:ue.x+(d.x-Se.x),y:ue.y+(d.y-Se.y)}:{...d},{btt:h,rtl:p}=g;if(g.disableDrop){z.dropEffect="none";return}let y,x;const O=g.getRootEl().querySelectorAll(".tree-node"),C=[];O.forEach(S=>{!Fe(S,["drag-placeholder-wrapper","dragging-node"])&&ae(S,"display")!=="none"&&C.push(S)});const A=ve(C,S=>pe(S)[h?"bottom":"top"]-c.y,{returnNearestIfNoHit:!0});let D=null,U,G;A.hit||(A.greater?h||(D=A.index-1,C[D]||D++):h&&(D=A.index+1,C[D]||D--)),D==null&&(D=A.index),U=C[D],G=h?C[D-1]:C[D+1],y=U&&g.getNodeByElement(U),x=G&&g.getNodeByElement(G);const{indent:j}=g,I=te(()=>{if(g.table){let S=pe(U).toJSON();const F=j*(y.level-1);return p?(S.width-=F,S.right-=F):S.x+=F,S}else return pe(U.firstElementChild)}).action,Q=te(()=>h?c.y>I().y+I().height/2:c.y<I().y+I().height/2).action,Ce=te(()=>h?!U||D===C.length-1&&Q():!U||D===0&&Q()).action,fe=te(()=>p?c.x-(I().x+I().width):I().x-c.x).action,b=te(()=>p?c.x<I().x+I().width-j:c.x>I().x+j).action;let v;if(Ce())v=1,y=null;else if(y)fe()>0?v=y.level-Math.ceil(fe()/j):b()?v=y.level+1:v=y.level;else return;x&&v<x.level&&(v=x.level),(async()=>{let S,F,$=!1,W=null;const q=async E=>{if(E.open)return!0;if(g.dragOpen)if(g.dragOpenDelay)if(W=E,Y===E)$=!0;else{let L=lt();Y=E;const M=E;return setTimeout(async()=>{M!==Y?($=!0,L.resolve(!0)):(g.beforeDragOpen&&await g.beforeDragOpen(E),M!==Y?($=!0,L.resolve(!0)):(E.open=!0,W=null,L.resolve(!0)))},g.dragOpenDelay),await L.promise}else return g.beforeDragOpen&&await g.beforeDragOpen(E),E.open=!0,!0;else return!1},J=async()=>{if(g.isDroppable(y)&&await q(y)){if($)return;S=y,F=null}else return!1},he=(E=v)=>{let L=y,M=[];for(;L&&L.level>=E;)L=L.parent||null,M.unshift(L);let Z=0;for(const Xe of M){if(g.isDroppable(Xe))return S=Xe,F=M[Z+1]||y,!0;Z++}return!1};we=y||null,y?v>y.level?await J()===!1&&he(y.level):he()===!1&&await J():g.isDroppable(null)&&(S=null),Y=W;const k=!!(!$&&(S||S===null));return{cancelled:$,success:k,parent:S,index:k?F?(S?S.children:g.stats).filter(E=>E.data!==g.placeholderData).indexOf(F)+1:0:-1}})().then(S=>{if(!S.cancelled){if(!S.success){a(!1);return}if(g.maxLevel!=null&&g.maxLevel>0){let F=1;if(m){const W=m.dragNode;let q=0;K(W,J=>{J.level>q&&(q=J.level)},{childrenKey:X}),F=q-W.level+1}if(F+(S.parent?S.parent.level:0)>g.maxLevel){a(!1);return}}a(!0),t(S.parent,S.index)}})}),onDrop:o=>{g=this;const d=!m;if(!g)return;const u=m==null?void 0:m.dragNode;let c,h=(()=>{var y;let p=!0;if(!g.has(g.placeholderData))p=!1;else if(d)c=(y=this.externalDataHandler)==null?void 0:y.call(this,o),p=c!=null;else if(!m.dragCopy){const x=g.getStat(g.placeholderData);m===g&&x.parent===u.parent&&nt(u,O=>O===x)}return p})();if(h){const p=g.getStat(g.placeholderData),y=g.getSiblings(p);re={tree:g,dragNode:u,parent:p.parent,siblings:y,indexBeforeDrop:y.indexOf(p)}}(()=>{if(f(),h){let p=re.indexBeforeDrop;m&&!m.dragCopy&&m===g&&de.parent==re.parent&&de.indexBeforeDrop<p&&p--,m&&m!==g&&!m._eachDroppable()&&m.batchUpdate(()=>{m.remove(u),m.updateCheck()}),g.batchUpdate(()=>{let y=m==null?void 0:m.dragNode,x;c?x=c:m._eachDroppable()&&(x=Ne(m.dragNode.data,{childrenKey:m.childrenKey}),m.dragCopyDataHandler&&(x=m.dragCopyDataHandler(x))),x&&(g.add(x),y=g.getStat(x)),g.move(y,re.parent,p),g.updateCheck()})}g.$emit("after-drop"),h&&(m&&(m.dragCopy||m.$emit("change")),g!==m&&g.$emit("change"))})()},onDragEnd:o=>{f(),m&&(m.dragNode&&(m.dragNode.hidden=!1),m.dragNode=null,m.dragOvering=!1,m=null),g=null,Y=null,T=null,we=null}})},unmounted(){var e;(e=this.treeDraggableInstance)==null||e.destroy()}}),Kt=_.defineComponent({props:{open:{type:Boolean}}});var Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"he-tree__open-icon",class:{open:e.open}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[n("title",[e._v("chevron-right")]),n("path",{attrs:{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}})])])},Rt=[];const je={};var Ht=me(Kt,Mt,Rt,!1,Vt);function Vt(e){for(let t in je)this[t]=je[t]}const Ut=function(){return Ht.exports}();function zt(e,t){try{return{mixins:[We],created:new Function(Wt(e,t))()}}catch{throw new Error("he-tree-pro: wrong secret key")}}function Wt(e,t){e=encodeURIComponent(e),e.length%2===1&&(e+="h"),e=e.split("").reverse().join(""),t=atob(t);for(let n=0;n<e.length;n+=2){const r=e[n],a=e[n+1];t=jt(t,r,a)}return Xt("arb=inowc=ocmet;etrnfucton){are=1,=tistr{evod !=b}ath(){e&(c_htreWtemak=)=e,._sMve=(=>._eteeatrmrkd.israCoy=)=d.abe,._acDrppbl=(=>.dagop)}",t)}function jt(e,t,n){let r="";for(let a=0;a<e.length;a++){const l=e[a];l===t?r+=n:l===n?r+=t:r+=l}return r}function Xt(e,t){let n=0,r="";for(;;){let a;if(a=n,a>=t.length||(r+=t[a],a=n*2,a>=e.length)||(r+=e[a],a+=1,a>=e.length))break;r+=e[a],n++}return r}return R.BaseTree=Ve,R.Draggable=We,R.OpenIcon=Ut,R.TreeNode=Ae,R.context=ze,R.dragContext=ze,R.pro=zt,R.walkTreeData=K,Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),R}({},VueDemi);
//# sourceMappingURL=index.iife.js.map
