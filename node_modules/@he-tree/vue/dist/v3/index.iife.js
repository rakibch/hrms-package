var heTreeVue=function(R,k,f){"use strict";/*!
 * @he-tree/vue v2.9.3
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://hetree.phphe.com/
 * Released under the MIT License.
 */function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}/*!
 * helper-js v3.1.2
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */function ie(e){return Object.prototype.toString.call(e)==="[object Array]"}function xe(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ue(e){return typeof e=="function"}function We(e,t){return e<t?e:t}function Oe(e,t){let n,r=0;for(;(n=e.indexOf(t))>-1;)e.splice(n,1),r++;return r}function Ne(e){return e[e.length-1]}function je(e){return ie(e)?e:[e]}function Xe(e,t){let n=new Set(t);const r={};return n.forEach(o=>{r[o]=e[o]}),r}function*Ye(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.reverse)if(e.length!=null)for(let n=e.length-1;n>=0;n--){const r={value:e[n],index:n};(!t.exclude||!t.exclude(r))&&(yield r)}else if(xe(e)){const n=Object.keys(e);n.reverse();for(const r of n){const o={value:e[r],key:r};(!t.exclude||!t.exclude(o))&&(yield o)}}else throw"Unsupported type";else if(e.length!=null)for(let n=0;n<e.length;n++){const r={value:e[n],index:n};(!t.exclude||!t.exclude(r))&&(yield r)}else if(xe(e))for(const n of Object.keys(e)){const r={value:e[n],key:n};(!t.exclude||!t.exclude(r))&&(yield r)}else throw"Unsupported type"}function qe(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}function _e(e,t){return Object.keys(t).forEach(n=>{qe(e,n,t[n])}),e}function Ze(e){const t={};return Object.keys(e).forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t}function V(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=_e({...n},{childrenKey:"children"});const{childrenKey:r}=n,o=ie(e)?e:[e];class l{}const a=(i,h,s)=>{n.reverse&&(i=i.slice(),i.reverse());const d=i.length;for(let u=0;u<d;u++){const c=i[u],p=n.reverse?d-u-1:u,m=s?[...s,p]:[];n.childFirst&&c[r]!=null&&a(c[r],c,m);const v=t(c,p,h,m);if(v===!1)throw new l;if(v==="skip children")continue;if(v==="skip siblings")break;n.childFirst||c[r]!=null&&a(c[r],c,m)}};try{a(o,null,ie(e)?[]:null)}catch(i){if(!(i instanceof l))throw i}}function Je(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r;return V(e,function(){if(t(...arguments))return r={node:arguments.length<=0?void 0:arguments[0],index:arguments.length<=1?void 0:arguments[1],parent:arguments.length<=2?void 0:arguments[2],path:arguments.length<=3?void 0:arguments[3]},!1},n),r}function Ge(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Je(e,t,n);return r==null?void 0:r.node}function Be(e,t){const n={childrenKey:"children"};t&&Object.assign(n,t);const{childrenKey:r,nodeHandler:o}=n,l=new pe;return l.childrenKey=r,V(e,(a,i,h,s)=>{let d=Object.assign({},a);d[r]&&(d[r]=[]),o&&(d=o(d,{oldNode:a,index:i,parent:h,path:s})),l.set(s,d)},{childrenKey:r}),l.data}class pe{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];te(this,"data",void 0),te(this,"childrenKey","children"),this.data=t}get rootChildren(){const{childrenKey:t}=this,{data:n}=this;return ie(n)?n:n[t]}*iteratePath(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{childrenKey:r,rootChildren:o}=this;if(n.reverse){const l=[...this.iteratePath(t,{...n,reverse:!1})];l.reverse();for(const{path:a,node:i}of l)yield{path:a,node:i}}else{let l=[],a=o;for(const i of t){const h=[...l,i],s=a[i];yield{path:h,node:s},l=h,a=s[r]}}}getFamily(t){const n=[];for(const{node:r}of this.iteratePath(t))n.push(r);return n}get(t){return Ne(this.getFamily(t))}getParentAndIndex(t){const n=t.slice(),r=n.pop();return{parent:this.get(n),index:r,parentPath:n}}getParent(t){return this.getParentAndIndex(t).parent}set(t,n){if(t==null||t.length===0)this.data=n;else{const{childrenKey:r}=this;let{rootChildren:o}=this;const{parent:l,index:a}=this.getParentAndIndex(t);let i;t.length===1?(o||(this.data?this.data[r]=[]:this.data=[]),i=o):(l[r]||(l[r]=[]),i=l[r]),i[a]=n}}delete(t){const{childrenKey:n,rootChildren:r}=this,{parent:o,index:l}=this.getParentAndIndex(t),a=t.length===1?r:o[n],i=a[l];return a.splice(l,1),i}walk(t,n){const{childrenKey:r,data:o}=this;return V(o,t,r,n)}clone(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Be(this.data),Ze({childrenKey:this.childrenKey,nodeHandler:t.nodeHandler||void 0})}}function Le(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ue(e)?e(...t):e}function Qe(e,t){return function(){let r,o;try{r=e(...arguments)}catch(l){o=l}finally{}if(o)throw o;return r}}function ne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[];let r;const o={};let l=o;return{action:function(){for(var h=arguments.length,s=new Array(h),d=0;d<h;d++)s[d]=arguments[d];if(s.length===0)return l===o&&(l=e()),l;if(r||(r=new rt),!r.has(s)&&(r.set(s,e(...s)),t.capacity!=null)){n.push(s);const u=n.splice(0,n.length-t.capacity);for(const c of u)r.delete(c)}return r.get(s)},clearCache:()=>{r=null,n.splice(0,n.length)}}}function et(){let e,t;return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}}function tt(e,t){for(;;){if(e.parentNode==null)return!1;if(e.parentNode===t)return!0;e=e.parentNode}}function me(e){let t=e.getBoundingClientRect();if(document.documentElement.clientTop>0){const n=t.top-document.documentElement.clientTop,r=t.bottom,o=t.left-document.documentElement.clientLeft,l=t.right,a=t.width||l-o,i=t.height||r-n,d={top:n,right:l,bottom:r,left:o,width:a,height:i,x:o,y:n};t={...d,toJSON:()=>d}}return t}function Te(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n&&n.withSelf?e:e.parentElement;for(;r;){const o=n.until&&r===n.until;if(o&&!n.withUntil)return;const l=t(r);if(l==="break")return;if(l)return r;if(o)return;r=r.parentElement}}function ae(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function $e(e,t){for(const n of t)if(ae(e,n))return!0;return!1}function z(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),n,r)}function H(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on".concat(t),n,r)}function nt(e){let t=[];const o={listening:!1,stop:()=>{if(o.listening){for(const l of t)l();t=[],o.listening=!1}},resume:()=>{if(!o.listening){for(const l of e){z.apply(this,l);const a=()=>H.apply(this,l);t.push(a)}o.listening=!0}}};return o}function oe(e,t){return getComputedStyle(e)[t]}function ye(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n={start:0,end:e.length-1,maxTimes:1e3,...n};let{start:r,end:o}=n;const{returnNearestIfNoHit:l,maxTimes:a}=n;let i,h;r==null&&(r=0,o=e.length-1);let s=0,d;for(;r>=0&&r<=o;){if(s>=a)throw Error("binarySearch: loop times is over ".concat(a,", you can increase the limit."));i=Math.floor((o-r)/2+r),h=e[i];const u=s+1;if(d=t(h,i,u),d>0)o=i-1;else if(d<0)r=i+1;else return{index:i,value:h,count:u,hit:!0};s++}return l?{index:i,value:h,count:s+1,hit:!1,greater:d>0}:null}class rt{constructor(){te(this,"_map",new Map),te(this,"_values",{}),te(this,"_objCount",0)}_keysToString(t){const{_map:n}=this;let r=[];for(const o of t){if(!n.has(o))return null;r.push(n.get(o)[0])}return r.toString()}has(t){return this._keysToString(t)!=null}get(t){const{_values:n}=this,r=this._keysToString(t);if(r==null)throw"Value not found by specified keys";return n[r][1]}set(t,n){const{_map:r,_values:o}=this;let l=[];for(const a of t){let i,h=1;r.has(a)?([i,h]=r.get(a),h++):(this._objCount++,i=this._objCount.toString()),r.set(a,[i,h]),l.push(i)}o[l.toString()]=[t.slice(),n]}delete(t){const{_values:n,_map:r}=this,o=this._keysToString(t);if(o==null)throw"Value not found by specified keys";delete n[o];for(const l of t){let[a,i]=r.get(l);i--,i===0?r.delete(l):r.set(l,[a,i])}}clear(){this._map.clear(),this._values={}}*entries(){const{_values:t}=this;for(const n in t){const[r,o]=t[n];yield[r,o]}}count(){return[...this.entries()].length}}/*!
 * @virtual-list/vue
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://virtual-list.phphe.com
 * Released under the MIT License.
 */const lt=k.defineComponent({props:{table:Boolean}}),Fe=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},it={key:0},at={key:1};function ot(e,t,n,r,o,l){return e.table?(f.openBlock(),f.createElementBlock("table",it,[f.renderSlot(e.$slots,"prepend"),f.createElementVNode("tbody",null,[f.renderSlot(e.$slots,"default")]),f.renderSlot(e.$slots,"append")])):(f.openBlock(),f.createElementBlock("div",at,[f.renderSlot(e.$slots,"prepend"),f.renderSlot(e.$slots,"default"),f.renderSlot(e.$slots,"append")]))}const st=Fe(lt,[["render",ot]]),dt=k.defineComponent({components:{VirtualListTable:st},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const t=k.ref(0),n=k.ref(e.firstRender-1),r=k.computed(()=>{var S;return We(n.value,(((S=e.items)==null?void 0:S.length)||1)-1)}),o=k.ref(0),l=k.computed(()=>c.value[t.value]?ee(t.value):0),a=k.computed(()=>c.value.length>0?ee(c.value.length-1)+Ne(u.value):0),i=k.computed(()=>c.value[r.value]?a.value-ee(r.value)-u.value[r.value]:0),h=k.computed(()=>e.disabled?{}:{overflow:"auto"}),s=k.computed(()=>{const S={display:"flex"};return e.disabled||(e.horizontal?Object.assign(S,{"margin-left":l.value+"px","margin-right":i.value+"px",width:a.value-i.value-l.value+"px"}):Object.assign(S,{"margin-top":l.value+"px","margin-bottom":i.value+"px"})),S["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete S.display,delete S["flex-direction"]),S}),d=k.computed(()=>k.reactive((e.items||[]).map(()=>null))),u=k.computed(()=>(e.items||[]).map((S,y)=>{var E;if(d[y]!=null)return d[y];let C=(E=e.itemSize)==null?void 0:E.call(e,S,y);return C==null&&(C=o.value),C})),c=k.computed(()=>{const S=[];return u.value.reduce((y,E)=>(S.push(y),y+E),0),S});k.watch(()=>e.items,x);const p=k.computed(()=>{if(!e.items||e.disabled)return;const S=[];for(let y=t.value;y<=r.value;y++){const E=e.items[y];if(!E)break;S.push({item:E,index:y})}return S}),m=k.ref(),v=k.ref();k.onMounted(async()=>{x();try{De()}catch{await k.nextTick(),x()}});let w;function _(){const S=m.value;if(!S)return;const y=X(S);w!=null&&e.buffer-Math.abs(y-w)>=10||(w=y,x())}let D=!1,K=!1;async function x(){var S;if(D){K=!0;return}if(!e.items||e.disabled)return;D=!0;const y=m.value,E=(S=v.value)==null?void 0:S.$el;if(!y||!E)return;o.value||(o.value=ge()),t.value=Z(),n.value=J(),await k.nextTick();let C,$=0;const A={},j=e.table?E.querySelector("tbody").children:E.children;for(let N=0;N<j.length;N++){const B=j[N],O=oe(B,"position");if(O&&["absolute","fixed"].includes(O))continue;const L=oe(B,"display")!=="none"?Q(B):0,M=B.getAttribute("vt-index"),G=M?parseInt(M):t.value+$;A[G]=(A[G]||0)+L,$++}for(const N of Object.keys(A)){const B=parseInt(N);d.value[B]!==A[B]&&(d.value[B]=A[B],C=!0)}C&&await k.nextTick(),D=!1,K&&(K=!1,x());function Z(){const N=X(y)-I(y)-e.buffer;return ye(c.value,B=>B-N,{returnNearestIfNoHit:!0}).index}function J(){const N=X(y)-I(y)+U(y)+e.buffer;return ye(c.value,B=>B-N,{returnNearestIfNoHit:!0}).index}function ge(){const N=[],B=e.table?E.querySelector("tbody").children:E.children;for(let O=0;O<B.length;O++){const L=B[O],M=getComputedStyle(L);if(["absolute","fixed"].includes(M.position))continue;const G=Q(L);if(N.push(G),N.length>=10)break}return N.length===0?0:N.reduce((O,L)=>O+L,0)/N.length}}function U(S){const y=getComputedStyle(S);let E=parseFloat(e.horizontal?y.width:y.height);return y.boxSizing==="border-box"&&(e.horizontal?E=E-parseFloat(y.borderLeftWidth)-parseFloat(y.borderRightWidth):E=E-parseFloat(y.borderTopWidth)-parseFloat(y.borderBottomWidth)),E}function Q(S){let y=U(S);const E=getComputedStyle(S);return e.horizontal?y+=parseFloat(E.borderLeftWidth)+parseFloat(E.borderRightWidth)+parseFloat(E.marginLeft)+parseFloat(E.marginRight):y+=parseFloat(E.borderTopWidth)+parseFloat(E.borderBottomWidth)+parseFloat(E.marginTop)+parseFloat(E.marginBottom),y=Number.isNaN(y)?0:y,y}function X(S){return e.horizontal?S.scrollLeft:S.scrollTop}function I(S){const y=getComputedStyle(S);return e.horizontal?parseFloat(y.paddingLeft):parseFloat(y.paddingTop)}function ee(S){return c.value[S]}function De(){const S=m.value;new ResizeObserver(y=>{for(let E of y)if(ae(E.target,"vtlist")){x();break}}).observe(S)}function he(S,y){if(e.itemKey){if(typeof e.itemKey=="string"&&e.itemKey==="index")return y;if(typeof e.itemKey=="function")return e.itemKey(S,y)}}return{listElRef:m,listInnerRef:v,onscroll:_,listStyle:h,listInnerStyle:s,visibleItemsInfo:p,getItemKey:he,update:x,sizes:u,positions:c,runtimeSizes:d}}});function ct(e,t,n,r,o,l){const a=f.resolveComponent("VirtualListTable");return f.openBlock(),f.createElementBlock("div",{class:"vtlist",ref:"listElRef",style:f.normalizeStyle(e.listStyle),onScrollPassive:t[0]||(t[0]=(...i)=>e.onscroll&&e.onscroll(...i))},[f.createVNode(a,{class:"vtlist-inner",ref:"listInnerRef",style:f.normalizeStyle(e.listInnerStyle),table:e.table},{prepend:f.withCtx(()=>[f.renderSlot(e.$slots,"prepend")]),append:f.withCtx(()=>[f.renderSlot(e.$slots,"append")]),default:f.withCtx(()=>[e.disabled?(f.openBlock(!0),f.createElementBlock(f.Fragment,{key:0},f.renderList(e.items,(i,h)=>f.renderSlot(e.$slots,"default",{key:e.getItemKey(i,h),item:i,index:h})),128)):(f.openBlock(!0),f.createElementBlock(f.Fragment,{key:1},f.renderList(e.visibleItemsInfo,({item:i,index:h})=>f.renderSlot(e.$slots,"default",{key:e.getItemKey(i,h),item:i,index:h})),128))]),_:3},8,["style","table"])],36)}const ut=Fe(dt,[["render",ct]]);let se=!1;const ft=()=>{se=!0,setTimeout(()=>{se=!1},100)},ht=k.defineComponent({props:["stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor"],emits:["open","close","check"],setup(e,{emit:t}){const n=k.computed(()=>({[e.rtl?"paddingRight":"paddingLeft"]:e.indent*(e.stat.level-1)+"px"}));k.watch(()=>e.stat.checked,l=>{se||e.processor.afterOneCheckChanged(e.stat)&&t("check",e.stat)}),k.watch(()=>e.stat.open,l=>{se||(t(l?"open":"close",e.stat),ft())});const r=k.computed(()=>{const l=[],a=d=>{var u;if(d.parent){let c=(u=d.parent)==null?void 0:u.children.indexOf(d);do{c++;let p=d.parent.children[c];if(p){if(!p.hidden)return!0}else break}while(!0)}return!1},i=e.rtl?"right":"left",h=e.btt?"top":"bottom";let s=e.stat;for(;s;){let d=(s.level-2)*e.indent+e.treeLineOffset;const u=a(s),c=()=>{l.push({style:{[i]:d+"px",[h]:u?0:"50%"}})};s===e.stat?s.level>1&&c():u&&c(),s=s.parent}return l}),o=k.computed(()=>{let l=(e.stat.level-2)*e.indent+e.treeLineOffset;return{[e.rtl?"right":"left"]:l+"px"}});return{indentStyle:n,vLines:r,hLineStyle:o}}}),be=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},gt={class:"tree-node-inner"},pt={key:1,class:"tree-node",ref:"el"};function mt(e,t,n,r,o,l){return e.table?(f.openBlock(),f.createElementBlock("tr",pt,[f.renderSlot(e.$slots,"default",{indentStyle:e.indentStyle})],512)):(f.openBlock(),f.createElementBlock("div",{key:0,class:f.normalizeClass(["tree-node",{"tree-node--with-tree-line":e.treeLine}]),style:f.normalizeStyle(e.indentStyle),ref:"el"},[e.treeLine?(f.openBlock(),f.createElementBlock(f.Fragment,{key:0},[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(e.vLines,a=>(f.openBlock(),f.createElementBlock("div",{class:"tree-line tree-vline",style:f.normalizeStyle(a.style)},null,4))),256)),e.stat.level>1?(f.openBlock(),f.createElementBlock("div",{key:0,class:"tree-line tree-hline",style:f.normalizeStyle(e.hLineStyle)},null,4)):f.createCommentVNode("",!0)],64)):f.createCommentVNode("",!0),f.createElementVNode("div",gt,[f.renderSlot(e.$slots,"default",{indentStyle:e.indentStyle})])],6))}const Pe=be(ht,[["render",mt]]);/*!
 * @he-tree/tree-utils v0.1.0-alpha.5
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const Y="children";function yt(e){const n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={...bt,...n,data:e,stats:null,statsFlat:null,_statsMap:null,initialized:!1,init(){const{data:l,childrenKey:a}=this,i=new pe([]);this._statsMap=new Map,V(l,(s,d,u,c)=>{const p=this.statHandler({...Ie(),data:s,open:!!this.defaultOpen,parent:i.getParent(c),children:[],level:c.length});this._statsMap.set(s,p),i.set(c,p)},{childrenKey:a});const h=[];i.walk(s=>{h.push(s)}),this.stats=this.statsHandler(i.rootChildren),this.statsFlat=this.statsFlatHandler(h),this.initialized=!0},getStat(l){let a=this._statsMap.get(l);if(!a)throw new Ae("Stat not found");return a},has(l){if(l.isStat)return this.statsFlat.indexOf(l)>-1;try{return!!this.getStat(l)}catch(a){if(a instanceof Ae)return!1;throw a}},_getPathByStat(l){if(l==null)return[];const i=this.getSiblings(l).indexOf(l);return[...l.parent?this._getPathByStat(l.parent):[],i]},afterOneCheckChanged(l){const{checked:a}=l;if(l._ignoreCheckedOnce)return delete l._ignoreCheckedOnce,!1;const i=h=>{const{parent:s}=h;if(s){let d,u,c;for(const m of s.children)m.checked?d=!0:m.checked===0?c=!0:u=!0;const p=c?0:u?d?0:!1:!0;s.checked!==p&&(this._ignoreCheckedOnce(s),s.checked=p),i(s)}};return i(l),V(l.children,h=>{h.checked!==a&&(this._ignoreCheckedOnce(h),h.checked=a)},{childrenKey:Y}),!0},_ignoreCheckedOnce(l){l._ignoreCheckedOnce=!0,setTimeout(()=>{l._ignoreCheckedOnce&&(l._ignoreCheckedOnce=!1)},100)},isVisible(l){const a=l.isStat?l:this.getStat(l),i=h=>!h||!h.hidden&&h.open&&i(h.parent);return!!(!a.hidden&&i(a.parent))},updateCheck(){V(this.stats,l=>{if(l.children&&l.children.length>0){const a=l.children.every(i=>i.checked);l.checked!==a&&(this._ignoreCheckedOnce(l),l.checked=a)}},{childFirst:!0,childrenKey:Y})},getChecked(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.statsFlat.filter(a=>a.checked||l&&a.checked===0)},getUnchecked(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.statsFlat.filter(a=>l?!a.checked:a.checked===!1)},openAll(){for(const l of this.statsFlat)l.open=!0},closeAll(){for(const l of this.statsFlat)l.open=!1},openNodeAndParents(l){const a=l.isStat?l:this.getStat(l);for(const i of this.iterateParent(a,{withSelf:!0}))i.open=!0},_calcFlatIndex(l,a){let i=l?this.statsFlat.indexOf(l)+1:0;const h=l?l.children:this.stats;for(let s=0;s<a;s++)i+=this._count(h[s]);return i},add(l,a,i){if(this.has(l))throw"Can't add because data exists in tree";const h=a?a.children:this.stats;i==null&&(i=h.length);const s=this.statHandler({...Ie(),open:!!this.defaultOpen,data:l,parent:a||null,children:[],level:a?a.level+1:1});this._setPosition(s,a||null,i);const d=l[this.childrenKey];if(d){const u=d.slice();for(const c of u)this.add(c,s)}},remove(l){const a=this.getSiblings(l);if(a.includes(l)){Oe(a,l);const i=this._flat(l);this.statsFlat.splice(this.statsFlat.indexOf(l),i.length);for(const h of i)this._statsMap.delete(h.data);return this.afterRemoveStat(l),!0}return!1},getSiblings(l){const{parent:a}=l;return a?a.children:this.stats},_setPosition(l,a,i){(a?a.children:this.stats).splice(i,0,l),l.parent=a,l.level=a?a.level+1:1;const s=this._calcFlatIndex(a,i),d=this._flat(l);this.statsFlat.splice(s,0,...d);for(const u of d)this._statsMap.has(u.data)||this._statsMap.set(u.data,u);V(l,(u,c,p)=>{p&&(u.level=p.level+1)},{childrenKey:Y}),this.afterSetStat(l,a,i)},*iterateParent(l,a){let i=a!=null&&a.withSelf?l:l.parent;for(;i;)yield i,i=i.parent},move(l,a,i){if(this.has(l)){if(l.parent===a&&this.getSiblings(l).indexOf(l)===i)return!1;if(l===a)throw new Error("Can't move node to it self");if(a&&l.level<a.level){let h;for(const s of this.iterateParent(a))if(s.level===l.level){h=s;break}if(l===h)throw new Error("Can't move node to its descendant")}this.remove(l)}return this._setPosition(l,a,i),!0},_flat(l){const a=[];return V(l,i=>{a.push(i)},{childrenKey:Y}),a},_count(l){return this._flat(l).length},getData(l,a){const{childrenKey:i}=this,h=new pe([]);return h.childrenKey=i,V(a||this.stats,(s,d,u,c)=>{let p={...s.data,[i]:[]};l&&(p=l(p)),h.set(c,p)},{childrenKey:Y}),h.data}},o=r;return r.noInitialization||o.init(),o}const bt={childrenKey:"children",defaultOpen:!1,statsHandler(e){return e},statsFlatHandler(e){return e},afterSetStat(e,t,n){},afterRemoveStat(e){},statHandler(e){return e}};function Ie(){return{isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null}}class Ae extends Error{constructor(t){super(t),this.name="StatNotFoundError"}}function vt(e,t={}){const n={...t,statHandler(r){return this._statHandler2&&(r=this._statHandler2(r)),ve(t.statHandler,k.reactive(r))},statsHandler(r){return ve(t.statsHandler,k.reactive(r))},statsFlatHandler(r){return ve(t.statsFlatHandler,k.reactive(r))}};return yt(e,n)}function ve(e,t){return e?e(t):t}const St=k.defineComponent({components:{VirtualList:ut,TreeNode:Pe},props:{value:{required:k.isVue2,type:Array},modelValue:{required:k.isVue3,type:Array},updateBehavior:{type:String,default:"modify"},processor:{type:Object,default:()=>vt([],{noInitialization:!0})},childrenKey:{type:String,default:"children"},textKey:{type:String,default:"text"},indent:{type:Number,default:20},virtualization:{type:Boolean,default:!1},virtualizationPrerenderCount:{type:Number,default:20},defaultOpen:{type:Boolean,default:!0},statHandler:{type:Function},rtl:{type:Boolean,default:!1},btt:{type:Boolean,default:!1},table:{type:Boolean,default:!1},watermark:{type:Boolean,default:!1},nodeKey:{type:[String,Function],default:"index"},treeLine:{type:Boolean,default:!1},treeLineOffset:{type:Number,default:8}},emits:["update:modelValue","click:node","open:node","close:node","check:node","beforeDragStart","before-drag-start","after-drop","change","enter","leave"],data(){return{stats:[],statsFlat:[],dragNode:null,dragOvering:!1,placeholderData:{},placeholderColspan:1,batchUpdateWaiting:!1,self:this,_ignoreValueChangeOnce:!1}},computed:{valueComputed(){return(k.isVue2?this.value:this.modelValue)||[]},visibleStats(){const{statsFlat:e,isVisible:t}=this;let n=e;return this.btt&&(n=n.slice(),n.reverse()),n.filter(r=>t(r))},rootChildren(){return this.stats}},methods:{_emitValue(e){this.$emit(k.isVue2?"input":"update:modelValue",e)},_updateValue(e){return this.updateBehavior==="disabled"?!1:(e!==this.valueComputed&&(this._ignoreValueChangeOnce=!0),this._emitValue(e),!0)},getStat:Se(F("getStat")),has:Se(F("has")),updateCheck:F("updateCheck"),getChecked:F("getChecked"),getUnchecked:F("getUnchecked"),openAll:F("openAll"),closeAll:F("closeAll"),openNodeAndParents:F("openNodeAndParents"),isVisible:F("isVisible"),move:Ke("move"),add:Se(Ke("add")),addMulti(e,t,n){this.batchUpdate(()=>{let r=n;for(const o of e)this.add(o,t,r),r!=null&&r++})},remove:F("remove"),removeMulti(e){let t=[...e];this.batchUpdate(()=>{for(const n of t)this.remove(n)})},iterateParent:F("iterateParent"),getSiblings:F("getSiblings"),getData:F("getData"),getRootEl(){return this.$refs.vtlist.listElRef},batchUpdate(e){const t=this.ignoreUpdate(e);return this.batchUpdateWaiting||this._updateValue(this.updateBehavior==="new"?this.getData():this.valueComputed),t},ignoreUpdate(e){const t=this.batchUpdateWaiting;this.batchUpdateWaiting=!0;const n=e();return this.batchUpdateWaiting=t,n}},watch:{processor:{immediate:!0,handler(e){if(e){const t=n=>{if(n){const{childrenKey:r}=this;return n[r]||(n[r]=[]),n[r]}else return this.valueComputed};e._statHandler2=this.statHandler?n=>n.data===this.placeholderData?n:this.statHandler(n):null,e.afterSetStat=(n,r,o)=>{const{childrenKey:l,updateBehavior:a}=this;let i=this.valueComputed;if(a==="new"){if(this.batchUpdateWaiting)return;i=this.getData()}else if(a==="modify"){const h=t(r==null?void 0:r.data);h.includes(n.data)||h.splice(o,0,n.data)}this.batchUpdateWaiting||this._updateValue(i)},e.afterRemoveStat=n=>{var a;const{childrenKey:r,updateBehavior:o}=this;let l=this.valueComputed;if(o==="new"){if(this.batchUpdateWaiting)return;l=this.getData()}else if(o==="modify"){const i=t((a=n.parent)==null?void 0:a.data);Oe(i,n.data)}this.batchUpdateWaiting||this._updateValue(l)}}e.initialized||(e.data=this.valueComputed,Object.assign(e,Xe(this,["childrenKey","defaultOpen"])),e.init(),e.updateCheck()),this.stats=e.stats,this.statsFlat=e.statsFlat,e.data!==this.valueComputed&&this._updateValue(e.data)}},valueComputed:{handler(e){if(this.dragOvering||this.dragNode||this._ignoreValueChangeOnce)this._ignoreValueChangeOnce=!1;else{const{processor:n}=this;n.data=e,n.init(),this.stats=n.stats,this.statsFlat=n.statsFlat}}}},created(){},mounted(){typeof window<"u"&&(this.watermark===!1&&(window._heTreeWatermarkDisabled=!0),this.watermark&&!window._heTreeWatermarkDisabled&&(window._heTreeWatermark||(window._heTreeWatermark=!0,console.log("%c[he-tree] Vue tree component:  https://hetree.phphe.com","color:#0075ff; font-size:14px;"))))}});function F(e){return function(...t){return this.processor[e](...t)}}function Ke(e){return function(...t){return this.batchUpdate(()=>this.processor[e](...t))}}function Se(e){return function(t,...n){return t&&(t=k.reactive(t)),e.call(this,t,...n)}}const kt={key:0,class:"drag-placeholder he-tree-drag-placeholder"},wt=["colspan"],Ct={class:"drag-placeholder he-tree-drag-placeholder"};function Et(e,t,n,r,o,l){const a=f.resolveComponent("TreeNode"),i=f.resolveComponent("VirtualList");return f.openBlock(),f.createBlock(i,{class:f.normalizeClass(["he-tree",{"he-tree--rtl rtl":e.rtl,"he-tree--drag-overing drag-overing":e.dragOvering}]),ref:"vtlist",items:e.visibleStats,disabled:!e.virtualization,table:e.table,itemKey:e.nodeKey},{prepend:f.withCtx(()=>[f.renderSlot(e.$slots,"prepend",{tree:e.self})]),default:f.withCtx(({item:h,index:s})=>[f.createVNode(a,{"vt-index":s,class:f.normalizeClass([h.class,{"drag-placeholder-wrapper":h.data===e.placeholderData,"dragging-node":h===e.dragNode}]),style:f.normalizeStyle(h.style),stat:h,rtl:e.rtl,btt:e.btt,indent:e.indent,table:e.table,treeLine:e.treeLine,treeLineOffset:e.treeLineOffset,processor:e.processor,onClick:d=>e.$emit("click:node",h),onOpen:t[0]||(t[0]=d=>e.$emit("open:node",d)),onClose:t[1]||(t[1]=d=>e.$emit("close:node",d)),onCheck:t[2]||(t[2]=d=>e.$emit("check:node",d))},{default:f.withCtx(({indentStyle:d})=>[h.data===e.placeholderData?(f.openBlock(),f.createElementBlock(f.Fragment,{key:0},[e.table?(f.openBlock(),f.createElementBlock("td",{key:1,style:f.normalizeStyle(d),colspan:e.placeholderColspan},[f.createElementVNode("div",Ct,[f.renderSlot(e.$slots,"placeholder",{tree:e.self})])],12,wt)):(f.openBlock(),f.createElementBlock("div",kt,[f.renderSlot(e.$slots,"placeholder",{tree:e.self})]))],64)):f.renderSlot(e.$slots,"default",{key:1,node:h.data,stat:h,indentStyle:d,tree:e.self},()=>[f.createTextVNode(f.toDisplayString(h.data[e.textKey]),1)])]),_:2},1032,["vt-index","class","style","stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor","onClick"])]),append:f.withCtx(()=>[f.renderSlot(e.$slots,"append",{tree:e.self})]),_:3},8,["class","items","disabled","table","itemKey"])}const Ve=be(St,[["render",Et]]);/*!
 * drag-event-service v2.0.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const de={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},ke={isTouch(e){return e.type&&e.type.startsWith("touch")},_getStore(e){return e._wrapperStore||(e._wrapperStore=[]),e._wrapperStore},on(e,t,n,r){const{args:o,mouseArgs:l,touchArgs:a}=Me(r),i=this._getStore(e),h=this,s=function(d){let u;if(h.isTouch(d))u={x:d.changedTouches[0].pageX,y:d.changedTouches[0].pageY,pageX:d.changedTouches[0].pageX,pageY:d.changedTouches[0].pageY,clientX:d.changedTouches[0].clientX,clientY:d.changedTouches[0].clientY,screenX:d.changedTouches[0].screenX,screenY:d.changedTouches[0].screenY};else if(u={x:d.pageX,y:d.pageY,pageX:d.pageX,pageY:d.pageY,clientX:d.clientX,clientY:d.clientY,screenX:d.screenX,screenY:d.screenY},t==="start"&&d.which!==1)return;return n.call(this,d,u)};i.push({handler:n,wrapper:s}),z.call(null,e,de[t][0],s,...o,...l),z.call(null,e,de[t][1],s,...o,...a)},off(e,t,n,r){const{args:o,mouseArgs:l,touchArgs:a}=Me(r),i=this._getStore(e);for(let h=i.length-1;h>=0;h--){const{handler:s,wrapper:d}=i[h];n===s&&(H.call(null,e,de[t][0],d,...o,...l),H.call(null,e,de[t][1],d,...o,...l),i.splice(h,1))}}};function Me(e){e||(e={});const t=e.args||[],n=e.mouseArgs||[],r=e.touchArgs||[];return{args:t,mouseArgs:n,touchArgs:r}}/*!
 * @he-tree/dnd-utils v0.1.0-alpha.4
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const we=new Map,W={triggerElement:null,dragElement:null,internal:!1,dropEffect:"none",preventDefault:!1},P=W;function re(e){e.dataTransfer&&(e.dataTransfer.dropEffect=P.dropEffect)}function Dt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(we.has(e))throw"Already registered on specified element";const n={...t},r=n;_e(n,xt),ke.on(e,"start",o,{touchArgs:[{passive:!0}]}),ke.on(e,"end",l);function o(u){var c;const p=u.target;p.nodeType===Node.ELEMENT_NODE&&(P.triggerElement=p);const m=p;if(n.ingoreHTMLTags&&m.tagName&&n.ingoreHTMLTags.find(w=>w.toUpperCase()===m.tagName))return;const v=(c=n.beforeDragStart)===null||c===void 0?void 0:c.call(n,u);v&&(v.setAttribute("draggable","true"),P.dragElement=v)}function l(u){P.dragElement&&P.dragElement.removeAttribute("draggable")}function a(u){var c;P.internal=!0,(c=n.onDragStart)===null||c===void 0||c.call(n,u),re(u)}function i(u){var c;(c=n.onDrag)===null||c===void 0||c.call(n,u),re(u)}function h(u){var c;(c=n.onDragEnd)===null||c===void 0||c.call(n,u),P.internal=!1,P.dragElement&&P.dragElement.removeAttribute("draggable"),P.triggerElement=null,P.dragElement=null,P.dropEffect="none"}const s=Nt(e,{onDragLeave(u){var c;(c=n.onDragLeave)===null||c===void 0||c.call(n,u),re(u)},onDragEnter(u){var c;r.ifPreventDefault(u)&&u.preventDefault(),(c=n.onDragEnter)===null||c===void 0||c.call(n,u),re(u)},onDragOver(u){var c;r.ifPreventDefault(u)&&u.preventDefault(),(c=n.onDragOver)===null||c===void 0||c.call(n,u),re(u)},onDrop(u){var c;r.ifPreventDefault(u)&&u.preventDefault(),(c=n.onDrop)===null||c===void 0||c.call(n,u)},onEnter(u){var c;(c=n.onEnter)===null||c===void 0||c.call(n,u)},onLeave(u){var c;(c=n.onLeave)===null||c===void 0||c.call(n,u)}});return z(e,"dragstart",a),z(e,"drag",i),z(e,"dragend",h),Object.assign(n,{root:e,destroy:()=>{ke.off(e,"start",o,{touchArgs:[{passive:!0}]}),H(e,"dragstart",a),H(e,"drag",i),H(e,"dragend",h),s(),we.delete(e)}}),we.set(e,r),r}const xt={ingoreHTMLTags:["INPUT","TEXTAREA","SELECT","OPTGROUP","OPTION"],ifPreventDefault(e){return W.dragElement?!0:P.preventDefault},beforeDragStart(e){},onDragStart(e){},onDrag(e){},onDragEnter(e){},onDragLeave(e){},onDragOver(e){},onDragEnd(e){},onDrop(e){}};let ce=null;const Ot=e=>{ce=e,setTimeout(()=>{ce=null},20)};function Nt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e;let r=!1;const o=p=>{var m;r=!0,(m=t.onEnter)===null||m===void 0||m.call(t,p),d.resume()},l=p=>{var m;Ot(p.target),(m=t.onDragEnter)===null||m===void 0||m.call(t,p),r||o(p)},a=p=>{var m;r||o(p),(m=t.onDragOver)===null||m===void 0||m.call(t,p)},i=p=>{var m;(m=t.onDragLeave)===null||m===void 0||m.call(t,p);const v=function(){var _;let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;r=!1,(_=t.onLeave)===null||_===void 0||_.call(t,D),d.stop()},w=ce;ce=null,w&&tt(w,n)||v()},h=p=>{var m;(m=t.onDrop)===null||m===void 0||m.call(t,p)},s=p=>{var m;p instanceof KeyboardEvent&&p.key!=="Escape"||(r=!1,d.stop(),(m=t.onEndBeforeLeave)===null||m===void 0||m.call(t,p))},d=nt([[e,"drop",s],[window,"mouseup",s],[window,"touchend",s],[window,"keydown",s]]);d.stop();const u=()=>{z(e,"dragenter",l),z(e,"dragover",a),z(e,"dragleave",i),z(e,"drop",h)},c=()=>{H(e,"dragenter",l),H(e,"dragover",a),H(e,"dragleave",i),H(e,"drop",h),d.stop()};return u(),c}let b=null,g=null,ue,le,q,fe,Ce,T,Ee;const Re={get startInfo(){return ue},get targetInfo(){return le},get dragNode(){return T},get startTree(){return b},get targetTree(){return g},get closestNode(){return Ee}},ze=k.defineComponent({extends:Ve,props:{triggerClass:{type:[String,Array]},disableDrag:Boolean,disableDrop:Boolean,eachDraggable:{type:Function},eachDroppable:{type:Function},rootDroppable:{type:[Boolean,Function],default:!0},dragOpen:{type:Boolean,default:!0},dragOpenDelay:{type:Number,default:0},beforeDragOpen:{type:Function},resolveStartMovePoint:{type:[String,Function]},keepPlaceholder:{type:Boolean},maxLevel:{type:Number},dragCopy:{type:Boolean},dragCopyDataHandler:{type:Function},onExternalDragOver:{type:Function},externalDataHandler:{type:Function},ondragstart:{type:Function}},data(){return{treeDraggableInstance:null}},computed:{},methods:{getNodeByElement(e){const t=e.getAttribute("vt-index");return t==null?null:this.visibleStats[t]},isDraggable(e){if(this.disableDrag)return!1;if(e.draggable!=null)return e.draggable;if(this.eachDraggable){const n=this.eachDraggable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDraggable(t):!0},isDroppable(e){if(this.disableDrop)return!1;if(!e)return Le(this.rootDroppable,[this,b]);if(e.droppable!=null)return e.droppable;if(this.eachDroppable){const n=this.eachDroppable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDroppable(t):!0},_eachDroppable(){var e;return Le((e=this._isDragCopy)==null?void 0:e.call(this),[this])}},mounted(){const e=(s,d)=>{let u=!0;return b&&b!==this&&(u=u&&this._isMoved),this.table&&!this._isDragCopy&&(u=u&&this._isDragCopy),u&&(s.x!==d.x||s.y!==d.y)},t=(s,d)=>{g.ignoreUpdate(()=>{if(!g.has(g.placeholderData)){if(g.table){let c=0;const p=g.getRootEl().querySelector("tr");if(p)for(const{value:m}of Ye(p.children))oe(m,"display")!=="none"&&(c+=m.colSpan||1);c<1&&(c=1),g.placeholderColspan=c}g.add(g.placeholderData)}const u=g.getStat(g.placeholderData);g.move(u,s,d)})},n=()=>{const s=this;if(s.has(s.placeholderData))return s.remove(s.getStat(s.placeholderData)),!0},r=s=>{s?W.dropEffect=b!=null&&b.dragCopy?"copy":"move":W.dropEffect="none"},o=s=>{const d=this;s?r(!0):d.keepPlaceholder?d.has(d.placeholderData)||r(!1):(n(),r(!1))};let l={x:0,y:0};const a=this.getRootEl();let i=null;const h=()=>{g!=null&&g.has(g.placeholderData)&&g.ignoreUpdate(()=>{g.remove(g.getStat(g.placeholderData)),b&&(b.dragNode.hidden=!1,b.dragOvering=!1)})};this.treeDraggableInstance=Dt(a,{beforeDragStart:s=>{if(!W.triggerElement)return;let d=this.triggerClass;(!d||d.length===0)&&(d="tree-node");let u=je(d),c=Te(W.triggerElement,p=>{if($e(p,u))return!0;if(ae(p,"tree-node"))return"break"},{withSelf:!0,until:a});if(i=Te(c,p=>{if(ae(p,"tree-node"))return!0},{withSelf:!0,until:a}),!!i){if(T=this.getNodeByElement(i),!T)throw"Can't find drag node";if(this.isDraggable(T))return this.$emit("before-drag-start",T),this.$emit("beforeDragStart",T),a}},onDragStart:s=>{var p,m,v;if(!i||!T)return;{const{x:w,y:_}=i.getBoundingClientRect(),{clientX:D,clientY:K}=s;(p=s.dataTransfer)==null||p.setDragImage(i,D-w,K-_)}Ce={x:s.clientX,y:s.clientY},b=this,b.dragNode=T,fe=(()=>{if(this.resolveStartMovePoint==="mouse")return{x:s.clientX,y:s.clientY};if(typeof this.resolveStartMovePoint=="function")return this.resolveStartMovePoint(i);{let w,_=0;if(this.table){let D=i.getBoundingClientRect();w={x:D.x,y:D.y},this.rtl&&(w.x=D.right),_=D.height}else if(!this.rtl)w=i.children[0].getBoundingClientRect().toJSON(),_=w.height;else{const D=i.children[0].getBoundingClientRect();w={x:D.right,y:D.y},_=D.height}return this.btt&&(w.y+=_),w}})(),this.dragOvering=!0;const u=b.getSiblings(b.dragNode),c=u.indexOf(T);ue={tree:b,dragNode:T,parent:T.parent,siblings:u,indexBeforeDrop:c},g=this,(m=s.dataTransfer)==null||m.setData("text",`he-tree drag start at ${new Date().toISOString()}`),b._eachDroppable()||setTimeout(()=>{T.hidden=!0,t(T.parent,c+1)},0),(v=this.ondragstart)==null||v.call(this,s)},onEnter:s=>{this.$emit("enter",s)},onLeave:s=>{q=null,this.dragOvering=!1,W.preventDefault=!1,n(),this.$emit("leave",s)},onDragOver:Qe(s=>{if(!b){if(!this.onExternalDragOver||this.onExternalDragOver(s)===!1)return;W.preventDefault=!0}const d={x:s.clientX,y:s.clientY},u=e(d,l);if(l=d,!u)return;this.dragOvering=!0,g=this;const c=fe?{x:fe.x+(d.x-Ce.x),y:fe.y+(d.y-Ce.y)}:{...d},{btt:p,rtl:m}=g;if(g.disableDrop){W.dropEffect="none";return}let v,w;const _=g.getRootEl().querySelectorAll(".tree-node"),D=[];_.forEach(C=>{!$e(C,["drag-placeholder-wrapper","dragging-node"])&&oe(C,"display")!=="none"&&D.push(C)});const K=ye(D,C=>me(C)[p?"bottom":"top"]-c.y,{returnNearestIfNoHit:!0});let x=null,U,Q;K.hit||(K.greater?p||(x=K.index-1,D[x]||x++):p&&(x=K.index+1,D[x]||x--)),x==null&&(x=K.index),U=D[x],Q=p?D[x-1]:D[x+1],v=U&&g.getNodeByElement(U),w=Q&&g.getNodeByElement(Q);const{indent:X}=g,I=ne(()=>{if(g.table){let C=me(U).toJSON();const $=X*(v.level-1);return m?(C.width-=$,C.right-=$):C.x+=$,C}else return me(U.firstElementChild)}).action,ee=ne(()=>p?c.y>I().y+I().height/2:c.y<I().y+I().height/2).action,De=ne(()=>p?!U||x===D.length-1&&ee():!U||x===0&&ee()).action,he=ne(()=>m?c.x-(I().x+I().width):I().x-c.x).action,S=ne(()=>m?c.x<I().x+I().width-X:c.x>I().x+X).action;let y;if(De())y=1,v=null;else if(v)he()>0?y=v.level-Math.ceil(he()/X):S()?y=v.level+1:y=v.level;else return;w&&y<w.level&&(y=w.level),(async()=>{let C,$,A=!1,j=null;const Z=async O=>{if(O.open)return!0;if(g.dragOpen)if(g.dragOpenDelay)if(j=O,q===O)A=!0;else{let L=et();q=O;const M=O;return setTimeout(async()=>{M!==q?(A=!0,L.resolve(!0)):(g.beforeDragOpen&&await g.beforeDragOpen(O),M!==q?(A=!0,L.resolve(!0)):(O.open=!0,j=null,L.resolve(!0)))},g.dragOpenDelay),await L.promise}else return g.beforeDragOpen&&await g.beforeDragOpen(O),O.open=!0,!0;else return!1},J=async()=>{if(g.isDroppable(v)&&await Z(v)){if(A)return;C=v,$=null}else return!1},ge=(O=y)=>{let L=v,M=[];for(;L&&L.level>=O;)L=L.parent||null,M.unshift(L);let G=0;for(const He of M){if(g.isDroppable(He))return C=He,$=M[G+1]||v,!0;G++}return!1};Ee=v||null,v?y>v.level?await J()===!1&&ge(v.level):ge()===!1&&await J():g.isDroppable(null)&&(C=null),q=j;const N=!!(!A&&(C||C===null));return{cancelled:A,success:N,parent:C,index:N?$?(C?C.children:g.stats).filter(O=>O.data!==g.placeholderData).indexOf($)+1:0:-1}})().then(C=>{if(!C.cancelled){if(!C.success){o(!1);return}if(g.maxLevel!=null&&g.maxLevel>0){let $=1;if(b){const j=b.dragNode;let Z=0;V(j,J=>{J.level>Z&&(Z=J.level)},{childrenKey:Y}),$=Z-j.level+1}if($+(C.parent?C.parent.level:0)>g.maxLevel){o(!1);return}}o(!0),t(C.parent,C.index)}})}),onDrop:s=>{g=this;const d=!b;if(!g)return;const u=b==null?void 0:b.dragNode;let c,p=(()=>{var v;let m=!0;if(!g.has(g.placeholderData))m=!1;else if(d)c=(v=this.externalDataHandler)==null?void 0:v.call(this,s),m=c!=null;else if(!b.dragCopy){const w=g.getStat(g.placeholderData);b===g&&w.parent===u.parent&&Ge(u,_=>_===w)}return m})();if(p){const m=g.getStat(g.placeholderData),v=g.getSiblings(m);le={tree:g,dragNode:u,parent:m.parent,siblings:v,indexBeforeDrop:v.indexOf(m)}}(()=>{if(h(),p){let m=le.indexBeforeDrop;b&&!b.dragCopy&&b===g&&ue.parent==le.parent&&ue.indexBeforeDrop<m&&m--,b&&b!==g&&!b._eachDroppable()&&b.batchUpdate(()=>{b.remove(u),b.updateCheck()}),g.batchUpdate(()=>{let v=b==null?void 0:b.dragNode,w;c?w=c:b._eachDroppable()&&(w=Be(b.dragNode.data,{childrenKey:b.childrenKey}),b.dragCopyDataHandler&&(w=b.dragCopyDataHandler(w))),w&&(g.add(w),v=g.getStat(w)),g.move(v,le.parent,m),g.updateCheck()})}g.$emit("after-drop"),p&&(b&&(b.dragCopy||b.$emit("change")),g!==b&&g.$emit("change"))})()},onDragEnd:s=>{h(),b&&(b.dragNode&&(b.dragNode.hidden=!1),b.dragNode=null,b.dragOvering=!1,b=null),g=null,q=null,T=null,Ee=null}})},unmounted(){var e;(e=this.treeDraggableInstance)==null||e.destroy()}}),_t=k.defineComponent({props:{open:{type:Boolean}}}),Bt=[f.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[f.createElementVNode("title",null,"chevron-right"),f.createElementVNode("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"})],-1)];function Lt(e,t,n,r,o,l){return f.openBlock(),f.createElementBlock("a",{class:f.normalizeClass(["he-tree__open-icon",{open:e.open}])},Bt,2)}const Tt=be(_t,[["render",Lt]]);function $t(e,t){try{return{mixins:[ze],created:new Function(Ft(e,t))()}}catch{throw new Error("he-tree-pro: wrong secret key")}}function Ft(e,t){e=encodeURIComponent(e),e.length%2===1&&(e+="h"),e=e.split("").reverse().join(""),t=atob(t);for(let n=0;n<e.length;n+=2){const r=e[n],o=e[n+1];t=Pt(t,r,o)}return It("arb=inowc=ocmet;etrnfucton){are=1,=tistr{evod !=b}ath(){e&(c_htreWtemak=)=e,._sMve=(=>._eteeatrmrkd.israCoy=)=d.abe,._acDrppbl=(=>.dagop)}",t)}function Pt(e,t,n){let r="";for(let o=0;o<e.length;o++){const l=e[o];l===t?r+=n:l===n?r+=t:r+=l}return r}function It(e,t){let n=0,r="";for(;;){let o;if(o=n,o>=t.length||(r+=t[o],o=n*2,o>=e.length)||(r+=e[o],o+=1,o>=e.length))break;r+=e[o],n++}return r}return R.BaseTree=Ve,R.Draggable=ze,R.OpenIcon=Tt,R.TreeNode=Pe,R.context=Re,R.dragContext=Re,R.pro=$t,R.walkTreeData=V,Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),R}({},VueDemi,Vue);
//# sourceMappingURL=index.iife.js.map
