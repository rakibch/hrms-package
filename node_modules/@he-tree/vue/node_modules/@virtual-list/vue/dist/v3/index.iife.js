var virtualListVue=function(o,r){"use strict";/*!
 * @virtual-list/vue
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://virtual-list.phphe.com
 * Released under the MIT License.
 *//*!
 * helper-js v3.1.5
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */function H(e,i){return e<i?e:i}function M(e){return e[e.length-1]}function q(e,i){return e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className)}function R(e,i){return getComputedStyle(e)[i]}function x(e,i){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};u={start:0,end:e.length-1,maxTimes:1e3,...u};let{start:c,end:d}=u;const{returnNearestIfNoHit:y,maxTimes:S}=u;let s,f;c==null&&(c=0,d=e.length-1);let B=0,m;for(;c>=0&&c<=d;){if(B>=S)throw Error("binarySearch: loop times is over ".concat(S,", you can increase the limit."));s=Math.floor((d-c)/2+c),f=e[s];const p=B+1;if(m=i(f,s,p),m>0)d=s-1;else if(m<0)c=s+1;else return{index:s,value:f,count:p,hit:!0};B++}return y?{index:s,value:f,count:B+1,hit:!1,greater:m>0}:null}const G=o.defineComponent({props:{table:Boolean}}),V=(e,i)=>{const u=e.__vccOpts||e;for(const[c,d]of i)u[c]=d;return u},J={key:0},Q={key:1};function U(e,i,u,c,d,y){return e.table?(r.openBlock(),r.createElementBlock("table",J,[r.renderSlot(e.$slots,"prepend"),r.createElementVNode("tbody",null,[r.renderSlot(e.$slots,"default")]),r.renderSlot(e.$slots,"append")])):(r.openBlock(),r.createElementBlock("div",Q,[r.renderSlot(e.$slots,"prepend"),r.renderSlot(e.$slots,"default"),r.renderSlot(e.$slots,"append")]))}const X=V(G,[["render",U]]),Y=o.defineComponent({components:{VirtualListTable:X},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const i=o.ref(0),u=o.ref(e.firstRender-1),c=o.computed(()=>{var t;return H(u.value,(((t=e.items)==null?void 0:t.length)||1)-1)}),d=o.ref(0),y=o.computed(()=>b.value[i.value]?N(i.value):0),S=o.computed(()=>b.value.length>0?N(b.value.length-1)+M(p.value):0),s=o.computed(()=>b.value[c.value]?S.value-N(c.value)-p.value[c.value]:0),f=o.computed(()=>e.disabled?{}:{overflow:"auto"}),B=o.computed(()=>{const t={display:"flex"};return e.disabled||(e.horizontal?Object.assign(t,{"margin-left":y.value+"px","margin-right":s.value+"px",width:S.value-s.value-y.value+"px"}):Object.assign(t,{"margin-top":y.value+"px","margin-bottom":s.value+"px"})),t["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete t.display,delete t["flex-direction"]),t}),m=o.computed(()=>o.reactive((e.items||[]).map(()=>null))),p=o.computed(()=>(e.items||[]).map((t,n)=>{var k;if(m[n]!=null)return m[n];let l=(k=e.itemSize)==null?void 0:k.call(e,t,n);return l==null&&(l=d.value),l})),b=o.computed(()=>{const t=[];return p.value.reduce((n,l)=>(t.push(n),n+l),0),t});o.watch(()=>e.items,z);const _=o.computed(()=>{if(!e.items||e.disabled)return;const t=[];for(let n=i.value;n<=c.value;n++){const l=e.items[n];if(!l)break;t.push({item:l,index:n})}return t}),w=o.ref(),K=o.ref();o.onMounted(async()=>{z();try{ee()}catch{await o.nextTick(),z()}});let C;function D(){const t=w.value;if(!t)return;const n=E(t);C!=null&&e.buffer-Math.abs(n-C)>=10||(C=n,z())}let T=!1,v=!1;async function z(){var j;if(T){v=!0;return}if(!e.items||e.disabled)return;T=!0;const t=w.value,n=(j=K.value)==null?void 0:j.$el;if(!t||!n)return;d.value||(d.value=le()),i.value=ne(),u.value=re(),await o.nextTick();let l,k=0;const I={},A=e.table?n.querySelector("tbody").children:n.children;for(let g=0;g<A.length;g++){const a=A[g],h=R(a,"position");if(h&&["absolute","fixed"].includes(h))continue;const $=R(a,"display")!=="none"?W(a):0,F=a.getAttribute("vt-index"),L=F?parseInt(F):i.value+k;I[L]=(I[L]||0)+$,k++}for(const g of Object.keys(I)){const a=parseInt(g);m.value[a]!==I[a]&&(m.value[a]=I[a],l=!0)}l&&await o.nextTick(),T=!1,v&&(v=!1,z());function ne(){const g=E(t)-P(t)-e.buffer;return x(b.value,h=>h-g,{returnNearestIfNoHit:!0}).index}function re(){const g=E(t)-P(t)+O(t)+e.buffer;return x(b.value,h=>h-g,{returnNearestIfNoHit:!0}).index}function le(){const a=[],h=e.table?n.querySelector("tbody").children:n.children;for(let $=0;$<h.length;$++){const F=h[$],L=getComputedStyle(F);if(["absolute","fixed"].includes(L.position))continue;const oe=W(F);if(a.push(oe),a.length>=10)break}return a.length===0?0:a.reduce(($,F)=>$+F,0)/a.length}}function O(t){const n=getComputedStyle(t);let l=parseFloat(e.horizontal?n.width:n.height);return n.boxSizing==="border-box"&&(e.horizontal?l=l-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth):l=l-parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)),l}function W(t){let n=O(t);const l=getComputedStyle(t);return e.horizontal?n+=parseFloat(l.borderLeftWidth)+parseFloat(l.borderRightWidth)+parseFloat(l.marginLeft)+parseFloat(l.marginRight):n+=parseFloat(l.borderTopWidth)+parseFloat(l.borderBottomWidth)+parseFloat(l.marginTop)+parseFloat(l.marginBottom),n=Number.isNaN(n)?0:n,n}function E(t){return e.horizontal?t.scrollLeft:t.scrollTop}function P(t){const n=getComputedStyle(t);return e.horizontal?parseFloat(n.paddingLeft):parseFloat(n.paddingTop)}function N(t){return b.value[t]}function ee(){const t=w.value;new ResizeObserver(l=>{for(let k of l)if(q(k.target,"vtlist")){z();break}}).observe(t)}function te(t,n){if(e.itemKey){if(typeof e.itemKey=="string"&&e.itemKey==="index")return n;if(typeof e.itemKey=="function")return e.itemKey(t,n)}}return{listElRef:w,listInnerRef:K,onscroll:D,listStyle:f,listInnerStyle:B,visibleItemsInfo:_,getItemKey:te,update:z,sizes:p,positions:b,runtimeSizes:m}}});function Z(e,i,u,c,d,y){const S=r.resolveComponent("VirtualListTable");return r.openBlock(),r.createElementBlock("div",{class:"vtlist",ref:"listElRef",style:r.normalizeStyle(e.listStyle),onScrollPassive:i[0]||(i[0]=(...s)=>e.onscroll&&e.onscroll(...s))},[r.createVNode(S,{class:"vtlist-inner",ref:"listInnerRef",style:r.normalizeStyle(e.listInnerStyle),table:e.table},{prepend:r.withCtx(()=>[r.renderSlot(e.$slots,"prepend")]),append:r.withCtx(()=>[r.renderSlot(e.$slots,"append")]),default:r.withCtx(()=>[e.disabled?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(e.items,(s,f)=>r.renderSlot(e.$slots,"default",{key:e.getItemKey(s,f),item:s,index:f})),128)):(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:1},r.renderList(e.visibleItemsInfo,({item:s,index:f})=>r.renderSlot(e.$slots,"default",{key:e.getItemKey(s,f),item:s,index:f})),128))]),_:3},8,["style","table"])],36)}return V(Y,[["render",Z]])}(VueDemi,Vue);
//# sourceMappingURL=index.iife.js.map
