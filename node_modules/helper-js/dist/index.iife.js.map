{"version":3,"file":"index.iife.js","sources":["../src/index.ts"],"sourcesContent":["// ## base functions\n// ## 基础方法\n\n/**\n * get global, such as window in browser.\n * 返回顶级全局变量. 例如浏览器的`window`\n * @returns\n */\nexport function glb(): typeof globalThis {\n  try {\n    // `this` !== global or window because of build tool. So you can't use `this` to get `global`\n    return window;\n  } catch (error) {\n    // @ts-ignore\n    return global;\n  }\n}\n\n/**\n * detect if global variable `document` existing.\n * 判断全局变量`document`是否存在\n * @returns\n */\nexport function isDocumentExisted() {\n  try {\n    let t = document;\n  } catch (e) {\n    return false;\n  }\n  return true;\n}\n\nexport function isArray<T>(v: unknown): v is any[] {\n  return Object.prototype.toString.call(v) === \"[object Array]\";\n}\nexport function isBool(v: unknown): v is boolean {\n  return Object.prototype.toString.call(v) === \"[object Boolean]\";\n}\nexport function isNumber(v: unknown): v is number {\n  return Object.prototype.toString.call(v) === \"[object Number]\";\n}\nexport function isNumeric(v: unknown): v is string {\n  try {\n    // @ts-ignore\n    return isFinite(v) && !isNaN(parseFloat(v));\n  } catch (error) {\n    return false;\n  }\n}\nexport function isString(v: unknown): v is string {\n  return Object.prototype.toString.call(v) === \"[object String]\";\n}\nexport function isObject(v: unknown): v is object {\n  return Object.prototype.toString.call(v) === \"[object Object]\";\n}\nexport function isFunction(v: unknown): v is Function {\n  return typeof v === \"function\";\n}\nexport function isPromise(v: unknown): v is Promise<any> {\n  return Object.prototype.toString.call(v) === \"[object Promise]\";\n}\n\n/**\n * detect if argumrnt is null, undefined, empty array, empty string, false, NaN, empty object\n * 检查是否是null, undefined, 空数组, 空字符串, false, NaN, 空对象\n * @param v\n * @returns\n */\nexport function empty(\n  v: null | undefined | boolean | number | object | unknown[]\n) {\n  if (v == null) {\n    return true;\n  } else if (v[\"length\"] != null) {\n    return v[\"length\"] === 0;\n  } else if (isBool(v)) {\n    return false;\n  } else if (isNumber(v)) {\n    return isNaN(v);\n  } else if (isObject(v)) {\n    return Object.keys(v).length === 0;\n  }\n}\n\n/**\n * rand int in range, including min and max\n * 返回指定范围随机整数, 包括范围起始值和终止值\n * @param min\n * @param max\n * @returns\n */\nexport function randInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\n/**\n * rand item in array\n * 返回数组随机一项\n * @param arr\n * @returns\n */\nexport function randChoice<T>(arr: string | T[]): string | T {\n  return arr[randInt(0, arr.length - 1)] as T;\n}\n\n/**\n * Pad a string to a certain length with another string\n * 左边补充指定字符, 使其达到指定长度\n * @param str\n * @param n\n * @param padString\n * @returns\n */\nexport function strPad(str: number | string, n: number, padString = \"0\") {\n  let r = str.toString();\n  let len = str.toString().length;\n  while (len < n) {\n    r = padString + r;\n    len++;\n  }\n  if (r.length > n) {\n    r = r.substring(r.length - n);\n  }\n  return str;\n}\n\n/**\n * If n less than `min`, return `min`, else n.\n * 如果n小于min, 返回min, 否则n.\n * @param n\n * @param min\n * @returns\n */\nexport function notLessThan<T>(n: T, min: T) {\n  return n < min ? min : n;\n}\n\n/**\n * If n greater than `max`, return `max`, else n.\n * 如果n大于max, 返回max, 否则n.\n * @param n\n * @param max\n * @returns\n */\nexport function notGreaterThan<T>(n: T, max: T) {\n  return n < max ? n : max;\n}\n\n/**\n * limit min and max of value.\n * 限制值的最小和最大值.\n * @param n\n * @param min\n * @param max\n * @returns\n */\nexport function between<T>(n: T, min: T, max: T) {\n  return notGreaterThan(notLessThan(n, min), max);\n}\n\n// ## string\n// ## 字符串\n\n/**\n * 'abc abc' to 'Abc abc'\n * @param str\n * @returns\n */\nexport function studlyCase(str: string) {\n  return str && str[0].toUpperCase() + str.substring(1);\n}\n\n/**\n * To lower case and use `-` as delimiter. example: '-ABC abc_def camelCase-- helloMyFriend' to 'a-b-c-abc-def-camel-case-hello-my-friend'\n * @param str\n * @returns\n */\nexport function kebabCase(str: string) {\n  return str\n    .replace(/ /g, \"-\")\n    .replace(/_/g, \"-\")\n    .replace(/(?<=[a-z])([A-Z])/g, \"-$1\")\n    .replace(/--+/g, \"-\")\n    .replace(/^-|-$|/g, \"\")\n    .toLowerCase();\n}\n\n/**\n * To lower case and use `_` as delimiter.\n * @param str\n * @returns\n */\nexport function snakeCase(str: string) {\n  return kebabCase(str).replace(/-/g, \"_\");\n}\n\n/**\n * 'abc-abc-abc_abc' to 'AbcAbcAbcAbc'\n * @param str\n * @returns\n */\nexport function camelCase(str: string) {\n  const temp = kebabCase(str).split(\"-\");\n  for (let i = 1; i < temp.length; i++) {\n    temp[i] = studlyCase(temp[i]);\n  }\n  return temp.join(\"\");\n}\n\n/**\n * 'AbcAbcAbcAbc' to ['Abc', 'Abc', 'Abc', 'Abc']\n * @param str\n * @returns\n */\nexport function camelToWords(str: string) {\n  return str.split(/(?<=[a-z])(?=[A-Z])/g);\n}\n\n/**\n * 'abcAbc' to 'Abc Abc'\n * @param str\n * @returns\n */\nexport function titleCase(str: string) {\n  return camelToWords(studlyCase(camelCase(str))).join(\" \");\n}\n\n/**\n * generate random string\n * 随机字符串\n * @param len default 8\n * @param seeds\n * @returns\n */\nexport function randString(\n  len = 8,\n  seeds:\n    | string\n    | string[] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"\n) {\n  let r = \"\";\n  for (let i = 0; i < len; i++) {\n    r += randChoice(seeds);\n  }\n  return r;\n}\n\n/**\n * reverse a string\n * @param str\n * @returns\n */\nexport function reverseString(str: string) {\n  return str.split(\"\").reverse().join(\"\");\n}\n\n// ## Array\n// ## 数组\n\n/**\n * remove item from array. return removed count\n * 从数组删除项. 返回删除计数\n * @param arr\n * @param v\n * @returns\n */\nexport function arrayRemove(arr: any[], v: any) {\n  let index;\n  let count = 0;\n  while ((index = arr.indexOf(v)) > -1) {\n    arr.splice(index, 1);\n    count++;\n  }\n  return count;\n}\n\n/**\n * remove items from array by sorted indexes. indexes example: [0, 2, 6, 8, 9]\n * 通过有序的索引集删除数组项. 索引集例子: [0, 2, 6, 8, 9]\n * @param arr\n * @param sortedIndexes\n */\nexport function arrayRemoveBySortedIndexes(\n  arr: any[],\n  sortedIndexes: number[]\n) {\n  for (let i = sortedIndexes.length - 1; i >= 0; i--) {\n    const index = sortedIndexes[i];\n    arr.splice(index, 1);\n  }\n}\n\n/**\n * get item from array by index. index can be negative number\n * 通过索引获取数组一项. 支持负值索引.\n * @param arr\n * @param n\n * @returns\n */\nexport function arrayAt<T>(arr: T[], n: number) {\n  return arr[n >= 0 ? n : arr.length + n];\n}\n\n/**\n * get first or array\n * 返回数组首项\n * @param arr\n * @returns\n */\nexport function arrayFirst<T>(arr: T[]) {\n  return arr[0];\n}\n\n/**\n * get last of array\n * 返回数组末项\n * @param arr\n * @returns\n */\nexport function arrayLast<T>(arr: T[]) {\n  return arr[arr.length - 1];\n}\n\n/**\n *\n * @param arr1\n * @param arr2\n * @returns [diff1, diff2] diff1: in arr1 not in arr2. diff2: in arr2 not in arr1\n */\nexport function arrayDiff<T>(arr1: T[], arr2: T[]): [T[], T[]] {\n  const m1 = new Map<T, number>();\n  const m2 = new Map<T, number>();\n  for (const item of arr1) {\n    const count = m1.has(item) ? m1.get(item) : 0;\n    m1.set(item, count + 1);\n  }\n  for (const item of arr2) {\n    const count = m2.has(item) ? m2.get(item) : 0;\n    m2.set(item, count + 1);\n  }\n  const r1 = [];\n  const r2 = [];\n  m1.forEach((count, item) => {\n    const diff = count - (m2.has(item) ? m2.get(item) : 0);\n    if (diff > 0) {\n      diff === 1 ? r1.push(item) : r1.push(...new Array(diff).fill(item));\n    }\n  });\n  m2.forEach((count, item) => {\n    const diff = count - (m1.has(item) ? m1.get(item) : 0);\n    if (diff > 0) {\n      diff === 2 ? r2.push(item) : r2.push(...new Array(diff).fill(item));\n    }\n  });\n  return [r1, r2];\n}\n\n/**\n * like indexOf, get all indexes\n * @param strOrArr\n * @param item\n * @returns\n */\nexport function indexesOf(strOrArr: string | any[], item: any) {\n  let i = 0;\n  const indexes: number[] = [];\n  while (i < strOrArr.length) {\n    const index = strOrArr.indexOf(item, i);\n    if (index === -1) {\n      break;\n    } else {\n      indexes.push(index);\n      if (typeof strOrArr === \"string\") {\n        i = index + (item + \"\").length;\n      } else {\n        i = index + 1;\n      }\n    }\n  }\n  return indexes;\n}\n\n/**\n * get array item siblings. Example: getArrayItemSiblings(arr, item, [-1, 1]), get previous and next sibling\n * 获得数组项的多个同级. 例: getArrayItemSiblings(arr, item, [-1, 1]), 获得前一个和后一个\n * @param arr\n * @param item\n * @param offsets\n * @returns\n */\nexport function getArrayItemSiblingsByOffsets<T>(\n  arr: T[],\n  item: any,\n  offsets: number[]\n) {\n  const index = arr.indexOf(item);\n  if (index === -1) {\n    throw \"item is not in array\";\n  }\n  return offsets.map((v) => arr[index + v]);\n}\n\nexport function toArrayIfNot<T>(arrOrNot: T | T[]): T[] {\n  return isArray(arrOrNot) ? arrOrNot : [arrOrNot];\n}\n\n/**\n * Split array every n. n can be getter, which argument is the times.\n * 每n个拆分数组. n可以是方法, 参数是第几次分块\n * @param arr\n * @param n\n * @returns\n */\nexport function splitArray<T>(\n  arr: T[],\n  n: number | ((times: number) => number)\n): T[][] {\n  const r = [];\n  if (isFunction(n)) {\n    const getChunkLength = n;\n    let times = 1;\n    let i = 0;\n    while (i < arr.length) {\n      const n = getChunkLength(times);\n      const end = i + n;\n      r.push(arr.slice(i, end));\n      i = end;\n      times++;\n    }\n  } else {\n    let i = 0;\n    while (i < arr.length) {\n      const end = i + <number>n;\n      r.push(arr.slice(i, end));\n      i = end;\n    }\n  }\n  return r;\n}\n\n/**\n * group array by mark\n * 计算每项的标识, 通过标识将数组项分组.\n * @param arr\n * @param getMark\n * @returns\n */\nexport function groupArray<T, R>(arr: T[], getMark: (item: T) => R) {\n  const groups = new Map<R, T[]>();\n  arr.forEach((v) => {\n    const mark = getMark(v);\n    if (!groups.has(mark)) {\n      groups.set(mark, []);\n    }\n    groups.get(mark).push(v);\n  });\n  return groups;\n}\n\n/**\n * Each item in the new array is unique.\n * 新数组每项唯一.\n * @param arr\n * @param getMark\n * @returns\n */\nexport function arrayDistinct<T>(\n  arr: T[],\n  getMark?: (item: T, index: number) => unknown\n) {\n  const t = new Set();\n  return arr.filter((v, i) => {\n    const mark = getMark ? getMark(v, i) : v;\n    if (!t.has(mark)) {\n      t.add(mark);\n      return true;\n    }\n  });\n}\n\n/**\n * get items from array between 2 indeies. index can be negative\n * 从数组获得一个范围内的项. 范围可以为负.\n * @param arr\n * @param index\n * @param endIndex\n * @returns\n */\nexport function arrayBetween<T>(arr: T[], index: number, endIndex: number) {\n  if (index < 0) {\n    index += arr.length;\n  }\n  if (endIndex < 0) {\n    endIndex += arr.length;\n  }\n  return arr.slice(index, endIndex - index + 1);\n}\n\n/**\n * return new array excluding n items from end\n * 返回新数组排除末尾n项\n * @param arr\n * @param n\n * @returns\n */\nexport function arrayWithoutEnd<T>(arr: T[], n: number = 1) {\n  return arr.slice(0, arr.length - n);\n}\n\n/**\n * get one-dimensional array from multidimensional array\n * 从多维数组获取一维数组\n * @param arr\n * @param depth\n * @returns\n */\nexport function arrayFlat<T>(arr: any[], depth = 10): T[] {\n  const r = [];\n  const rec = (arr, curentDepth) => {\n    for (const item of arr) {\n      if (isArray(item) && curentDepth < depth) {\n        rec(item, curentDepth + 1);\n      } else {\n        r.push(item);\n      }\n    }\n  };\n  rec(arr, 0);\n  return r;\n}\n\n/**\n * simplified array.filter()\n * e.g.: arrayFilter(arr, [null, undefined]) equal to arr.filter(v => v!== null && v!== undefined)\n * @param arr\n * @param without\n * @returns\n */\nexport function arrayFilter<T extends ArrayLike<any>>(\n  arr: T,\n  without: any[]\n): T {\n  // @ts-ignore\n  return arr.filter((v) => without.indexOf(v) === -1);\n}\n/**\n * alias of arrayFilter\n */\nexport const arrayWithout = arrayFilter;\n\n// ## Object\n// ## 对象\n\n/**\n * return JSON.parse(JSON.stringify(obj))\n * @param obj\n * @returns\n */\nexport function cloneObject<T>(obj: T): T {\n  return JSON.parse(JSON.stringify(obj));\n}\n/**\n * like Array.map\n * @param obj\n * @param handler\n * @returns\n */\nexport function objectMap(\n  obj: object,\n  handler: (value: any, key: string, index: number) => any\n): object {\n  const r = {};\n  let i = 0;\n  for (const key in obj) {\n    r[key] = handler(obj[key], key, i);\n    i++;\n  }\n  return r;\n}\n\nexport function objectOnly(obj: object, keys: string[]): object {\n  let keysSet = new Set(keys);\n  const r = {};\n  keysSet.forEach((key) => {\n    r[key] = obj[key];\n  });\n  return r;\n}\n\nexport function objectExcept(obj: object, keys: string[]): object {\n  let keysSet = new Set(keys);\n  const r = {};\n  for (const key in obj) {\n    if (!keysSet.has(key)) {\n      r[key] = obj[key];\n    }\n  }\n  return r;\n}\n\n// loop for Array, Object, NodeList, String\nexport type IterateAllOptions = {\n  reverse?: boolean;\n  exclude?: (\n    info: { value: any; index: number } | { value: any; key: string }\n  ) => boolean;\n};\nexport function* iterateAll<T>(\n  val: string | any[] | object | NodeList | HTMLCollection,\n  opt: IterateAllOptions = {}\n): Generator<{ value: T; index?: number; key?: string }> {\n  // opt: {reverse, exclude}\n  if (!opt.reverse) {\n    // @ts-ignore\n    if (val.length != null) {\n      // @ts-ignore\n      for (let i = 0; i < val.length; i++) {\n        const info = { value: val[i], index: i };\n        if (!opt.exclude || !opt.exclude(info)) {\n          yield info;\n        }\n      }\n    } else if (isObject(val)) {\n      for (const key of Object.keys(val)) {\n        const info = { value: val[key], key };\n        if (!opt.exclude || !opt.exclude(info)) {\n          yield info;\n        }\n      }\n    } else {\n      throw \"Unsupported type\";\n    }\n  } else {\n    // @ts-ignore\n    if (val.length != null) {\n      // @ts-ignore\n      for (let i = val.length - 1; i >= 0; i--) {\n        const info = { value: val[i], index: i };\n        if (!opt.exclude || !opt.exclude(info)) {\n          yield info;\n        }\n      }\n    } else if (isObject(val)) {\n      const keys = Object.keys(val);\n      keys.reverse();\n      for (const key of keys) {\n        const info = { value: val[key], key };\n        if (!opt.exclude || !opt.exclude(info)) {\n          yield info;\n        }\n      }\n    } else {\n      throw \"Unsupported type\";\n    }\n  }\n}\n\nexport type FindAllCallback = (value: any, index: number) => void | boolean;\n/**\n * like Array.find\n * @param list\n * @param callback\n * @param options\n * @returns\n */\nexport function findAll(\n  list: Parameters<typeof iterateAll>[0],\n  callback: FindAllCallback,\n  options?: Parameters<typeof iterateAll>[1]\n) {\n  for (const { value, index } of iterateAll(list, options)) {\n    if (callback(value, index)) {\n      return value as HTMLElement;\n    }\n  }\n}\n\n// example: objectGet(window, 'document.body.children.0') . source: http://stackoverflow.com/questions/8817394/javascript-get-deep-value-from-object-by-passing-path-to-it-as-string\n// 例: objectGet(window, 'document.body.children.0') . 参考: http://stackoverflow.com/questions/8817394/javascript-get-deep-value-from-object-by-passing-path-to-it-as-string\n/**\n * example: dotGet(window, 'document.body.children.0')\n * @param obj\n * @param path\n * @param throwError\n * @returns\n */\nexport function dotGet(\n  obj: object,\n  path: string | string[],\n  throwError?: boolean\n): any {\n  const paths = isArray(path) ? path : path.split(\".\");\n  let current = obj;\n  try {\n    for (const key of paths) {\n      current = current[key];\n    }\n  } catch (e) {\n    if (throwError) {\n      throw \"Path does not exist\";\n    }\n  }\n  return current;\n}\n\n/**\n * example: dotSet(window, 'document.body.children.0', vaue)\n */\nexport function dotSet(obj: object, path: string | string[], value: any) {\n  const parts = isArray(path) ? path : path.split(\".\"); // Split the path string into parts\n  let current = obj; // Current object being processed\n\n  // Iterate through all parts except the last one\n  // 遍历路径的每一部分（除了最后一部分）\n  for (let i = 0; i < parts.length - 1; i++) {\n    const part = parts[i]; // Current path part\n\n    // Prevent prototype pollution by checking sensitive keys\n    // 检查是否尝试污染原型链\n    if (\n      part === \"__proto__\" ||\n      part === \"prototype\" ||\n      part === \"constructor\"\n    ) {\n      throw new Error(\"Prototype pollution attempt detected\"); // Prototype pollution detected\n    }\n\n    // Create nested objects if they do not exist\n    if (!current[part]) {\n      current[part] = {}; // Create a new empty object\n    }\n\n    // Move to the next level\n    current = current[part];\n  }\n\n  // Handle the last part of the path\n  const lastPart = parts[parts.length - 1];\n  // Check again for prototype pollution in the last part\n  // 再次检查最后一部分是否尝试污染原型链\n  if (\n    lastPart === \"__proto__\" ||\n    lastPart === \"prototype\" ||\n    lastPart === \"constructor\"\n  ) {\n    throw new Error(\"Prototype pollution attempt detected\"); // Prototype pollution detected\n  }\n\n  // Set the final value\n  current[lastPart] = value; // Assign the value to the target path\n}\n\n/**\n * try to delete obj[prop]\n * @param obj\n * @param prop\n * @returns\n */\nexport function unset(obj: object, prop: string) {\n  try {\n    delete obj[prop];\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport function assignIfNoKey(obj: object, key: string, val: any) {\n  if (!obj.hasOwnProperty(key)) {\n    obj[key] = val;\n  }\n}\nexport function assignIfKeyNull(obj: object, key: string, val: any) {\n  if (obj[key] == null) {\n    obj[key] = val;\n  }\n}\n/**\n * Assign if value different. For assign sensitive, such as Vue.watch.\n * @param obj\n * @param key\n * @param val\n */\nexport function assignIfDiff(obj: object, key: string, val: any) {\n  if (obj[key] !== val) {\n    obj[key] = val;\n  }\n}\nexport function objectAssignIfNoKey<T extends object>(obj1: T, obj2: object) {\n  Object.keys(obj2).forEach((key) => {\n    assignIfNoKey(obj1, key, obj2[key]);\n  });\n  return obj1;\n}\nexport function objectAssignIfKeyNull<T extends object>(obj1: T, obj2: object) {\n  Object.keys(obj2).forEach((key) => {\n    assignIfKeyNull(obj1, key, obj2[key]);\n  });\n  return obj1;\n}\nexport function objectAssignIfDiff<T extends object>(obj1: T, obj2: object) {\n  Object.keys(obj2).forEach((key) => {\n    assignIfDiff(obj1, key, obj2[key]);\n  });\n  return obj1;\n}\n\nexport function withoutUndefined<T extends object>(obj: T) {\n  // @ts-ignore\n  const r: T = {};\n  Object.keys(obj).forEach((key) => {\n    if (obj[key] !== undefined) {\n      r[key] = obj[key];\n    }\n  });\n  return r;\n}\n\n/**\n * proxy a property to another key of this or another object\n * @param targetObj\n * @param targetKey\n * @param sourceObj\n * @param sourceKey\n */\nexport function objectDefineProxyProperty(\n  targetObj: object,\n  targetKey: string,\n  sourceObj: object,\n  sourceKey: string\n) {\n  const info = Object.getOwnPropertyDescriptor(sourceObj, sourceKey);\n  Object.defineProperty(targetObj, targetKey, {\n    get() {\n      return sourceObj[sourceKey];\n    },\n    set(value) {\n      sourceObj[sourceKey] = value;\n    },\n    configurable: true,\n    enumerable: info.enumerable,\n  });\n}\n\nexport type MapObjectTreeHandler = (\n  value: any,\n  key: string | number,\n  parent: object | any[],\n  newParent: object | any[]\n) =>\n  | void\n  | null\n  | undefined\n  | {\n      key?: string;\n      delete?: boolean;\n      value?: any;\n      skip?: boolean; // skip children\n      stop?: boolean;\n    };\n/**\n * walk object and change key, value, delete key. return cloned new object.\n * 深度遍历对象, 可以改变key, value, 删除key. 返回克隆的新对象.\n * @param obj\n * @param handler\n * return null: don't change anything\n * return {delete: true}: delete\n * return {key: newKey}: change key\n * return {value: newValue}: change value\n * return {skip: true}: skip children\n * return {stop: true}: stop\n * @param limit to prevent circular reference.\n * @returns\n */\nexport function mapObjectTree(\n  obj: object,\n  handler: MapObjectTreeHandler,\n  limit = 10000\n): object {\n  let r;\n  let count = 0;\n  const stack = [{ value: obj }];\n  while (stack.length > 0) {\n    if (count >= limit) {\n      throw `mapObjectTree: limit(${limit}) reached, object may has circular reference`;\n    }\n    count++;\n    // @ts-ignore\n    const { value, key, parent, newParent } = stack.shift();\n    const t = handler(value, key, parent, newParent);\n    const assign = (value, key, canPush) => {\n      if (isArray(value)) {\n        value = [];\n      } else if (isObject(value)) {\n        value = {};\n      }\n      if (parent) {\n        if (isArray(newParent) && canPush) {\n          newParent.push(value);\n        } else {\n          newParent[key] = value;\n        }\n      } else {\n        r = value;\n      }\n      // value may changed\n      return value;\n    };\n    let newVal, val, toDelete, stop, skip;\n    if (!t) {\n      // no change\n      val = value;\n      // @ts-ignore\n      newVal = assign(value, key);\n    } else {\n      const { key: key2, value } = t;\n      val = value;\n      // @ts-ignore\n      if (t.delete || key2 === false) {\n        // del\n        toDelete = true;\n      } else if (key2 == null) {\n        // don't change key\n        newVal = assign(value, key, true);\n      } else if (t.hasOwnProperty(\"value\")) {\n        // @ts-ignore\n        newVal = assign(value, key2);\n      }\n      ({ stop, skip } = t);\n    }\n    if (toDelete) {\n      continue;\n    }\n    if (skip) {\n      continue;\n    }\n    if (stop) {\n      break;\n    }\n    if (isArray(val)) {\n      const len = val.length;\n      for (let i = 0; i < len; i++) {\n        // @ts-ignore\n        stack.push({ value: val[i], key: i, parent: val, newParent: newVal });\n      }\n    } else if (isObject(val)) {\n      Object.keys(val).forEach((key) => {\n        // @ts-ignore\n        stack.push({ value: val[key], key, parent: val, newParent: newVal });\n      });\n    }\n  }\n  return r;\n}\n\n/**\n * [{id: 1}, {id: 2}] to {'1':{id: 1}, '2': {id: 2}}\n * @param arr\n * @param idKey\n * @returns\n */\nexport function mapObjects<T>(\n  arr: T[],\n  idKey: string | ((item: T, index: number) => string)\n): { [key: string]: T } {\n  const r = {};\n  const len = arr.length;\n  for (let i = 0; i < len; i++) {\n    const item = arr[i];\n    // @ts-ignore\n    const id = isFunction(idKey) ? idKey(item, i) : item[idKey];\n    r[id] = item;\n  }\n  return r;\n}\n\n/**\n * example: pairRows(users, userProfiles, 'id', 'user_id')\n * @param rows1\n * @param rows2\n * @param key1\n * @param key2\n * @returns [{row1|null, row2|null},...]\n */\nexport function joinRows<T, Y>(\n  rows1: T[],\n  rows2: Y[],\n  key1: string | ((row: T, index: number) => any),\n  key2?: string,\n  ignoreUnmatched?: boolean\n): [T | null, Y | null][] {\n  if (key2 == null) {\n    // @ts-ignore\n    key2 = key1;\n  }\n  const m1 = new Map<unknown, T>();\n  const m2 = new Map<unknown, Y>();\n  const r = [];\n  rows2.forEach((row, index) => {\n    // @ts-ignore\n    const key = typeof key2 === \"function\" ? key2(row, index) : row[key2];\n    m2.set(key, row);\n  });\n  const usedRows2 = new Set();\n  rows1.forEach((row, index) => {\n    // @ts-ignore\n    const key = typeof key1 === \"function\" ? key1(row, index) : row[key1];\n    m1.set(key, row);\n    let row2 = m2.has(key) ? m2.get(key) : null;\n    if (m2.has(key) || !ignoreUnmatched) {\n      r.push([row, row2]);\n      usedRows2.add(row2);\n    }\n  });\n  if (!ignoreUnmatched) {\n    rows2.forEach((row, index) => {\n      // @ts-ignore\n      const key = typeof key2 === \"function\" ? key2(row, index) : row[key2];\n      if (!usedRows2.has(row)) {\n        r.push([null, row]);\n      }\n    });\n  }\n  return r;\n}\n\nexport type TreeDataPath = number[];\nexport type WalkTreeDataHandler<T> = (\n  node: T,\n  index: number,\n  parent: T | null,\n  path: TreeDataPath\n) => void | false | \"skip children\" | \"skip siblings\";\nexport type WalkTreeDataOptions = {\n  childrenKey?: string;\n  reverse?: boolean;\n  childFirst?: boolean;\n};\n/**\n * walk tree data by with depth first search. tree data example: `[{children: [{}, {}]}]`\n * 深度优先遍历树形数据. 树形数据示例: `[{children: [{}, {}]}]`\n * @param obj\n * @param handler\n * @param opt\n */\nexport function walkTreeData<T>(\n  obj: T | T[],\n  handler: WalkTreeDataHandler<T>,\n  opt: WalkTreeDataOptions = {}\n) {\n  opt = objectAssignIfNoKey(\n    { ...opt },\n    {\n      childrenKey: \"children\",\n    }\n  );\n  const { childrenKey } = opt;\n  const rootChildren = isArray(obj) ? obj : [obj];\n  //\n  class StopException {}\n  const func = (children, parent, parentPath) => {\n    if (opt.reverse) {\n      children = children.slice();\n      children.reverse();\n    }\n    const len = children.length;\n    for (let i = 0; i < len; i++) {\n      const item = children[i];\n      const index = opt.reverse ? len - i - 1 : i;\n      const path = parentPath ? [...parentPath, index] : [];\n      let childReturn;\n      if (opt.childFirst) {\n        if (item[childrenKey] != null) {\n          childReturn = func(item[childrenKey], item, path);\n        }\n      }\n      const r = handler(item, index, parent, path);\n      if (r === false) {\n        // stop\n        throw new StopException();\n      } else if (r === \"skip children\") {\n        continue;\n      } else if (r === \"skip siblings\") {\n        break;\n      }\n      if (!opt.childFirst) {\n        if (item[childrenKey] != null) {\n          func(item[childrenKey], item, path);\n        }\n      }\n    }\n  };\n  try {\n    func(rootChildren, null, isArray(obj) ? [] : null);\n  } catch (e) {\n    if (e instanceof StopException) {\n      // stop\n    } else {\n      throw e;\n    }\n  }\n}\nexport type TreeDataNodeInfo<T> = {\n  node: T;\n  index: number;\n  parent: T | null;\n  path: TreeDataPath;\n};\n/**\n * like Array.find\n * @param obj\n * @param handler return true when found.\n * @param opt\n * @returns\n */\nexport function findInfoInTreeData<T>(\n  obj: T | T[],\n  handler: FindTreeDataHandler<T>,\n  opt: FindTreeDataOptions = {}\n): TreeDataNodeInfo<T> | undefined {\n  let r: TreeDataNodeInfo<T>;\n  walkTreeData(\n    obj,\n    (...args) => {\n      if (handler(...args)) {\n        r = {\n          node: args[0],\n          index: args[1],\n          parent: args[2],\n          path: args[3],\n        };\n        return false;\n      }\n    },\n    opt\n  );\n  return r;\n}\n\n/**\n * like Array.find\n * @param obj\n * @param handler return true when found.\n * @param opt\n * @returns\n */\nexport function findTreeData<T>(\n  obj: T | T[],\n  handler: FindTreeDataHandler<T>,\n  opt: FindTreeDataOptions = {}\n): T | undefined {\n  const r = findInfoInTreeData(obj, handler, opt);\n  return r?.node;\n}\nexport type FindTreeDataHandler<T> = ReplaceReturnType<\n  WalkTreeDataHandler<T>,\n  any\n>;\nexport type FindTreeDataOptions = WalkTreeDataOptions;\n\nexport function cloneTreeData<T>(\n  root: T,\n  options?: { childrenKey?: string; nodeHandler?: CloneTreeNodeHandler<any> }\n) {\n  const opt: typeof options = {\n    childrenKey: \"children\",\n  };\n  if (options) {\n    Object.assign(opt, options);\n  }\n  const { childrenKey, nodeHandler } = opt;\n  const td = new TreeData();\n  td.childrenKey = childrenKey;\n  walkTreeData(\n    root,\n    (node, index, parent, path) => {\n      let newNode = Object.assign({}, node);\n      if (newNode[childrenKey]) {\n        newNode[childrenKey] = [];\n      }\n      if (nodeHandler) {\n        newNode = nodeHandler(newNode, { oldNode: node, index, parent, path });\n      }\n      td.set(path, newNode);\n    },\n    { childrenKey }\n  );\n  return td.data as T;\n}\n\nexport type CloneTreeNodeHandler<T> = (\n  node: T,\n  info: {\n    oldNode: T;\n    index: number;\n    parent: T | null;\n    path: TreeDataPath;\n  }\n) => T;\n\n// tree data helpers\nexport class TreeData<Node> {\n  data: Node | Node[];\n  childrenKey = \"children\";\n  // data = null;\n  constructor(data: Node | Node[] = []) {\n    this.data = data;\n  }\n  get rootChildren(): Node[] {\n    const { childrenKey } = this;\n    const { data } = this;\n    return isArray(data) ? data : data[childrenKey];\n  }\n  *iteratePath(\n    path: TreeDataPath,\n    opt: { reverse?: boolean } = {}\n  ): IterableIterator<{ path: TreeDataPath; node: Node }> {\n    const { childrenKey, rootChildren } = this;\n    if (!opt.reverse) {\n      let prevPath: number[] = [];\n      let prevNode;\n      let prevChildren = rootChildren;\n      for (const index of path) {\n        const currentPath = [...prevPath, index];\n        const currentNode = prevChildren[index];\n        yield { path: currentPath, node: currentNode };\n        prevPath = currentPath;\n        prevNode = currentNode;\n        prevChildren = currentNode[childrenKey];\n      }\n    } else {\n      const list = [...this.iteratePath(path, { ...opt, reverse: false })];\n      list.reverse();\n      for (const { path: path0, node } of list) {\n        const path = <TreeDataPath>path0;\n        yield { path, node };\n      }\n    }\n  }\n  getFamily(path: TreeDataPath) {\n    const all: Node[] = [];\n    for (const { node } of this.iteratePath(path)) {\n      all.push(node);\n    }\n    return all;\n  }\n  get(path: TreeDataPath): Node {\n    return arrayLast(this.getFamily(path));\n  }\n  getParentAndIndex(path: TreeDataPath) {\n    const parentPath = path.slice();\n    const index = parentPath.pop();\n    return { parent: this.get(parentPath), index, parentPath };\n  }\n  getParent(path: TreeDataPath) {\n    return this.getParentAndIndex(path).parent;\n  }\n  set(path: TreeDataPath, node: Node) {\n    if (path == null || path.length === 0) {\n      this.data = node;\n    } else {\n      const { childrenKey } = this;\n      let { rootChildren } = this;\n      const { parent, index } = this.getParentAndIndex(path);\n      let parentChildren;\n      if (path.length === 1) {\n        // fix data\n        if (!rootChildren) {\n          if (this.data) {\n            this.data[childrenKey] = [];\n          } else {\n            this.data = [];\n          }\n        }\n        parentChildren = rootChildren;\n      } else {\n        if (!parent[childrenKey]) {\n          parent[childrenKey] = [];\n        }\n        parentChildren = parent[childrenKey];\n      }\n      parentChildren[index] = node;\n    }\n  }\n  delete(path: TreeDataPath): Node | undefined {\n    const { childrenKey, rootChildren } = this;\n    const { parent, index } = this.getParentAndIndex(path);\n    const parentChildren =\n      path.length === 1 ? rootChildren : parent[childrenKey];\n    const node = parentChildren[index];\n    parentChildren.splice(index, 1);\n    return node;\n  }\n  walk(handler: WalkTreeDataHandler<Node>, opt?: { reverse?: boolean }) {\n    const { childrenKey, data } = this;\n    // @ts-ignore\n    return walkTreeData(data, handler, childrenKey, opt);\n  }\n  clone(\n    opt: {\n      nodeHandler?: CloneTreeNodeHandler<Node>;\n    } = {}\n  ) {\n    cloneTreeData;\n    return (\n      cloneTreeData(this.data),\n      withoutUndefined({\n        childrenKey: this.childrenKey,\n        nodeHandler: opt.nodeHandler || undefined,\n      })\n    );\n  }\n}\n\n// ## function\n// ## 函数\n\n/**\n * if it is function, return result, else return it directly.\n * @param valueOrGetter\n * @param args\n * @returns\n */\nexport function resolveValueOrGettter(valueOrGetter, args = []) {\n  if (isFunction(valueOrGetter)) {\n    return valueOrGetter(...args);\n  } else {\n    return valueOrGetter;\n  }\n}\n\n/**\n * add executed count as first argument of func\n * 增加执行次数作为方法的第一个参数\n * @param func\n * @returns\n */\nexport function executeWithCount<T>(func: T) {\n  let count = 0;\n  function wrapper(...args) {\n    // @ts-ignore\n    return func.call(this, count++, ...args);\n  }\n  return wrapper as OmitFirstParameter<T>;\n}\n\n/**\n * (getVal, handler) => update . when execute update, call getVal and check if changed.\n * (getVal, handler) => update . 执行update时, 调用getVal并检查结果是否改变.\n * @param getVal\n * @param handler\n * @returns\n */\nexport function watchChange<T>(\n  getVal: ReplaceReturnType<OmitFirstParameter<T>, any>,\n  handler: T\n) {\n  let oldVal;\n  const update = (...args) => {\n    // @ts-ignore\n    const newVal = getVal(...args);\n    if (oldVal !== newVal) {\n      // @ts-ignore\n      handler(newVal, ...args);\n    }\n    oldVal = newVal;\n  };\n  return update as OmitFirstParameter<T>;\n}\n\nexport function debounceTrailing<T>(action: T, wait = 0) {\n  let t;\n  let lastArgs; // when trailing, use last args\n  let resolves = [];\n  let rejects = [];\n  const wrappedAction = function (...args) {\n    return new Promise((resolve, reject) => {\n      resolves.push(resolve);\n      rejects.push(reject);\n      //\n      lastArgs = args;\n      if (t) {\n        clearTimeout(t);\n      }\n      t = setTimeout(() => {\n        // @ts-ignore\n        const result = action.call(this, ...lastArgs);\n        t = null;\n        resolves.forEach((resolve) => resolve(result));\n        resolves = [];\n        rejects = [];\n      }, wait);\n    });\n  };\n  const stop = () => {\n    if (t) {\n      clearTimeout(t);\n      t = null;\n    }\n    resolves = [];\n    rejects.forEach((reject) => reject());\n    rejects = [];\n  };\n  // @ts-ignore\n  return { action: wrappedAction as T, stop };\n}\n\nexport function debounceImmediate<T>(action: T, wait = 0) {\n  let t;\n  let delaying;\n  let result;\n  const wrappedAction = function (...args) {\n    return new Promise((resolve, reject) => {\n      if (delaying) {\n        resolve(result);\n      } else {\n        delaying = true;\n        // @ts-ignore\n        result = action.call(this, ...lastArgs);\n        resolve(result);\n        t = setTimeout(() => {\n          t = null;\n          delaying = false;\n          result = null;\n        }, wait);\n      }\n    });\n  };\n  const stop = () => {\n    if (t) {\n      clearTimeout(t);\n      t = null;\n    }\n    delaying = false;\n  };\n  // @ts-ignore\n  return { action: wrappedAction as T, stop };\n}\n\n/**\n * the returned function only accept one argument\n * @param funcs\n * @returns\n */\nexport function joinFunctionsByResult(funcs: any[]) {\n  let wrappedFunc = funcs[0];\n  for (let i = 1; i < funcs.length; i++) {\n    wrappedFunc = join2func(wrappedFunc, funcs[i]);\n  }\n  return wrappedFunc;\n  function join2func(func1, func2) {\n    return function (arg) {\n      const result1 = func1(arg);\n      return func2(result1);\n    };\n  }\n}\n\n/**\n * apply finally function to a function, execute it after target return, event it error\n * 在目标方法结束或出错后执行另一方法\n * @param func\n * @param finallyFunc\n * @returns\n */\nexport function applyFinally<T extends Function, Y extends Function>(\n  func: T,\n  finallyFunc: Y\n) {\n  const wrapped = function (...args) {\n    let r, e;\n    try {\n      r = func(...args);\n    } catch (error) {\n      e = error;\n    } finally {\n      finallyFunc();\n    }\n    if (!e) {\n      return r;\n    } else {\n      throw e;\n    }\n  };\n  // @ts-ignore\n  return wrapped as T;\n}\n\n/**\n * must pass arguments to `next` manually\n * @param funcs\n * @returns\n */\nexport function joinFunctionsByNext(funcs: any[]) {\n  let next = () => {};\n  for (const { value: func } of iterateAll(funcs, { reverse: true })) {\n    const currentNext = next;\n    next = wrapFuncWithNext(func, currentNext);\n  }\n  return next;\n  function wrapFuncWithNext(func, next) {\n    return function (...args) {\n      return func(next, ...args);\n    };\n  }\n}\n\n/**\n * wrap function, bind context(this).\n * @param action\n * @param context\n * @returns\n */\nexport function bindContext<T extends Function>(action: T, context: any): T {\n  const wrapped = function (...args: any) {\n    return action.apply(context, args);\n  };\n  // @ts-ignore\n  return wrapped;\n}\n\n/**\n * Cache function return by arguments\n * @param func\n * @returns\n */\nexport function cacheFunction<T extends Function>(\n  func: T,\n  options: { capacity?: number } = {}\n) {\n  const cachedArgsArr = [];\n  let map: ArrayKeyMap<any>;\n  const defaultValue = {};\n  let noArgsCache = defaultValue;\n  const wrapped = function (...args: any[]) {\n    if (args.length === 0) {\n      if (noArgsCache === defaultValue) {\n        noArgsCache = func();\n      }\n      return noArgsCache;\n    }\n    if (!map) {\n      map = new ArrayKeyMap();\n    }\n    if (!map.has(args)) {\n      map.set(args, func(...args));\n      if (options.capacity != null) {\n        cachedArgsArr.push(args);\n        const removed = cachedArgsArr.splice(\n          0,\n          cachedArgsArr.length - options.capacity\n        );\n        for (const args of removed) {\n          map.delete(args);\n        }\n      }\n    }\n    return map.get(args);\n  };\n  const clearCache = () => {\n    map = null;\n    cachedArgsArr.splice(0, cachedArgsArr.length);\n  };\n  return {\n    // @ts-ignore\n    action: wrapped as T,\n    clearCache,\n  };\n}\n\n// ## promise\n\n/**\n * execute promise in sequence\n * @param getters\n * @param concurrent\n * @returns\n */\nexport function executePromiseGetters(getters: (() => any)[], concurrent = 1) {\n  let stopped;\n  const promise = new Promise(async function (resolve, reject) {\n    const chunks = splitArray(getters, concurrent);\n    const promises = [];\n    for (const chunk of chunks) {\n      const chunkPromises = chunk.map((v) => v());\n      promises.push(...chunkPromises);\n      await Promise.all(chunkPromises);\n      if (stopped) {\n        break;\n      }\n    }\n    Promise.all(promises).then((...args) => {\n      resolve(...args);\n    });\n  });\n  return {\n    promise,\n    stop() {\n      stopped = true;\n    },\n  };\n}\n\nexport function promiseTimeout<T>(promise: Promise<T>, timeout: number) {\n  return new Promise((resolve, reject) => {\n    let t, rejected;\n    promise.then(\n      (...args) => {\n        clearTimeout(t);\n        resolve(...args);\n      },\n      (...args) => {\n        if (!rejected) {\n          clearTimeout(t);\n          reject(...args);\n        }\n      }\n    );\n    t = setTimeout(() => {\n      rejected = true;\n      const e = new Error(\"Promise timeout!\");\n      e.name = \"timeout\";\n      reject(e);\n    }, timeout);\n  });\n}\n\nexport function promisePin<T, E>() {\n  let resolve: (arg: T) => void, reject: (error: E) => void;\n  const promise = new Promise<T>((resolve2, reject2) => {\n    resolve = resolve2;\n    reject = reject2;\n  });\n  return { promise, resolve, reject };\n}\n\n/**\n * warp continuous Promise method, such as mousemove handler\n * @param method\n * @param opt. strategy 'last': the wrapped method return empty if skipped\n */\nexport function continuous<\n  T extends (\n    info: { count: number; currentCount: { value: number } },\n    ...args: any[]\n  ) => any\n>(method: T, opt?: { strategy: \"every\" | \"last\"; resetCount?: boolean }) {\n  // default options\n  if (!opt) {\n    // @ts-ignore\n    opt = {};\n  }\n  objectAssignIfNoKey(opt, {\n    strategy: \"every\",\n  });\n  //\n  type Args = ParametersWithoutFirst<T>;\n  const queue: {\n    count: number;\n    args: Args;\n    done: ReturnType<typeof promisePin>;\n    skipped?: boolean;\n  }[] = [];\n  let working = false;\n  const currentCount = { value: 0 };\n  return async function (...args: Args) {\n    currentCount.value++;\n    const count = currentCount.value;\n    const done = promisePin();\n    queue.push({ count, args, done });\n    if (!working) {\n      working = true;\n      task();\n    }\n    return done.promise as Promise<ReturnType<T> | void>;\n  };\n  async function task() {\n    if (opt.strategy === \"every\") {\n      while (queue.length > 0) {\n        const { count, args, done } = queue.shift();\n        let r = method({ count, currentCount }, ...args);\n        try {\n          await r;\n        } catch (error) {\n        } finally {\n          done.resolve(r);\n        }\n      }\n    } else if (opt.strategy === \"last\") {\n      let currentIndex = -1;\n      while (\n        queue.length > 0 &&\n        (currentIndex === -1 || queue.length - 1 > currentIndex)\n      ) {\n        currentIndex = queue.length - 1;\n        const item = queue[currentIndex];\n        const { count, args, done } = item;\n        let r = method({ count, currentCount }, ...args);\n        try {\n          await r;\n        } catch (error) {\n        } finally {\n          done.resolve(r);\n          item.skipped = false;\n        }\n      }\n      for (let index = currentIndex - 1; index >= 0; index--) {\n        const item = queue[index];\n        // skip before last\n        if (!item || item.skipped != null) {\n          continue;\n        } else {\n          item.skipped = true;\n          // @ts-ignore\n          item.done.resolve();\n        }\n      }\n      queue.splice(0, queue.length);\n    }\n    if (opt.resetCount) {\n      currentCount.value = 0;\n    }\n    working = false;\n  }\n}\nexport const promiseContinuous = continuous;\n\n// ## url\n\nexport function getUrlParam(par: string) {\n  // 获取当前URL\n  var local_url = document.location.href;\n  // 获取要取得的get参数位置\n  var get = local_url.indexOf(par + \"=\");\n  if (get == -1) {\n    return false;\n  }\n  // 截取字符串\n  var get_par = local_url.slice(par.length + get + 1);\n  // 判断截取后的字符串是否还有其他get参数\n  var nextPar = get_par.indexOf(\"&\");\n  if (nextPar != -1) {\n    get_par = get_par.slice(0, nextPar);\n  }\n  return get_par;\n}\n\nexport function pathJoin(p1: string, p2: string) {\n  if (!p2) {\n    return p1;\n  }\n  if (!p1 || p2.match(/^\\w+:/)) {\n    return p2;\n  }\n  if (p1 && !p1.endsWith(\"/\")) {\n    p1 = p1 + \"/\";\n  }\n  if (p1 && p2.startsWith(\"/\")) {\n    p2 = p2.substring(1);\n  }\n  return p1 + p2;\n}\n\n// ## dom\n\n/**\n * return NodeList if there are multiple top-level nodes\n * @param htmlString\n * @returns\n */\nexport function createElementFromHTML(htmlString: string) {\n  var div = document.createElement(\"div\");\n  div.innerHTML = htmlString.trim();\n  if (div.childNodes.length > 1) {\n    return div.childNodes;\n  } else {\n    return div.childNodes[0];\n  }\n}\n\n/**\n * NOT RECOMMEND. Use Node.contains instead.\n */\nexport function isDescendantOf(el: Node, parent: Node) {\n  while (true) {\n    if (el.parentNode == null) {\n      return false;\n    } else if (el.parentNode === parent) {\n      return true;\n    } else {\n      el = el.parentNode;\n    }\n  }\n}\n\nexport function pointIn(x: number, y: number, element: Element | Node) {\n  const rect = getBoundingClientRect(element as Element);\n  return (\n    x >= rect.x &&\n    x <= rect.x + rect.width &&\n    y >= rect.y &&\n    y <= rect.y + rect.height\n  );\n}\n\nexport function removeEl(el: Node | Node) {\n  if (el.parentNode !== null) {\n    return el.parentNode.removeChild(el);\n  }\n}\n\n/**\n * get page root scroll(body or documentElement). refer: https://stackoverflow.com/questions/871399/cross-browser-method-for-detecting-the-scrolltop-of-the-browser-window\n * @returns\n */\nexport function getScroll() {\n  if (typeof pageYOffset != \"undefined\") {\n    //most browsers except IE before #9\n    return {\n      top: pageYOffset,\n      left: pageXOffset,\n    };\n  } else {\n    var B = document.body; //IE 'quirks'\n    var D = document.documentElement; //IE with doctype\n    D = D.clientHeight ? D : B;\n    return {\n      top: D.scrollTop,\n      left: D.scrollLeft,\n    };\n  }\n}\n\n/**\n * relative to page root element(document.documentElement). refer: https://gist.github.com/aderaaij/89547e34617b95ac29d1\n * 相对于页面根元素.(document.documentElement)\n * @param el\n * @returns\n */\nexport function getOffset(el: Element) {\n  const rect = getBoundingClientRect(el);\n  const t = getBoundingClientRect(document.documentElement);\n\n  return {\n    x: rect.left - t.left,\n    y: rect.top - t.top,\n  };\n}\n\n/**\n * there is some trap in el.offsetParent, so use this func to fix\n * @param el\n * @returns\n */\nexport function getOffsetParent(el: HTMLElement) {\n  let offsetParent = el.offsetParent;\n  if (\n    !offsetParent ||\n    (offsetParent === document.body &&\n      getComputedStyle(document.body).position === \"static\")\n  ) {\n    offsetParent = document.body.parentElement;\n  }\n  return offsetParent as HTMLElement;\n}\n\n/**\n * get el current position. like jQuery.position. The position is relative to offsetParent viewport left top. it is for set absolute position, absolute position is relative to offsetParent viewport left top.\n * 相对于offsetParent可视区域左上角(el.offsetLeft或top包含父元素的滚动距离, 所以要减去). position一般用于设置绝对定位的情况, 而绝对定位就是以可视区域左上角为原点.\n * @param el\n * @returns\n */\nexport function getPosition(el: HTMLElement) {\n  const offsetParent = getOffsetParent(el);\n  const ps = { x: el.offsetLeft, y: el.offsetTop };\n  let parent = el;\n  while (true) {\n    parent = parent.parentElement;\n    if (parent === offsetParent || !parent) {\n      break;\n    }\n    ps.x -= parent.scrollLeft;\n    ps.y -= parent.scrollTop;\n  }\n  return ps;\n}\n\n/**\n * like jQuery.offset(x, y), but it just return cmputed position, don't update style\n * 类似 jQuery.offset的设置功能, 但是它只返回计算的position, 不改变元素样式.\n * @param el\n * @param of\n * @returns\n */\nexport function getPositionFromOffset(\n  el: HTMLElement,\n  of: { x: number; y: number }\n) {\n  const offsetParent = getOffsetParent(el);\n  const parentOf = getOffset(offsetParent);\n  return {\n    x: of.x - parentOf.x,\n    y: of.y - parentOf.y,\n  };\n}\n\n/**\n * relative to viewport. like position fixed. alias getViewportPosition\n * 相对于视口. 类似 position fixed. 别名 getViewportPosition\n * @param el\n * @returns\n */\nexport function getBoundingClientRect(el: Element) {\n  // refer: http://www.51xuediannao.com/javascript/getBoundingClientRect.html\n  let xy = el.getBoundingClientRect();\n  if (document.documentElement.clientTop > 0) {\n    const top = xy.top - document.documentElement.clientTop, //document.documentElement.clientTop 在IE67中始终为2，其他高级点的浏览器为0\n      bottom = xy.bottom,\n      left = xy.left - document.documentElement.clientLeft, //document.documentElement.clientLeft 在IE67中始终为2，其他高级点的浏览器为0\n      right = xy.right,\n      width = xy.width || right - left, //IE67不存在width 使用right - left获得\n      height = xy.height || bottom - top;\n    const x = left;\n    const y = top;\n    const json = { top, right, bottom, left, width, height, x, y };\n    xy = { ...json, toJSON: () => json };\n  }\n  return xy;\n}\n\n// refer [getBoundingClientRect](#getBoundingClientRect)\nexport const getViewportPosition = getBoundingClientRect;\nexport type ViewportPosition = ReturnType<typeof getViewportPosition>;\n\n/**\n * position fixed is not always related to viewport.\n * position fixed不总是相对于视口.\n * 参考/Check: https://developer.mozilla.org/en-US/docs/Web/CSS/position\n * @param el\n * @param viewportPosition\n */\nexport function viewportPositionToFixed(\n  el: Node,\n  viewportPosition: { x: number; y: number }\n) {\n  const div = document.createElement(\"div\");\n  Object.assign(div.style, {\n    position: \"fixed\",\n    visibility: \"hidden\",\n    top: \"0px\",\n    left: \"0px\",\n  });\n  insertAfter(div, el);\n  const divVP = getViewportPosition(div);\n  const offset = { x: 0 - divVP.x, y: 0 - divVP.y };\n  return {\n    x: viewportPosition.x + offset.x,\n    y: viewportPosition.x + offset.y,\n  };\n}\n\nexport function findParent<T extends Element>(\n  el: T,\n  callback: (parentEl: Element) => boolean | \"break\" | undefined | void,\n  opt: { withSelf?: boolean; until?: Element; withUntil?: boolean } = {}\n) {\n  let cur = opt && opt.withSelf ? el : el.parentElement;\n  while (cur) {\n    const shouldBreak = opt.until && cur === opt.until;\n    if (shouldBreak && !opt.withUntil) {\n      return;\n    }\n    const r = callback(cur);\n    if (r === \"break\") {\n      return;\n    } else if (r) {\n      return cur;\n    } else if (shouldBreak) {\n      return;\n    } else {\n      cur = cur.parentElement;\n    }\n  }\n}\n\nexport function backupAttr(el: Element, name: string) {\n  const key = `original_${name}`;\n  el[key] = el.getAttribute(name);\n}\n\nexport function restoreAttr(el: Element, name: string) {\n  const key = `original_${name}`;\n  const value = el[key];\n  if (value == null) {\n    el.removeAttribute(name);\n  } else {\n    el.setAttribute(name, value);\n  }\n}\n\n// source: http://youmightnotneedjquery.com/\nexport function hasClass(el: Element, className: string) {\n  if (el.classList) {\n    return el.classList.contains(className);\n  } else {\n    return new RegExp(\"(^| )\" + className + \"( |$)\", \"gi\").test(el.className);\n  }\n}\n\n/**\n * has all classNames\n * @param el\n * @param classNames\n */\nexport function hasClasses(el: Element, classNames: string[]) {\n  for (const className of classNames) {\n    if (!hasClass(el, className)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * has any class in classNames\n * @param el\n * @param classNames\n * @returns\n */\nexport function hasClassIn(el: Element, classNames: string[]) {\n  for (const className of classNames) {\n    if (hasClass(el, className)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n// source: http://youmightnotneedjquery.com/\nexport function addClass(el: Element, className: string | string[]) {\n  const t = toArrayIfNot(className);\n  for (const className of t) {\n    if (!hasClass(el, className)) {\n      if (el.classList) {\n        el.classList.add(className);\n      } else {\n        el.className += \" \" + className;\n      }\n    }\n  }\n}\n\n// source: http://youmightnotneedjquery.com/\nexport function removeClass(el: Element, className: string | string[]) {\n  const t = toArrayIfNot(className);\n  for (const className of t) {\n    if (el.classList) {\n      el.classList.remove(className);\n    } else {\n      el.className = el.className.replace(\n        new RegExp(\n          \"(^|\\\\b)\" + className.split(\" \").join(\"|\") + \"(\\\\b|$)\",\n          \"gi\"\n        ),\n        \" \"\n      );\n    }\n  }\n}\n\nexport function getElSizeEvenInvisible(el: HTMLElement) {\n  backupAttr(el, \"style\");\n  el.style.display = \"block\";\n  const t = getBoundingClientRect(el);\n  const size = {\n    width: t.width,\n    height: t.height,\n  };\n  restoreAttr(el, \"style\");\n  return size;\n}\n\n/**\n * [isOffsetInEl]\n * @param {Number} x\n * @param {Number} y\n * @param {Object} el HTML Element\n */\nexport function isOffsetInEl(x: number, y: number, el: HTMLElement) {\n  const offset = getOffset(el);\n  return (\n    offset.x <= x &&\n    offset.x + el.offsetWidth >= x &&\n    offset.y <= y &&\n    offset.y + el.offsetHeight >= y\n  );\n}\n\nexport function setElChildByIndex(el: Node, child: Node, index: number) {\n  // @ts-ignore\n  child.childComponentIndex = index;\n  const len = el.childNodes.length;\n  if (len === 0) {\n    el.appendChild(child);\n  } else if (index === 0) {\n    el.insertBefore(child, el.childNodes[0]);\n  } else {\n    const {\n      index: nearestIndex,\n      value: nearest,\n      greater,\n    } = binarySearch(\n      // @ts-ignore\n      el.childNodes,\n      (el) => {\n        return el[\"childComponentIndex\"] - index;\n      },\n      {\n        start: 0,\n        end: notGreaterThan(index, len - 1),\n        returnNearestIfNoHit: true,\n      }\n    );\n    if (greater) {\n      // @ts-ignore\n      el.insertBefore(child, nearest);\n    } else {\n      const next = el.childNodes[nearestIndex + 1];\n      if (next) {\n        el.insertBefore(child, next);\n      } else {\n        el.appendChild(child);\n      }\n    }\n  }\n}\n\n/**\n * listen event on element\n * @param el\n * @param name\n * @param handler\n * @param options\n */\nexport function on<T extends Event>(\n  el: Node | Window | Document,\n  name: string,\n  handler: (event: T) => void,\n  options?: boolean | AddEventListenerOptions\n) {\n  if (el.addEventListener) {\n    // 所有主流浏览器，除了 IE 8 及更早 IE版本\n    el.addEventListener(name, handler, options);\n    // @ts-ignore\n  } else if (el.attachEvent) {\n    // IE 8 及更早 IE 版本\n    // @ts-ignore\n    el.attachEvent(`on${name}`, handler, options);\n  }\n}\n\n/**\n * cancel event lisitener on element\n * @param el\n * @param name\n * @param handler\n * @param options\n */\nexport function off<T extends Event>(\n  el: Node | Window | Document,\n  name: string,\n  handler: (event: T) => void,\n  options?: boolean | AddEventListenerOptions\n) {\n  if (el.removeEventListener) {\n    // 所有主流浏览器，除了 IE 8 及更早 IE版本\n    el.removeEventListener(name, handler, options);\n    // @ts-ignore\n  } else if (el.detachEvent) {\n    // IE 8 及更早 IE 版本\n    // @ts-ignore\n    el.detachEvent(`on${name}`, handler, options);\n  }\n}\n\n/**\n * listen event on element once. return destroy function\n * @param el\n * @param name\n * @param handler\n * @param options\n * @returns destroy\n */\nexport function once<T extends Event>(\n  el: Node | Window | Document,\n  name: string,\n  handler: (event: T) => void,\n  options?: boolean | AddEventListenerOptions\n) {\n  const onceHandler = function (...args) {\n    // @ts-ignore\n    let r = handler.call(this, ...args); // prettier-ignore\n    destroy();\n    return r;\n  };\n  on(el, name, onceHandler, options);\n  let destroied = false;\n  const destroy = () => {\n    if (!destroied) {\n      off(el, name, onceHandler, options);\n    }\n    destroied = true;\n  };\n  return destroy;\n}\n\n/**\n * lisiten multi events, and can stop and resume them. start listening by default. start is alias for resume\n * @param info\n * @returns\n */\nexport function extendedListen(\n  info: [\n    element: Element | Window | Document,\n    name: string,\n    handler: (event: any) => void,\n    options?: boolean | AddEventListenerOptions\n  ][]\n) {\n  let destroyFuncs = [];\n  const listenAll = () => {\n    if (r.listening) {\n      return;\n    }\n    for (const item of info) {\n      on.apply(this, item);\n      const destroy = () => off.apply(this, item);\n      destroyFuncs.push(destroy);\n    }\n    r.listening = true;\n  };\n  const destroyAll = () => {\n    if (!r.listening) {\n      return;\n    }\n    for (const destroy of destroyFuncs) {\n      destroy();\n    }\n    destroyFuncs = [];\n    r.listening = false;\n  };\n  const r = {\n    listening: false,\n    stop: destroyAll,\n    resume: listenAll,\n    start: listenAll,\n  };\n  r.start();\n  return r;\n}\n\nexport function getImageSizeByUrl(url: string) {\n  const image = document.createElement(\"img\");\n  return new Promise<{ width: number; height: number }>(function (\n    resolve,\n    reject\n  ) {\n    on(image, \"load\", () => {\n      resolve({ width: image.width, height: image.height });\n    });\n    on(image, \"error\", (e) => {\n      reject(e);\n    });\n    image.src = url;\n  });\n}\n\nexport function elementsFromPoint(x: number, y: number): Element[] {\n  const args = [x, y];\n  const func =\n    document.elementsFromPoint ||\n    // @ts-ignore\n    document.msElementsFromPoint ||\n    elementsFromPoint;\n  return func.apply(document, args);\n  function elementsFromPoint(x, y) {\n    const parents = [];\n    let parent = void 0;\n    do {\n      if (parent !== document.elementFromPoint(x, y)) {\n        parent = document.elementFromPoint(x, y);\n        parents.push(parent);\n        parent.style.pointerEvents = \"none\";\n        parent[\"_pointerEvents_backup\"] = parent.style.pointerEvents;\n      } else {\n        parent = false;\n      }\n    } while (parent);\n    parents.forEach(function (parent) {\n      return (parent.style.pointerEvents = parent[\"_pointerEvents_backup\"]);\n    });\n    return parents;\n  }\n}\n\nexport function getOuterAttachedHeight(\n  el: Element,\n  opt: { margin?: boolean; border?: boolean } = {}\n) {\n  opt = {\n    margin: true,\n    border: true,\n    ...opt,\n  };\n  const stl = getComputedStyle(el);\n  let r = 0;\n  const arr = [];\n  if (opt.margin) {\n    arr.push(\"margin-top\", \"margin-bottom\");\n  }\n  if (opt.border) {\n    arr.push(\"border-top-width\", \"border-bottom-width\");\n  }\n  arr.forEach((key) => {\n    r += parseFloat(stl[key]);\n  });\n  return r;\n}\n\nexport function getOuterAttachedWidth(\n  el: Element,\n  opt: { margin?: boolean; border?: boolean } = {}\n) {\n  opt = {\n    margin: true,\n    border: true,\n    ...opt,\n  };\n  const stl = getComputedStyle(el);\n  let r = 0;\n  const arr = [];\n  if (opt.margin) {\n    arr.push(\"margin-left\", \"margin-right\");\n  }\n  if (opt.border) {\n    arr.push(\"border-left-width\", \"border-right-width\");\n  }\n  arr.forEach((key) => {\n    r += parseFloat(stl[key]);\n  });\n  return r;\n}\n/**\n * like jquery $(el).css(), but only can read\n * @param el\n * @param name\n * @returns\n */\nexport function css(el: Element, name: string): string | undefined {\n  const stl = getComputedStyle(el);\n  return stl[name];\n}\n\nexport function cssNumber(el: Element, name: string) {\n  return parseFloat(css(el, name));\n}\n\nexport function isScrollable(el: Element, direction: \"x\" | \"y\") {\n  const key = \"overflow\" + direction.toUpperCase();\n  const values = [\"auto\", \"scroll\", \"overlay\"];\n  if (el === document.scrollingElement) {\n    values.push(\"visible\");\n  }\n  return values.includes(css(el, key));\n}\n\n/**\n * scrollLeft, scrollRight, scrollTop, scrollBottom.\n * IMPORTANT! The min value of  scrollRight and scrollBottom may be a float less than 1, not zero.\n * 重要! scrollRight和scrollBottom的最小值可能是小于1的小数, 而不是0.\n * @param el\n * @param direction\n * @returns\n */\nexport function getScrollSpace(\n  el: Element,\n  direction: \"left\" | \"right\" | \"top\" | \"bottom\"\n) {\n  let space: number;\n  if (direction === \"left\") {\n    space = el.scrollLeft;\n  } else if (direction === \"top\") {\n    space = el.scrollTop;\n  } else {\n    if (direction === \"right\") {\n      space = el.scrollWidth - el.clientWidth - el.scrollLeft;\n    } else {\n      // bottom\n      space = el.scrollHeight - el.clientHeight - el.scrollTop;\n    }\n  }\n  return space;\n}\n\n/* scroll to a positon with duration\nfrom https://gist.github.com/andjosh/6764939\ninterface options{\n  x: number // nullable. don't scroll horizontally when null\n  y: number // nullable. don't scroll vertically when null\n  duration: number // default 0\n  element: Node // default is the top scrollable element.\n  beforeEveryFrame: (count: number) => boolean|void // call before requestAnimationFrame execution. return false to stop\n}\nreturn stop\n*/\nexport function scrollTo(options: {\n  x?: number;\n  y?: number;\n  duration?: number;\n  element?: Element;\n  beforeEveryFrame?: (count: number) => boolean | void; // return false to stop\n}) {\n  if (!options.element) {\n    options.element = document.scrollingElement || document.documentElement;\n  }\n  if (options.duration == null) {\n    options.duration = 0;\n  }\n  const { x, y, duration, element } = options;\n  let requestAnimationFrameId;\n  let count = 0;\n  const startY = element.scrollTop,\n    changeY = y - startY,\n    startX = element.scrollLeft,\n    changeX = x - startX,\n    startDate = +new Date(),\n    animateScroll = function () {\n      if (\n        options.beforeEveryFrame &&\n        options.beforeEveryFrame(count) === false\n      ) {\n        return;\n      }\n      const currentDate = new Date().getTime();\n      const changedTime = currentDate - startDate;\n      if (y != null) {\n        element.scrollTop = parseInt(\n          calc(startY, changeY, changedTime, duration)\n        );\n      }\n      if (x != null) {\n        element.scrollLeft = parseInt(\n          calc(startX, changeX, changedTime, duration)\n        );\n      }\n      if (changedTime < duration) {\n        requestAnimationFrameId = requestAnimationFrame(animateScroll);\n      } else {\n        if (y != null) {\n          element.scrollTop = y;\n        }\n        if (x != null) {\n          element.scrollLeft = x;\n        }\n      }\n      count++;\n    };\n  const stop = () => {\n    cancelAnimationFrame(requestAnimationFrameId);\n  };\n  animateScroll();\n  // return stop\n  return stop;\n  function calc(startValue, changeInValue, changedTime, duration) {\n    return startValue + changeInValue * (changedTime / duration);\n  }\n}\n\n// ### DOM structure\nexport function insertBefore(el: Node, target: Node) {\n  target.parentElement.insertBefore(el, target);\n}\nexport function insertAfter(el: Node, target: Node) {\n  target.parentElement.insertBefore(el, target.nextSibling);\n}\nexport function prependTo(el: Node, target: Node) {\n  target.insertBefore(el, target.firstChild);\n}\nexport function appendTo(el: Node, target: Node) {\n  target.appendChild(el);\n}\n\n// ## Date\n\nexport function cloneDate(dateObj: Date) {\n  return new Date(dateObj.getTime());\n}\n\n// day and date is same\nexport function addDate(\n  dateObj: Date,\n  n: number,\n  type:\n    | \"year\"\n    | \"month\"\n    | \"day\"\n    | \"date\"\n    | \"hour\"\n    | \"minute\"\n    | \"second\"\n    | \"millisecond\"\n) {\n  if (![\"year\", \"month\", \"day\", \"date\"].includes(type)) {\n    type += \"s\";\n  }\n  let type2 = studlyCase(type);\n  if (type2 === \"Day\") {\n    type2 = \"Date\";\n  }\n  var setFuncName = \"set\" + type2;\n  var getFuncName = \"get\" + type2;\n  dateObj[setFuncName](dateObj[getFuncName]() + n);\n  return dateObj;\n}\n\nexport function getMonthStart(dateObj: Date) {\n  const clonedObj = cloneDate(dateObj);\n  clonedObj.setDate(1);\n  return clonedObj;\n}\n\nexport function getMonthEnd(dateObj: Date) {\n  const r = cloneDate(dateObj);\n  addDate(r, 1, \"month\");\n  r.setDate(0);\n  return r;\n}\n\nexport type GetCalendarDay = {\n  year: number;\n  month: number;\n  date: number;\n  text: number;\n  prevMonth?: boolean;\n  currentMonth?: boolean;\n  nextMonth?: boolean;\n};\n/**\n * startWeekDay: 0 is Sunday\n * @param year\n * @param month\n * @param startWeekDay\n * @returns [GetCalendarDay x 7][]\n */\nexport function getCalendar(\n  year: number,\n  month: number,\n  startWeekDay = 0\n): GetCalendarDay[][] {\n  const results = [];\n  const date = new Date(year, month - 1);\n  year = date.getFullYear();\n  month = date.getMonth() + 1;\n  const monthStart = getMonthStart(date);\n  const monthStartDay = monthStart.getDay();\n  const calendarStart = addDate(\n    cloneDate(monthStart),\n    -(monthStartDay + startWeekDay),\n    \"day\"\n  );\n  if (monthStartDay > startWeekDay) {\n    const startDate = calendarStart.getDate();\n    const year = calendarStart.getFullYear();\n    const month = calendarStart.getMonth() + 1;\n    for (let i = startWeekDay; i < monthStartDay; i++) {\n      const date = startDate + i;\n      results.push({\n        year,\n        month,\n        date: date,\n        text: date,\n        prevMonth: true,\n      });\n    }\n  }\n  //\n  const monthEnd = getMonthEnd(date);\n  const monthEndtDate = monthEnd.getDate();\n  for (let i = 1; i <= monthEndtDate; i++) {\n    const date = i;\n    results.push({\n      year: year,\n      month: month,\n      date,\n      text: date,\n      currentMonth: true,\n    });\n  }\n  //\n  const monthEndDay = monthEnd.getDay();\n  const endWeekDay = 6 - startWeekDay;\n  if (monthEndDay < endWeekDay) {\n    const nextMonth = addDate(cloneDate(date), 1, \"month\");\n    const year = nextMonth.getFullYear();\n    const month = nextMonth.getMonth() + 1;\n    for (let i = monthEndDay + 1, date = 1; i <= endWeekDay; i++, date++) {\n      results.push({\n        year: year,\n        month: month,\n        date: date,\n        text: date,\n        nextMonth: true,\n      });\n    }\n  }\n  //\n  return splitArray(results, 7);\n}\n\n/**\n * timezone must be UTC. eg: 2018-09-07T03:38:37.888Z\n * @param str\n * @returns\n */\nexport function isIsoFormat(str: string) {\n  return Boolean(\n    str.length > 15 && str.length < 30 && str.match(/^\\d{4}-\\d{2}-\\d{2}T.*Z$/)\n  );\n}\n\n/**\n *\n * @param timestamp eg: 2018-09-07T03:38:37.888Z\n * @returns\n */\nexport function parseISO(timestamp: string) {\n  const [datePart, timePart] = timestamp.split(\"T\");\n  let y,\n    m,\n    d,\n    h = 0,\n    min = 0,\n    s = 0;\n  [y, m, d] = datePart.split(\"-\").map((v) => parseInt(v));\n  m = m - 1;\n  if (timePart) {\n    const t = timePart.split(\":\").map((v) => parseFloat(v));\n    h = t[0];\n    if (t[1] != null) {\n      min = t[1];\n    }\n    if (t[2] != null) {\n      s = t[2];\n    }\n  }\n  const dt = new Date();\n  dt.setUTCFullYear(y);\n  dt.setUTCMonth(m);\n  dt.setUTCDate(d);\n  dt.setUTCHours(h);\n  dt.setUTCMinutes(min);\n  dt.setUTCSeconds(s);\n  return dt;\n}\n\n// ## advanced\n\nexport type BinarySearchReturn<T> = {\n  index: number;\n  value: T;\n  count: number;\n  hit: boolean;\n  greater?: boolean;\n} | null;\nexport interface BinarySearchOptions {\n  start?: number;\n  end?: number;\n  returnNearestIfNoHit?: boolean;\n  maxTimes?: number;\n}\n/**\n * binarySearch, 二分查找\n * @param arr\n * @param callback return `mid - your_value` for ascending array\n * @param opt\n * @returns\n */\nexport function binarySearch<T>(\n  arr: T[],\n  callback: (mid: T, index: number, count: number) => number,\n  opt: BinarySearchOptions = {}\n): BinarySearchReturn<T> {\n  opt = {\n    start: 0,\n    end: arr.length - 1,\n    maxTimes: 1000,\n    ...opt,\n  };\n  let { start, end } = opt;\n  const { returnNearestIfNoHit, maxTimes } = opt;\n  let midNum;\n  let mid;\n  if (start == null) {\n    start = 0;\n    end = arr.length - 1;\n  }\n  let i = 0;\n  let r;\n  while (start >= 0 && start <= end) {\n    if (i >= maxTimes) {\n      throw Error(\n        `binarySearch: loop times is over ${maxTimes}, you can increase the limit.`\n      );\n    }\n    midNum = Math.floor((end - start) / 2 + start);\n    mid = arr[midNum];\n    const count = i + 1;\n    r = callback(mid, midNum, count);\n    if (r > 0) {\n      end = midNum - 1;\n    } else if (r < 0) {\n      start = midNum + 1;\n    } else {\n      return { index: midNum as number, value: mid as T, count, hit: true };\n    }\n    i++;\n  }\n  return returnNearestIfNoHit\n    ? {\n        index: midNum as number,\n        value: mid as T,\n        count: i + 1,\n        hit: false,\n        greater: r > 0,\n      }\n    : null;\n}\n\n//\nexport function windowLoaded() {\n  return new Promise<void>(function (resolve, reject) {\n    if (document && document.readyState === \"complete\") {\n      resolve();\n    } else {\n      window.addEventListener(\"load\", function once() {\n        resolve();\n        window.removeEventListener(\"load\", once);\n      });\n    }\n  });\n}\n\nexport function waitTime(milliseconds: number, callback?: () => void) {\n  return new Promise<void>(function (resolve, reject) {\n    setTimeout(function () {\n      callback && callback();\n      resolve();\n    }, milliseconds);\n  });\n}\n\nexport function waitFor(condition: () => boolean, time = 100, maxTimes = 1000) {\n  let interval;\n  const promise = new Promise<void>(function (resolve, reject) {\n    let count = 0;\n    function judge() {\n      if (count <= maxTimes) {\n        if (condition()) {\n          stop();\n          resolve();\n        }\n      } else {\n        stop();\n        reject(new Error(\"waitFor: Limit is reached\"));\n      }\n      count++;\n    }\n    interval = setInterval(function () {\n      judge();\n    }, time);\n    judge();\n  });\n  return { promise, stop };\n  function stop() {\n    clearInterval(interval);\n  }\n}\n\nexport async function retry(action: any, limitTimes = 3) {\n  for (let index = 1; index <= limitTimes; index++) {\n    try {\n      // @ts-ignore\n      return await action();\n    } catch (error) {\n      if (index === limitTimes) {\n        throw error;\n      }\n    }\n  }\n}\n\n/**\n * Copy to text to clipboard. Async not supported. Recommend clipboard-polyfill.\n * 复制文字到剪贴板. 仅限于简单使用, 不支持异步. 复杂环境推荐clipboard-polyfill\n * @param text\n * @returns\n */\nexport function copyTextToClipboard(text: string) {\n  try {\n    // use latest api\n    navigator.clipboard.writeText(text);\n    return;\n  } catch (e) {}\n  var textArea = document.createElement(\"textarea\");\n\n  //\n  // *** This styling is an extra step which is likely not required. ***\n  //\n  // Why is it here? To ensure:\n  // 1. the element is able to have focus and selection.\n  // 2. if element was to flash render it has minimal visual impact.\n  // 3. less flakyness with selection and copying which **might** occur if\n  //    the textarea element is not visible.\n  //\n  // The likelihood is the element won't even render, not even a flash,\n  // so some of these are just precautions. However in IE the element\n  // is visible whilst the popup box asking the user for permission for\n  // the web page to copy to the clipboard.\n  //\n\n  // Place in top-left corner of screen regardless of scroll position.\n  textArea.style.position = \"fixed\";\n  textArea.style.top = \"0\";\n  textArea.style.left = \"0\";\n\n  // Ensure it has a small width and height. Setting to 1px / 1em\n  // doesn't work as this gives a negative w/h on some browsers.\n  textArea.style.width = \"2em\";\n  textArea.style.height = \"2em\";\n\n  // We don't need padding, reducing the size if it does flash render.\n  textArea.style.padding = \"0\";\n\n  // Clean up any borders.\n  textArea.style.border = \"none\";\n  textArea.style.outline = \"none\";\n  textArea.style.boxShadow = \"none\";\n\n  // Avoid flash of white box if rendered for any reason.\n  textArea.style.background = \"transparent\";\n\n  textArea.value = text;\n\n  document.body.appendChild(textArea);\n\n  textArea.select();\n\n  try {\n    var successful = document.execCommand(\"copy\");\n    var msg = successful ? \"successful\" : \"unsuccessful\";\n    console.log(\"Copying text command was \" + msg);\n  } catch (err) {\n    console.log(\"Oops, unable to copy\");\n  }\n\n  document.body.removeChild(textArea);\n}\n\nexport function isWindowDefined() {\n  try {\n    return window && true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport function isNode() {\n  // @ts-ignore\n  return Boolean(typeof glb().module !== \"undefined\" && glb().module.exports);\n}\n\nexport function isIE() {\n  // @ts-ignore\n  return Boolean(window.ActiveXObject || \"ActiveXObject\" in window);\n}\n\n/*\nhttps://developer.mozilla.org/docs/Web/API/Window/open\nhttp://www.w3school.com.cn/htmldom/met_win_open.asp#windowfeatures\n*/\nexport function openWindow(url: string, name: string, opt: any = {}) {\n  window.open(\n    url,\n    name,\n    Object.keys(opt)\n      .map((k) => `${k}=${opt[k]}`)\n      .join(\",\")\n  );\n}\n\nexport function openCenterWindow(\n  url: string,\n  name: string,\n  width: number,\n  height: number,\n  opt: any = {}\n) {\n  const t = {\n    width,\n    height,\n    top: (window.screen.availHeight - 30 - height) / 2,\n    left: (window.screen.availWidth - 30 - width) / 2,\n  };\n  Object.assign(t, opt);\n  openWindow(url, name, t);\n}\n\nexport function openPreviewWindow(\n  previewUrl: string,\n  name = \"preview\",\n  width = 1000,\n  height = 800\n) {\n  return openCenterWindow(previewUrl, name, width, height, {\n    directories: \"no\",\n    titlebar: \"no\",\n    toolbar: \"no\",\n    location: \"no\",\n    status: \"no\",\n    menubar: \"no\",\n  });\n}\n\nexport class URLHelper {\n  baseUrl = \"\"; // protocol, hostname, port, pastname\n  search: { [key: string]: string } = {};\n  constructor(baseUrl: string) {\n    let t = decodeURI(baseUrl).split(\"?\");\n    this.baseUrl = t[0];\n    if (t[1]) {\n      t[1].split(\"&\").forEach((v) => {\n        let t2 = v.split(\"=\");\n        this.search[t2[0]] = t2[1] == null ? \"\" : decodeURIComponent(t2[1]);\n      });\n    }\n  }\n  getHref() {\n    const t = [this.baseUrl];\n    let searchStr = Object.keys(this.search)\n      .map((k) => `${k}=${encodeURIComponent(this.search[k])}`)\n      .join(\"&\");\n    if (searchStr) {\n      t.push(searchStr);\n    }\n    return t.join(\"?\");\n  }\n}\n\n/* resolve arguments to help overload. 解析函数参数, 帮助重载\n```js\ntypes eg: ['Object', (i) => i > 3, ['Number', default], null ]\nnull represent all types of argument\nresolveArgsByType([1,'str'], ['Number', 'Boolean' ,'String']) -> [1, null, 'str']\nresolveArgsByType([1,'str'], ['Number', ['Boolean', true] ,'String']) -> [1, true, 'str']\n```\n*/\nexport function resolveArgsByType(args: any[], types: any[]) {\n  let argIndex = 0;\n  return types.map((v) => {\n    // make rule\n    let rule, dft;\n    if (isArray(v)) {\n      rule = v[0];\n      dft = v[1];\n    } else {\n      rule = v;\n      dft = undefined;\n    }\n    if (!isFunction(rule)) {\n      if (rule == null) {\n        rule = () => true;\n      } else {\n        const t = rule;\n        rule = (x) => Object.prototype.toString.call(x) === `[object ${t}]`;\n      }\n    }\n    const arg = args[argIndex];\n    if (rule(arg)) {\n      argIndex++;\n      return arg;\n    } else {\n      return dft;\n    }\n  });\n}\n\nexport function makeStorageHelper<T extends Storage>(storage: T) {\n  return {\n    storage: storage as T,\n    set(name: string, value: any, minutes: number) {\n      // set null can remove a item\n      if (value == null) {\n        this.storage.removeItem(name);\n      } else {\n        this.storage.setItem(\n          name,\n          JSON.stringify({\n            value,\n            expired_at: minutes\n              ? new Date().getTime() + minutes * 60 * 1000\n              : null,\n          })\n        );\n      }\n    },\n    get(name: string) {\n      let t = this.storage.getItem(name);\n      if (t) {\n        t = JSON.parse(t);\n        if (!t.expired_at || t.expired_at > new Date().getTime()) {\n          return t.value;\n        } else {\n          this.storage.removeItem(name);\n        }\n      }\n      return null;\n    },\n    clear() {\n      this.storage.clear();\n    },\n  };\n}\n\nexport const extendedLocalStorage = cacheFunction(function () {\n  return makeStorageHelper(localStorage);\n});\n\nexport const extendedSessionStorage = cacheFunction(function () {\n  return makeStorageHelper(sessionStorage);\n});\n\n/**\n * Base event process. like event bus\n * 事件处理. 类似event bus\n */\nexport class EventProcessor {\n  eventStore = [];\n  on(name: string, handler: any) {\n    this.eventStore.push({ name, handler });\n  }\n  once(name: string, handler: any) {\n    const off = () => {\n      this.off(name, wrappedHandler);\n    };\n    const wrappedHandler = (...args) => {\n      handler(...args);\n      off();\n    };\n    this.on(name, wrappedHandler);\n    return off;\n  }\n  onceTimeout(name: string, handler: any, timeout: number) {\n    let off;\n    const promise = new Promise<void>((resolve, reject) => {\n      const wrappedHandler = (...args) => {\n        handler(...args);\n        resolve();\n      };\n      off = this.once(name, wrappedHandler);\n      waitTime(timeout).then(() => {\n        off();\n        reject();\n      });\n    });\n    const off2 = () => {\n      off && off();\n    };\n    return { off: off2, promise };\n  }\n  off(name: string, handler: any) {\n    const indexes = []; // to remove indexes; reverse; 倒序的\n    const len = this.eventStore.length;\n    for (let i = 0; i < len; i++) {\n      const item = this.eventStore[i];\n      if (item.name === name && item.handler === handler) {\n        indexes.unshift(i);\n      }\n    }\n    for (const index of indexes) {\n      this.eventStore.splice(index, 1);\n    }\n  }\n  emit(name: string, ...args: any[]) {\n    // 重要: 先找到要执行的项放在新数组里, 因为执行项会改变事件项存储数组\n    const items = [];\n    for (const item of this.eventStore) {\n      if (item.name === name) {\n        items.push(item);\n      }\n    }\n    for (const item of items) {\n      item.handler(...args);\n    }\n  }\n}\n\n/**\n * Pass event cross window\n */\nexport class CrossWindowEventProcessor extends EventProcessor {\n  storageName = \"_crossWindow\";\n  windows = [];\n  timeout = 200;\n  id: string;\n  ready: Promise<void>;\n  // id\n  constructor(opt: { timeout?: number }) {\n    super();\n    if (opt) {\n      Object.assign(this, opt);\n    }\n    on(window, \"storage\", (ev: StorageEvent) => {\n      if (ev.key === this.storageName) {\n        const event = JSON.parse(ev.newValue);\n        if (!event.targets || event.targets.includes(this.id)) {\n          this.emitLocal(event.name, ...event.args);\n        }\n      }\n    });\n    // social parts 集体部分\n    // join\n    this.id = randString();\n    this.windows = [this.id];\n    this.ready = new Promise((resolve, reject) => {\n      this.onceTimeout(\n        \"_windows_updated\",\n        ({ windows }) => {\n          this.windows = windows;\n        },\n        this.timeout\n      ).promise.then(\n        () => {\n          resolve();\n          // responsed 被响应\n        },\n        () => {\n          // no response 无响应\n          resolve();\n        }\n      );\n      this.broadcast(\"_join\", this.id);\n    });\n    this.ready.then(() => {\n      // on join\n      this.on(\"_join\", (id) => {\n        this.windows.push(id);\n        if (this.isMain()) {\n          this.broadcast(\"_windows_updated\", {\n            windows: this.windows,\n            type: \"join\",\n            id,\n          });\n        }\n      });\n      // on _windows_updated\n      this.on(\"_windows_updated\", ({ windows }) => {\n        this.windows = windows;\n      });\n      // on exit\n      this.on(\"_exit\", (id) => {\n        const oldMain = this.windows[0];\n        arrayRemove(this.windows, id);\n        if (this.isMain()) {\n          this.emit(\"_windows_updated\", {\n            windows: this.windows,\n            type: \"exit\",\n            id,\n          });\n          if (oldMain != this.id) {\n            this.emit(\"_main_updated\", {\n              windows: this.windows,\n              old: oldMain,\n              new: this.id,\n            });\n          }\n        }\n      });\n      on(window, \"beforeunload\", () => {\n        this.exitGroup();\n      });\n    });\n  }\n  isMain() {\n    return this.id === this.windows[0];\n  }\n  BROADCAST = \"__BROADCAST__\";\n  emitTo(name: string, targets, ...args) {\n    if (targets === this.BROADCAST) {\n      targets = null;\n    } else {\n      if (targets && !isArray(targets)) {\n        targets = [targets];\n      }\n      if (targets.includes(this.id)) {\n        super.emit(name, ...args); // emit to current window\n      }\n    }\n    glb().localStorage.setItem(\n      this.storageName,\n      JSON.stringify({\n        name,\n        targets,\n        args,\n        // use random make storage event triggered every time\n        // 加入随机保证触发storage事件\n        random: Math.random(),\n      })\n    );\n  }\n  emitLocal(name: string, ...args) {\n    this.emitTo(name, this.id, ...args);\n  }\n  broadcast(name: string, ...args) {\n    this.emitTo(name, this.BROADCAST, ...args);\n  }\n  emit(name: string, ...args) {\n    this.emitTo(name, this.windows, ...args);\n  }\n  exitGroup() {\n    this.broadcast(\"_exit\", this.id);\n  }\n}\n\n/**\n * on continuous input. return destroy\n * 监听连续输入事件. 返回取消监听函数. 例如监听用户输入aa\n * @param handler\n * @param opt\n * @returns\n */\nexport function onContinuousInput(\n  handler: (input: string) => void,\n  opt: { timeout?: number } = {}\n) {\n  opt = {\n    timeout: 1000,\n    ...opt,\n  };\n  let input = \"\";\n  let timeoutId;\n  const keydownHandler = (e) => {\n    if (e.key && e.key.length === 1) {\n      input = `${input}${e.key}`;\n      handler(input);\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        timeoutId = null;\n      }\n      timeoutId = setTimeout(() => {\n        input = \"\";\n      }, opt.timeout);\n    }\n  };\n  on(document, \"keydown\", keydownHandler);\n  return () => {\n    off(document, \"keydown\", keydownHandler);\n  };\n}\n\n// refer [onContinuousInput](#onContinuousInput)\nexport const onQuickKeydown = onContinuousInput;\n\nexport function getUserLanguage(): string {\n  return navigator.language || navigator[\"userLanguage\"];\n}\n\nexport class Cache {\n  store = {};\n  has(name: string) {\n    return this.store.hasOwnProperty(name);\n  }\n  remember(name: string, getter: () => any) {\n    if (!this.has(name)) {\n      this.store[name] = {\n        value: getter(),\n      };\n    }\n    return this.store[name].value;\n  }\n  forget(name: string) {\n    if (name) {\n      if (this.has(name)) {\n        delete this.store[name];\n      }\n    } else {\n      this.store = {};\n    }\n  }\n}\n\n// attach cached getters to an object; can attach to self\nexport function attachCache(obj: any, toCache: object, cache = new Cache()) {\n  for (const key in toCache) {\n    const getter = toCache[key];\n    Object.defineProperty(obj, key, {\n      get() {\n        return cache.remember(key, () => getter.call(this));\n      },\n    });\n  }\n}\n\n// for animation\nexport function easeInOutQuad(\n  startValue: number,\n  changeInValue: number,\n  changedTime: number,\n  duration: number\n) {\n  let t = changedTime,\n    d = duration,\n    b = startValue,\n    c = changeInValue;\n  t /= d / 2;\n  if (t < 1) return (c / 2) * t * t + b;\n  t--;\n  return (-c / 2) * (t * (t - 2) - 1) + b;\n}\n\n// others\nexport function isMobile() {\n  var isMobile = false; //initiate as false\n  // device detection\n  if (\n    /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(\n      navigator.userAgent\n    ) ||\n    /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n      navigator.userAgent.substring(0, 4)\n    )\n  ) {\n    isMobile = true;\n  }\n  return isMobile;\n}\n\nexport class Accumulate<T> {\n  arr: T[] = [];\n  cache: number[] = [];\n  constructor(arr: T[]) {\n    this.arr = arr;\n  }\n  getValue(item: T): number {\n    // @ts-ignore\n    return item;\n  }\n  sum(index: number) {\n    if (this.cache[index] == null) {\n      let prev = index > 0 ? this.sum(index - 1) : 0;\n      this.cache[index] = this.getValue(this.arr[index]) + prev;\n    }\n    return this.cache[index];\n  }\n}\n/**\n * from https://www.zhangxinxu.com/wordpress/2018/08/css-svg-background-image-base64-encode/\n * @param svgCode\n * @returns\n */\nexport function svgToDataURL(svgCode: string) {\n  return (\n    \"data:image/svg+xml,\" +\n    svgCode\n      .replace(/\"/g, \"'\")\n      .replace(/%/g, \"%25\")\n      .replace(/#/g, \"%23\")\n      .replace(/{/g, \"%7B\")\n      .replace(/}/g, \"%7D\")\n      .replace(/</g, \"%3C\")\n      .replace(/>/g, \"%3E\")\n  );\n}\n\nexport function genRandomLightColor() {\n  var letters = \"BCDEF\".split(\"\");\n  var color = \"#\";\n  for (var i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * letters.length)];\n  }\n  return color;\n}\n/**\n * Like Map, support array as key. array order is used.\n */\nexport class ArrayKeyMap<T> {\n  _map = new Map<any, [string, number]>();\n  _values: Record<string, [any[], T]> = {};\n  _objCount = 0;\n  _keysToString(keys: any[]): string | null {\n    const { _map } = this;\n    let t = [];\n    for (const key of keys) {\n      if (!_map.has(key)) {\n        return null;\n      }\n      t.push(_map.get(key)[0]);\n    }\n    return t.toString();\n  }\n  has(keys: any[]) {\n    if (this._keysToString(keys) == null) {\n      return false;\n    }\n    return true;\n  }\n  /**\n   * throw error if not found\n   * @param keys\n   * @returns\n   */\n  get(keys: any[]) {\n    const { _values } = this;\n    const key2 = this._keysToString(keys);\n    if (key2 == null) {\n      throw \"Value not found by specified keys\";\n    }\n    return _values[key2][1];\n  }\n  set(keys: any[], value: T) {\n    const { _map, _values } = this;\n    let t = [];\n    for (const key of keys) {\n      let str: string;\n      let count = 1;\n      if (_map.has(key)) {\n        [str, count] = _map.get(key);\n        count++;\n      } else {\n        this._objCount++;\n        str = this._objCount.toString();\n      }\n      _map.set(key, [str, count]);\n      t.push(str);\n    }\n    _values[t.toString()] = [keys.slice(), value];\n  }\n  delete(keys: any[]) {\n    const { _values, _map } = this;\n    const key2 = this._keysToString(keys);\n    if (key2 == null) {\n      throw \"Value not found by specified keys\";\n    }\n    delete _values[key2];\n    for (const key of keys) {\n      let [str, count] = _map.get(key);\n      count--;\n      if (count === 0) {\n        _map.delete(key);\n      } else {\n        _map.set(key, [str, count]);\n      }\n    }\n  }\n  clear() {\n    this._map.clear();\n    this._values = {};\n  }\n  *entries() {\n    const { _values } = this;\n    for (const key in _values) {\n      const [keys, value] = _values[key];\n      yield [keys, value];\n    }\n  }\n  count() {\n    return [...this.entries()].length;\n  }\n}\n\n// typescript\nexport type ParametersWithoutFirst<T extends (...args: any) => any> =\n  T extends (first: any, ...args: infer P) => any ? P : never;\n\n/**\n * Remove function's first parameter\n */\nexport type OmitFirstParameter<F> = F extends (\n  x: any,\n  ...args: infer P\n) => infer R\n  ? (...args: P) => R\n  : never;\n\nexport type ReplaceReturnType<T extends (...a: any) => any, TNewReturn> = (\n  ...a: Parameters<T>\n) => TNewReturn;\n\nexport type Nullable<T> = T | null;\n"],"names":["glb","window","error","global","isArray","v","Object","prototype","toString","call","isBool","isNumber","isObject","isFunction","randInt","min","max","Math","floor","random","randChoice","arr","length","notLessThan","n","notGreaterThan","studlyCase","str","toUpperCase","substring","kebabCase","replace","toLowerCase","camelCase","temp","split","i","join","camelToWords","randString","len","arguments","undefined","seeds","r","arrayRemove","index","count","indexOf","splice","arrayLast","toArrayIfNot","arrOrNot","splitArray","getChunkLength","times","end","push","slice","arrayFilter","without","filter","arrayWithout","iterateAll","val","opt","reverse","info","value","exclude","keys","key","assignIfNoKey","obj","hasOwnProperty","assignIfKeyNull","assignIfDiff","objectAssignIfNoKey","obj1","obj2","forEach","withoutUndefined","walkTreeData","handler","childrenKey","rootChildren","StopException","func","children","parent","parentPath","item","path","childFirst","e","findInfoInTreeData","node","cloneTreeData","root","options","assign","nodeHandler","td","TreeData","newNode","oldNode","set","data","constructor","this","iteratePath","_this","list","path0","prevPath","prevChildren","currentPath","currentNode","getFamily","all","get","getParentAndIndex","pop","getParent","parentChildren","delete","walk","clone","cacheFunction","cachedArgsArr","map","defaultValue","noArgsCache","action","_len6","args","Array","_key6","ArrayKeyMap","has","capacity","removed","clearCache","promisePin","resolve","reject","promise","Promise","resolve2","reject2","continuous","method","strategy","queue","working","currentCount","async","done","_len7","_key7","shift","currentIndex","skipped","resetCount","task","promiseContinuous","getOffset","el","rect","getBoundingClientRect","t","document","documentElement","x","left","y","top","getOffsetParent","offsetParent","body","getComputedStyle","position","parentElement","xy","clientTop","bottom","clientLeft","right","json","width","height","toJSON","getViewportPosition","backupAttr","name","getAttribute","restoreAttr","removeAttribute","setAttribute","hasClass","className","classList","contains","RegExp","test","on","addEventListener","attachEvent","off","removeEventListener","detachEvent","css","insertAfter","target","insertBefore","nextSibling","cloneDate","dateObj","Date","getTime","addDate","type","includes","type2","getFuncName","getMonthStart","clonedObj","setDate","getMonthEnd","binarySearch","callback","start","maxTimes","returnNearestIfNoHit","midNum","mid","Error","hit","greater","waitTime","milliseconds","setTimeout","openWindow","url","open","k","openCenterWindow","screen","availHeight","availWidth","makeStorageHelper","storage","minutes","removeItem","setItem","JSON","stringify","expired_at","getItem","parse","clear","extendedLocalStorage","localStorage","extendedSessionStorage","sessionStorage","EventProcessor","eventStore","once","wrappedHandler","onceTimeout","timeout","then","off2","indexes","unshift","emit","items","_len9","_key9","onContinuousInput","timeoutId","input","keydownHandler","clearTimeout","onQuickKeydown","Cache","store","remember","getter","forget","_map","Map","_values","_objCount","_keysToString","key2","entries","cache","getValue","sum","prev","storageName","windows","id","ready","super","ev","event","newValue","targets","emitLocal","_ref","broadcast","isMain","_ref2","oldMain","old","new","exitGroup","BROADCAST","emitTo","_len10","_key10","_len11","_key11","_len12","_key12","_len13","_key13","baseUrl","search","decodeURI","t2","decodeURIComponent","getHref","searchStr","encodeURIComponent","add","appendChild","finallyFunc","endIndex","arr1","arr2","m1","m2","r1","r2","diff","fill","getMark","Set","mark","depth","rec","curentDepth","sortedIndexes","toCache","defineProperty","context","_len5","_key5","apply","text","navigator","clipboard","writeText","textArea","createElement","style","padding","border","outline","boxShadow","background","select","msg","execCommand","console","log","err","removeChild","htmlString","div","innerHTML","trim","childNodes","parseFloat","delaying","result","wait","lastArgs","stop","resolves","rejects","_len3","_key3","throwError","paths","current","parts","part","lastPart","startValue","changeInValue","changedTime","duration","elementsFromPoint","msElementsFromPoint","parents","elementFromPoint","pointerEvents","isNaN","getters","stopped","concurrent","chunks","promises","chunk","chunkPromises","_len","_key","destroyFuncs","listenAll","listening","destroy","destroyAll","resume","cur","withSelf","shouldBreak","until","withUntil","letters","color","offsets","year","month","startWeekDay","results","date","getFullYear","getMonth","monthStart","monthStartDay","getDay","calendarStart","startDate","getDate","prevMonth","monthEnd","monthEndtDate","currentMonth","monthEndDay","endWeekDay","nextMonth","display","size","image","src","margin","stl","ps","offsetLeft","offsetTop","scrollLeft","scrollTop","of","parentOf","pageYOffset","pageXOffset","B","D","clientHeight","direction","space","scrollWidth","clientWidth","scrollHeight","par","local_url","location","href","get_par","nextPar","language","groups","classNames","strOrArr","parentNode","Boolean","ActiveXObject","match","isMobile","userAgent","module","exports","isFinite","offset","offsetWidth","offsetHeight","values","scrollingElement","funcs","next","wrapFuncWithNext","_len4","_key4","wrappedFunc","join2func","func1","func2","arg","result1","rows1","rows2","key1","ignoreUnmatched","row","usedRows2","row2","limit","stack","newParent","canPush","newVal","toDelete","skip","idKey","targetObj","targetKey","sourceObj","sourceKey","getOwnPropertyDescriptor","configurable","enumerable","keysSet","onceHandler","_len8","_key8","destroied","previewUrl","directories","titlebar","toolbar","status","menubar","timestamp","datePart","timePart","m","d","h","s","parseInt","dt","setUTCFullYear","setUTCMonth","setUTCDate","setUTCHours","setUTCMinutes","setUTCSeconds","p1","p2","endsWith","startsWith","element","firstChild","rejected","remove","types","argIndex","rule","dft","valueOrGetter","limitTimes","requestAnimationFrameId","startY","changeY","startX","changeX","animateScroll","beforeEveryFrame","calc","requestAnimationFrame","cancelAnimationFrame","child","childComponentIndex","nearestIndex","nearest","padString","svgCode","prop","viewportPosition","visibility","divVP","condition","interval","time","judge","setInterval","clearInterval","getVal","oldVal","_len2","_key2","readyState"],"mappings":"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"}